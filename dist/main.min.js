(()=>{var t={4963:t=>{t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},7722:(t,e,n)=>{var r=n(6314)("unscopables"),i=Array.prototype;null==i[r]&&n(7728)(i,r,{}),t.exports=function(t){i[r][t]=!0}},6793:(t,e,n)=>{"use strict";var r=n(4496)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},3328:t=>{t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},7007:(t,e,n)=>{var r=n(5286);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},5216:(t,e,n)=>{"use strict";var r=n(508),i=n(2337),o=n(875);t.exports=[].copyWithin||function(t,e){var n=r(this),s=o(n.length),a=i(t,s),u=i(e,s),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?s:i(c,s))-u,s-a),h=1;for(u<a&&a<u+l&&(h=-1,u+=l-1,a+=l-1);l-- >0;)u in n?n[a]=n[u]:delete n[a],a+=h,u+=h;return n}},6852:(t,e,n)=>{"use strict";var r=n(508),i=n(2337),o=n(875);t.exports=function(t){for(var e=r(this),n=o(e.length),s=arguments.length,a=i(s>1?arguments[1]:void 0,n),u=s>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>a;)e[a++]=t;return e}},9315:(t,e,n)=>{var r=n(2110),i=n(875),o=n(2337);t.exports=function(t){return function(e,n,s){var a,u=r(e),c=i(u.length),l=o(s,c);if(t&&n!=n){for(;c>l;)if((a=u[l++])!=a)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},50:(t,e,n)=>{var r=n(741),i=n(9797),o=n(508),s=n(875),a=n(6886);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,l=4==t,h=6==t,f=5==t||h,d=e||a;return function(e,a,p){for(var v,m,g=o(e),y=i(g),b=r(a,p,3),x=s(y.length),w=0,S=n?d(e,x):u?d(e,0):void 0;x>w;w++)if((f||w in y)&&(m=b(v=y[w],w,g),t))if(n)S[w]=m;else if(m)switch(t){case 3:return!0;case 5:return v;case 6:return w;case 2:S.push(v)}else if(l)return!1;return h?-1:c||l?l:S}}},7628:(t,e,n)=>{var r=n(4963),i=n(508),o=n(9797),s=n(875);t.exports=function(t,e,n,a,u){r(e);var c=i(t),l=o(c),h=s(c.length),f=u?h-1:0,d=u?-1:1;if(n<2)for(;;){if(f in l){a=l[f],f+=d;break}if(f+=d,u?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;u?f>=0:h>f;f+=d)f in l&&(a=e(a,l[f],f,c));return a}},2736:(t,e,n)=>{var r=n(5286),i=n(4302),o=n(6314)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},6886:(t,e,n)=>{var r=n(2736);t.exports=function(t,e){return new(r(t))(e)}},4398:(t,e,n)=>{"use strict";var r=n(4963),i=n(5286),o=n(7242),s=[].slice,a={},u=function(t,e,n){if(!(e in a)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";a[e]=Function("F,a","return new F("+r.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=s.call(arguments,1),a=function(){var r=n.concat(s.call(arguments));return this instanceof a?u(e,r.length,r):o(e,r,t)};return i(e.prototype)&&(a.prototype=e.prototype),a}},1488:(t,e,n)=>{var r=n(2032),i=n(6314)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},2032:t=>{var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},5645:t=>{var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},2811:(t,e,n)=>{"use strict";var r=n(9275),i=n(681);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},741:(t,e,n)=>{var r=n(4963);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},1355:t=>{t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},7057:(t,e,n)=>{t.exports=!n(4253)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},2457:(t,e,n)=>{var r=n(5286),i=n(3816).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},4430:t=>{t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},5541:(t,e,n)=>{var r=n(7184),i=n(4548),o=n(4682);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var s,a=n(t),u=o.f,c=0;a.length>c;)u.call(t,s=a[c++])&&e.push(s);return e}},2985:(t,e,n)=>{var r=n(3816),i=n(5645),o=n(7728),s=n(7234),a=n(741),u=function(t,e,n){var c,l,h,f,d=t&u.F,p=t&u.G,v=t&u.S,m=t&u.P,g=t&u.B,y=p?r:v?r[e]||(r[e]={}):(r[e]||{}).prototype,b=p?i:i[e]||(i[e]={}),x=b.prototype||(b.prototype={});for(c in p&&(n=e),n)h=((l=!d&&y&&void 0!==y[c])?y:n)[c],f=g&&l?a(h,r):m&&"function"==typeof h?a(Function.call,h):h,y&&s(y,c,h,t&u.U),b[c]!=h&&o(b,c,f),m&&x[c]!=h&&(x[c]=h)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},8852:(t,e,n)=>{var r=n(6314)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},4253:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},8082:(t,e,n)=>{"use strict";n(8269);var r=n(7234),i=n(7728),o=n(4253),s=n(1355),a=n(6314),u=n(1165),c=a("species"),l=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),h=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var f=a(t),d=!o((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),p=d?!o((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[c]=function(){return n}),n[f](""),!e})):void 0;if(!d||!p||"replace"===t&&!l||"split"===t&&!h){var v=/./[f],m=n(s,f,""[t],(function(t,e,n,r,i){return e.exec===u?d&&!i?{done:!0,value:v.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),g=m[0],y=m[1];r(String.prototype,t,g),i(RegExp.prototype,f,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}}},3218:(t,e,n)=>{"use strict";var r=n(7007);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},3531:(t,e,n)=>{var r=n(741),i=n(8851),o=n(6555),s=n(7007),a=n(875),u=n(9002),c={},l={},h=t.exports=function(t,e,n,h,f){var d,p,v,m,g=f?function(){return t}:u(t),y=r(n,h,e?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(d=a(t.length);d>b;b++)if((m=e?y(s(p=t[b])[0],p[1]):y(t[b]))===c||m===l)return m}else for(v=g.call(t);!(p=v.next()).done;)if((m=i(v,y,p.value,e))===c||m===l)return m};h.BREAK=c,h.RETURN=l},18:(t,e,n)=>{t.exports=n(3825)("native-function-to-string",Function.toString)},3816:t=>{var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},9181:t=>{var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},7728:(t,e,n)=>{var r=n(9275),i=n(681);t.exports=n(7057)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},639:(t,e,n)=>{var r=n(3816).document;t.exports=r&&r.documentElement},1734:(t,e,n)=>{t.exports=!n(7057)&&!n(4253)((function(){return 7!=Object.defineProperty(n(2457)("div"),"a",{get:function(){return 7}}).a}))},266:(t,e,n)=>{var r=n(5286),i=n(7375).set;t.exports=function(t,e,n){var o,s=e.constructor;return s!==n&&"function"==typeof s&&(o=s.prototype)!==n.prototype&&r(o)&&i&&i(t,o),t}},7242:t=>{t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},9797:(t,e,n)=>{var r=n(2032);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},6555:(t,e,n)=>{var r=n(2803),i=n(6314)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},4302:(t,e,n)=>{var r=n(2032);t.exports=Array.isArray||function(t){return"Array"==r(t)}},5286:t=>{t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},5364:(t,e,n)=>{var r=n(5286),i=n(2032),o=n(6314)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},8851:(t,e,n)=>{var r=n(7007);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},9988:(t,e,n)=>{"use strict";var r=n(2503),i=n(681),o=n(2943),s={};n(7728)(s,n(6314)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(s,{next:i(1,n)}),o(t,e+" Iterator")}},2923:(t,e,n)=>{"use strict";var r=n(4461),i=n(2985),o=n(7234),s=n(7728),a=n(2803),u=n(9988),c=n(2943),l=n(468),h=n(6314)("iterator"),f=!([].keys&&"next"in[].keys()),d="keys",p="values",v=function(){return this};t.exports=function(t,e,n,m,g,y,b){u(n,e,m);var x,w,S,O=function(t){if(!f&&t in P)return P[t];switch(t){case d:case p:return function(){return new n(this,t)}}return function(){return new n(this,t)}},T=e+" Iterator",N=g==p,_=!1,P=t.prototype,E=P[h]||P["@@iterator"]||g&&P[g],L=E||O(g),R=g?N?O("entries"):L:void 0,M="Array"==e&&P.entries||E;if(M&&(S=l(M.call(new t)))!==Object.prototype&&S.next&&(c(S,T,!0),r||"function"==typeof S[h]||s(S,h,v)),N&&E&&E.name!==p&&(_=!0,L=function(){return E.call(this)}),r&&!b||!f&&!_&&P[h]||s(P,h,L),a[e]=L,a[T]=v,g)if(x={values:N?L:O(p),keys:y?L:O(d),entries:R},b)for(w in x)w in P||o(P,w,x[w]);else i(i.P+i.F*(f||_),e,x);return x}},7462:(t,e,n)=>{var r=n(6314)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},t(o)}catch(t){}return n}},5436:t=>{t.exports=function(t,e){return{value:e,done:!!t}}},2803:t=>{t.exports={}},4461:t=>{t.exports=!1},1801:t=>{t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},4728:(t,e,n)=>{var r=n(3953)("meta"),i=n(5286),o=n(9181),s=n(9275).f,a=0,u=Object.isExtensible||function(){return!0},c=!n(4253)((function(){return u(Object.preventExtensions({}))})),l=function(t){s(t,r,{value:{i:"O"+ ++a,w:{}}})},h=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return c&&h.NEED&&u(t)&&!o(t,r)&&l(t),t}}},4351:(t,e,n)=>{var r=n(3816),i=n(4193).set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,a=r.Promise,u="process"==n(2032)(s);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=s.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){s.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var l=a.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var h=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=h=!h}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},3499:(t,e,n)=>{"use strict";var r=n(4963);function i(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new i(t)}},5345:(t,e,n)=>{"use strict";var r=n(7057),i=n(7184),o=n(4548),s=n(4682),a=n(508),u=n(9797),c=Object.assign;t.exports=!c||n(4253)((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=r}))?function(t,e){for(var n=a(t),c=arguments.length,l=1,h=o.f,f=s.f;c>l;)for(var d,p=u(arguments[l++]),v=h?i(p).concat(h(p)):i(p),m=v.length,g=0;m>g;)d=v[g++],r&&!f.call(p,d)||(n[d]=p[d]);return n}:c},2503:(t,e,n)=>{var r=n(7007),i=n(5588),o=n(4430),s=n(9335)("IE_PROTO"),a=function(){},u=function(){var t,e=n(2457)("iframe"),r=o.length;for(e.style.display="none",n(639).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=r(t),n=new a,a.prototype=null,n[s]=t):n=u(),void 0===e?n:i(n,e)}},9275:(t,e,n)=>{var r=n(7007),i=n(1734),o=n(1689),s=Object.defineProperty;e.f=n(7057)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},5588:(t,e,n)=>{var r=n(9275),i=n(7007),o=n(7184);t.exports=n(7057)?Object.defineProperties:function(t,e){i(t);for(var n,s=o(e),a=s.length,u=0;a>u;)r.f(t,n=s[u++],e[n]);return t}},8693:(t,e,n)=>{var r=n(4682),i=n(681),o=n(2110),s=n(1689),a=n(9181),u=n(1734),c=Object.getOwnPropertyDescriptor;e.f=n(7057)?c:function(t,e){if(t=o(t),e=s(e,!0),u)try{return c(t,e)}catch(t){}if(a(t,e))return i(!r.f.call(t,e),t[e])}},9327:(t,e,n)=>{var r=n(2110),i=n(616).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return s.slice()}}(t):i(r(t))}},616:(t,e,n)=>{var r=n(189),i=n(4430).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},4548:(t,e)=>{e.f=Object.getOwnPropertySymbols},468:(t,e,n)=>{var r=n(9181),i=n(508),o=n(9335)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},189:(t,e,n)=>{var r=n(9181),i=n(2110),o=n(9315)(!1),s=n(9335)("IE_PROTO");t.exports=function(t,e){var n,a=i(t),u=0,c=[];for(n in a)n!=s&&r(a,n)&&c.push(n);for(;e.length>u;)r(a,n=e[u++])&&(~o(c,n)||c.push(n));return c}},7184:(t,e,n)=>{var r=n(189),i=n(4430);t.exports=Object.keys||function(t){return r(t,i)}},4682:(t,e)=>{e.f={}.propertyIsEnumerable},3160:(t,e,n)=>{var r=n(2985),i=n(5645),o=n(4253);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],s={};s[t]=e(n),r(r.S+r.F*o((function(){n(1)})),"Object",s)}},1131:(t,e,n)=>{var r=n(7057),i=n(7184),o=n(2110),s=n(4682).f;t.exports=function(t){return function(e){for(var n,a=o(e),u=i(a),c=u.length,l=0,h=[];c>l;)n=u[l++],r&&!s.call(a,n)||h.push(t?[n,a[n]]:a[n]);return h}}},7643:(t,e,n)=>{var r=n(616),i=n(4548),o=n(7007),s=n(3816).Reflect;t.exports=s&&s.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},188:t=>{t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},94:(t,e,n)=>{var r=n(7007),i=n(5286),o=n(3499);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},681:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},4408:(t,e,n)=>{var r=n(7234);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},7234:(t,e,n)=>{var r=n(3816),i=n(7728),o=n(9181),s=n(3953)("src"),a=n(18),u="toString",c=(""+a).split(u);n(5645).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,a){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(u&&(o(n,s)||i(n,s,t[e]?""+t[e]:c.join(String(e)))),t===r?t[e]=n:a?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,u,(function(){return"function"==typeof this&&this[s]||a.call(this)}))},7787:(t,e,n)=>{"use strict";var r=n(1488),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},1165:(t,e,n)=>{"use strict";var r,i,o=n(3218),s=RegExp.prototype.exec,a=String.prototype.replace,u=s,c=(r=/a/,i=/b*/g,s.call(r,"a"),s.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),l=void 0!==/()??/.exec("")[1];(c||l)&&(u=function(t){var e,n,r,i,u=this;return l&&(n=new RegExp("^"+u.source+"$(?!\\s)",o.call(u))),c&&(e=u.lastIndex),r=s.call(u,t),c&&r&&(u.lastIndex=u.global?r.index+r[0].length:e),l&&r&&r.length>1&&a.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),t.exports=u},7195:t=>{t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},7375:(t,e,n)=>{var r=n(5286),i=n(7007),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(741)(Function.call,n(8693).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},2974:(t,e,n)=>{"use strict";var r=n(3816),i=n(9275),o=n(7057),s=n(6314)("species");t.exports=function(t){var e=r[t];o&&e&&!e[s]&&i.f(e,s,{configurable:!0,get:function(){return this}})}},2943:(t,e,n)=>{var r=n(9275).f,i=n(9181),o=n(6314)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},9335:(t,e,n)=>{var r=n(3825)("keys"),i=n(3953);t.exports=function(t){return r[t]||(r[t]=i(t))}},3825:(t,e,n)=>{var r=n(5645),i=n(3816),o="__core-js_shared__",s=i[o]||(i[o]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(4461)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},8364:(t,e,n)=>{var r=n(7007),i=n(4963),o=n(6314)("species");t.exports=function(t,e){var n,s=r(t).constructor;return void 0===s||null==(n=r(s)[o])?e:i(n)}},7717:(t,e,n)=>{"use strict";var r=n(4253);t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},4496:(t,e,n)=>{var r=n(1467),i=n(1355);t.exports=function(t){return function(e,n){var o,s,a=String(i(e)),u=r(n),c=a.length;return u<0||u>=c?t?"":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},2094:(t,e,n)=>{var r=n(5364),i=n(1355);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},8595:(t,e,n)=>{"use strict";var r=n(1467),i=n(1355);t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},9599:(t,e,n)=>{var r=n(2985),i=n(1355),o=n(4253),s=n(4644),a="["+s+"]",u=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),l=function(t,e,n){var i={},a=o((function(){return!!s[t]()||"​"!="​"[t]()})),u=i[t]=a?e(h):s[t];n&&(i[n]=u),r(r.P+r.F*a,"String",i)},h=l.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=l},4644:t=>{t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},4193:(t,e,n)=>{var r,i,o,s=n(741),a=n(7242),u=n(639),c=n(2457),l=n(3816),h=l.process,f=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,v=l.Dispatch,m=0,g={},y="onreadystatechange",b=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},x=function(t){b.call(t.data)};f&&d||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++m]=function(){a("function"==typeof t?t:Function(t),e)},r(m),m},d=function(t){delete g[t]},"process"==n(2032)(h)?r=function(t){h.nextTick(s(b,t,1))}:v&&v.now?r=function(t){v.now(s(b,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=x,r=s(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",x,!1)):r=y in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),b.call(t)}}:function(t){setTimeout(s(b,t,1),0)}),t.exports={set:f,clear:d}},2337:(t,e,n)=>{var r=n(1467),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},4843:(t,e,n)=>{var r=n(1467),i=n(875);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},1467:t=>{var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:e)(t)}},2110:(t,e,n)=>{var r=n(9797),i=n(1355);t.exports=function(t){return r(i(t))}},875:(t,e,n)=>{var r=n(1467),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},508:(t,e,n)=>{var r=n(1355);t.exports=function(t){return Object(r(t))}},1689:(t,e,n)=>{var r=n(5286);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},8440:(t,e,n)=>{"use strict";if(n(7057)){var r=n(4461),i=n(3816),o=n(4253),s=n(2985),a=n(9383),u=n(1125),c=n(741),l=n(3328),h=n(681),f=n(7728),d=n(4408),p=n(1467),v=n(875),m=n(4843),g=n(2337),y=n(1689),b=n(9181),x=n(1488),w=n(5286),S=n(508),O=n(6555),T=n(2503),N=n(468),_=n(616).f,P=n(9002),E=n(3953),L=n(6314),R=n(50),M=n(9315),C=n(8364),A=n(6997),k=n(2803),z=n(7462),j=n(2974),I=n(6852),D=n(5216),F=n(9275),V=n(8693),U=F.f,B=V.f,J=i.RangeError,G=i.TypeError,H=i.Uint8Array,W="ArrayBuffer",q="SharedArrayBuffer",X="BYTES_PER_ELEMENT",Y=Array.prototype,K=u.ArrayBuffer,$=u.DataView,Q=R(0),Z=R(2),tt=R(3),et=R(4),nt=R(5),rt=R(6),it=M(!0),ot=M(!1),st=A.values,at=A.keys,ut=A.entries,ct=Y.lastIndexOf,lt=Y.reduce,ht=Y.reduceRight,ft=Y.join,dt=Y.sort,pt=Y.slice,vt=Y.toString,mt=Y.toLocaleString,gt=L("iterator"),yt=L("toStringTag"),bt=E("typed_constructor"),xt=E("def_constructor"),wt=a.CONSTR,St=a.TYPED,Ot=a.VIEW,Tt="Wrong length!",Nt=R(1,(function(t,e){return Rt(C(t,t[xt]),e)})),_t=o((function(){return 1===new H(new Uint16Array([1]).buffer)[0]})),Pt=!!H&&!!H.prototype.set&&o((function(){new H(1).set({})})),Et=function(t,e){var n=p(t);if(n<0||n%e)throw J("Wrong offset!");return n},Lt=function(t){if(w(t)&&St in t)return t;throw G(t+" is not a typed array!")},Rt=function(t,e){if(!w(t)||!(bt in t))throw G("It is not a typed array constructor!");return new t(e)},Mt=function(t,e){return Ct(C(t,t[xt]),e)},Ct=function(t,e){for(var n=0,r=e.length,i=Rt(t,r);r>n;)i[n]=e[n++];return i},At=function(t,e,n){U(t,e,{get:function(){return this._d[n]}})},kt=function(t){var e,n,r,i,o,s,a=S(t),u=arguments.length,l=u>1?arguments[1]:void 0,h=void 0!==l,f=P(a);if(null!=f&&!O(f)){for(s=f.call(a),r=[],e=0;!(o=s.next()).done;e++)r.push(o.value);a=r}for(h&&u>2&&(l=c(l,arguments[2],2)),e=0,n=v(a.length),i=Rt(this,n);n>e;e++)i[e]=h?l(a[e],e):a[e];return i},zt=function(){for(var t=0,e=arguments.length,n=Rt(this,e);e>t;)n[t]=arguments[t++];return n},jt=!!H&&o((function(){mt.call(new H(1))})),It=function(){return mt.apply(jt?pt.call(Lt(this)):Lt(this),arguments)},Dt={copyWithin:function(t,e){return D.call(Lt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return et(Lt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return I.apply(Lt(this),arguments)},filter:function(t){return Mt(this,Z(Lt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return nt(Lt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return rt(Lt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Q(Lt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return ot(Lt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return it(Lt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ft.apply(Lt(this),arguments)},lastIndexOf:function(t){return ct.apply(Lt(this),arguments)},map:function(t){return Nt(Lt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(Lt(this),arguments)},reduceRight:function(t){return ht.apply(Lt(this),arguments)},reverse:function(){for(var t,e=this,n=Lt(e).length,r=Math.floor(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e},some:function(t){return tt(Lt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return dt.call(Lt(this),t)},subarray:function(t,e){var n=Lt(this),r=n.length,i=g(t,r);return new(C(n,n[xt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,v((void 0===e?r:g(e,r))-i))}},Ft=function(t,e){return Mt(this,pt.call(Lt(this),t,e))},Vt=function(t){Lt(this);var e=Et(arguments[1],1),n=this.length,r=S(t),i=v(r.length),o=0;if(i+e>n)throw J(Tt);for(;o<i;)this[e+o]=r[o++]},Ut={entries:function(){return ut.call(Lt(this))},keys:function(){return at.call(Lt(this))},values:function(){return st.call(Lt(this))}},Bt=function(t,e){return w(t)&&t[St]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Jt=function(t,e){return Bt(t,e=y(e,!0))?h(2,t[e]):B(t,e)},Gt=function(t,e,n){return!(Bt(t,e=y(e,!0))&&w(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?U(t,e,n):(t[e]=n.value,t)};wt||(V.f=Jt,F.f=Gt),s(s.S+s.F*!wt,"Object",{getOwnPropertyDescriptor:Jt,defineProperty:Gt}),o((function(){vt.call({})}))&&(vt=mt=function(){return ft.call(this)});var Ht=d({},Dt);d(Ht,Ut),f(Ht,gt,Ut.values),d(Ht,{slice:Ft,set:Vt,constructor:function(){},toString:vt,toLocaleString:It}),At(Ht,"buffer","b"),At(Ht,"byteOffset","o"),At(Ht,"byteLength","l"),At(Ht,"length","e"),U(Ht,yt,{get:function(){return this[St]}}),t.exports=function(t,e,n,u){var c=t+((u=!!u)?"Clamped":"")+"Array",h="get"+t,d="set"+t,p=i[c],g=p||{},y=p&&N(p),b=!p||!a.ABV,S={},O=p&&p.prototype,P=function(t,n){U(t,n,{get:function(){return function(t,n){var r=t._d;return r.v[h](n*e+r.o,_t)}(this,n)},set:function(t){return function(t,n,r){var i=t._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[d](n*e+i.o,r,_t)}(this,n,t)},enumerable:!0})};b?(p=n((function(t,n,r,i){l(t,p,c,"_d");var o,s,a,u,h=0,d=0;if(w(n)){if(!(n instanceof K||(u=x(n))==W||u==q))return St in n?Ct(p,n):kt.call(p,n);o=n,d=Et(r,e);var g=n.byteLength;if(void 0===i){if(g%e)throw J(Tt);if((s=g-d)<0)throw J(Tt)}else if((s=v(i)*e)+d>g)throw J(Tt);a=s/e}else a=m(n),o=new K(s=a*e);for(f(t,"_d",{b:o,o:d,l:s,e:a,v:new $(o)});h<a;)P(t,h++)})),O=p.prototype=T(Ht),f(O,"constructor",p)):o((function(){p(1)}))&&o((function(){new p(-1)}))&&z((function(t){new p,new p(null),new p(1.5),new p(t)}),!0)||(p=n((function(t,n,r,i){var o;return l(t,p,c),w(n)?n instanceof K||(o=x(n))==W||o==q?void 0!==i?new g(n,Et(r,e),i):void 0!==r?new g(n,Et(r,e)):new g(n):St in n?Ct(p,n):kt.call(p,n):new g(m(n))})),Q(y!==Function.prototype?_(g).concat(_(y)):_(g),(function(t){t in p||f(p,t,g[t])})),p.prototype=O,r||(O.constructor=p));var E=O[gt],L=!!E&&("values"==E.name||null==E.name),R=Ut.values;f(p,bt,!0),f(O,St,c),f(O,Ot,!0),f(O,xt,p),(u?new p(1)[yt]==c:yt in O)||U(O,yt,{get:function(){return c}}),S[c]=p,s(s.G+s.W+s.F*(p!=g),S),s(s.S,c,{BYTES_PER_ELEMENT:e}),s(s.S+s.F*o((function(){g.of.call(p,1)})),c,{from:kt,of:zt}),X in O||f(O,X,e),s(s.P,c,Dt),j(c),s(s.P+s.F*Pt,c,{set:Vt}),s(s.P+s.F*!L,c,Ut),r||O.toString==vt||(O.toString=vt),s(s.P+s.F*o((function(){new p(1).slice()})),c,{slice:Ft}),s(s.P+s.F*(o((function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()}))||!o((function(){O.toLocaleString.call([1,2])}))),c,{toLocaleString:It}),k[c]=L?E:R,r||L||f(O,gt,R)}}else t.exports=function(){}},1125:(t,e,n)=>{"use strict";var r=n(3816),i=n(7057),o=n(4461),s=n(9383),a=n(7728),u=n(4408),c=n(4253),l=n(3328),h=n(1467),f=n(875),d=n(4843),p=n(616).f,v=n(9275).f,m=n(6852),g=n(2943),y="ArrayBuffer",b="DataView",x="Wrong index!",w=r.ArrayBuffer,S=r.DataView,O=r.Math,T=r.RangeError,N=r.Infinity,_=w,P=O.abs,E=O.pow,L=O.floor,R=O.log,M=O.LN2,C="buffer",A="byteLength",k="byteOffset",z=i?"_b":C,j=i?"_l":A,I=i?"_o":k;function D(t,e,n){var r,i,o,s=new Array(n),a=8*n-e-1,u=(1<<a)-1,c=u>>1,l=23===e?E(2,-24)-E(2,-77):0,h=0,f=t<0||0===t&&1/t<0?1:0;for((t=P(t))!=t||t===N?(i=t!=t?1:0,r=u):(r=L(R(t)/M),t*(o=E(2,-r))<1&&(r--,o*=2),(t+=r+c>=1?l/o:l*E(2,1-c))*o>=2&&(r++,o/=2),r+c>=u?(i=0,r=u):r+c>=1?(i=(t*o-1)*E(2,e),r+=c):(i=t*E(2,c-1)*E(2,e),r=0));e>=8;s[h++]=255&i,i/=256,e-=8);for(r=r<<e|i,a+=e;a>0;s[h++]=255&r,r/=256,a-=8);return s[--h]|=128*f,s}function F(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,s=o>>1,a=i-7,u=n-1,c=t[u--],l=127&c;for(c>>=7;a>0;l=256*l+t[u],u--,a-=8);for(r=l&(1<<-a)-1,l>>=-a,a+=e;a>0;r=256*r+t[u],u--,a-=8);if(0===l)l=1-s;else{if(l===o)return r?NaN:c?-N:N;r+=E(2,e),l-=s}return(c?-1:1)*r*E(2,l-e)}function V(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function U(t){return[255&t]}function B(t){return[255&t,t>>8&255]}function J(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function G(t){return D(t,52,8)}function H(t){return D(t,23,4)}function W(t,e,n){v(t.prototype,e,{get:function(){return this[n]}})}function q(t,e,n,r){var i=d(+n);if(i+e>t[j])throw T(x);var o=t[z]._b,s=i+t[I],a=o.slice(s,s+e);return r?a:a.reverse()}function X(t,e,n,r,i,o){var s=d(+n);if(s+e>t[j])throw T(x);for(var a=t[z]._b,u=s+t[I],c=r(+i),l=0;l<e;l++)a[u+l]=c[o?l:e-l-1]}if(s.ABV){if(!c((function(){w(1)}))||!c((function(){new w(-1)}))||c((function(){return new w,new w(1.5),new w(NaN),w.name!=y}))){for(var Y,K=(w=function(t){return l(this,w),new _(d(t))}).prototype=_.prototype,$=p(_),Q=0;$.length>Q;)(Y=$[Q++])in w||a(w,Y,_[Y]);o||(K.constructor=w)}var Z=new S(new w(2)),tt=S.prototype.setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||u(S.prototype,{setInt8:function(t,e){tt.call(this,t,e<<24>>24)},setUint8:function(t,e){tt.call(this,t,e<<24>>24)}},!0)}else w=function(t){l(this,w,y);var e=d(t);this._b=m.call(new Array(e),0),this[j]=e},S=function(t,e,n){l(this,S,b),l(t,w,b);var r=t[j],i=h(e);if(i<0||i>r)throw T("Wrong offset!");if(i+(n=void 0===n?r-i:f(n))>r)throw T("Wrong length!");this[z]=t,this[I]=i,this[j]=n},i&&(W(w,A,"_l"),W(S,C,"_b"),W(S,A,"_l"),W(S,k,"_o")),u(S.prototype,{getInt8:function(t){return q(this,1,t)[0]<<24>>24},getUint8:function(t){return q(this,1,t)[0]},getInt16:function(t){var e=q(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=q(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return V(q(this,4,t,arguments[1]))},getUint32:function(t){return V(q(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return F(q(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return F(q(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){X(this,1,t,U,e)},setUint8:function(t,e){X(this,1,t,U,e)},setInt16:function(t,e){X(this,2,t,B,e,arguments[2])},setUint16:function(t,e){X(this,2,t,B,e,arguments[2])},setInt32:function(t,e){X(this,4,t,J,e,arguments[2])},setUint32:function(t,e){X(this,4,t,J,e,arguments[2])},setFloat32:function(t,e){X(this,4,t,H,e,arguments[2])},setFloat64:function(t,e){X(this,8,t,G,e,arguments[2])}});g(w,y),g(S,b),a(S.prototype,s.VIEW,!0),e.ArrayBuffer=w,e.DataView=S},9383:(t,e,n)=>{for(var r,i=n(3816),o=n(7728),s=n(3953),a=s("typed_array"),u=s("view"),c=!(!i.ArrayBuffer||!i.DataView),l=c,h=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(r=i[f[h++]])?(o(r.prototype,a,!0),o(r.prototype,u,!0)):l=!1;t.exports={ABV:c,CONSTR:l,TYPED:a,VIEW:u}},3953:t=>{var e=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+n).toString(36))}},575:(t,e,n)=>{var r=n(3816).navigator;t.exports=r&&r.userAgent||""},6074:(t,e,n)=>{var r=n(3816),i=n(5645),o=n(4461),s=n(8787),a=n(9275).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},8787:(t,e,n)=>{e.f=n(6314)},6314:(t,e,n)=>{var r=n(3825)("wks"),i=n(3953),o=n(3816).Symbol,s="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=s&&o[t]||(s?o:i)("Symbol."+t))}).store=r},9002:(t,e,n)=>{var r=n(1488),i=n(6314)("iterator"),o=n(2803);t.exports=n(5645).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},8837:(t,e,n)=>{"use strict";var r=n(2985),i=n(50)(2);r(r.P+r.F*!n(7717)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},4336:(t,e,n)=>{"use strict";var r=n(2985),i=n(50)(0),o=n(7717)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},522:(t,e,n)=>{"use strict";var r=n(741),i=n(2985),o=n(508),s=n(8851),a=n(6555),u=n(875),c=n(2811),l=n(9002);i(i.S+i.F*!n(7462)((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,i,h,f=o(t),d="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,m=void 0!==v,g=0,y=l(f);if(m&&(v=r(v,p>2?arguments[2]:void 0,2)),null==y||d==Array&&a(y))for(n=new d(e=u(f.length));e>g;g++)c(n,g,m?v(f[g],g):f[g]);else for(h=y.call(f),n=new d;!(i=h.next()).done;g++)c(n,g,m?s(h,v,[i.value,g],!0):i.value);return n.length=g,n}})},3369:(t,e,n)=>{"use strict";var r=n(2985),i=n(9315)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(s||!n(7717)(o)),"Array",{indexOf:function(t){return s?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},774:(t,e,n)=>{var r=n(2985);r(r.S,"Array",{isArray:n(4302)})},6997:(t,e,n)=>{"use strict";var r=n(7722),i=n(5436),o=n(2803),s=n(2110);t.exports=n(2923)(Array,"Array",(function(t,e){this._t=s(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},9371:(t,e,n)=>{"use strict";var r=n(2985),i=n(50)(1);r(r.P+r.F*!n(7717)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},3057:(t,e,n)=>{"use strict";var r=n(2985),i=n(7628);r(r.P+r.F*!n(7717)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},110:(t,e,n)=>{"use strict";var r=n(2985),i=n(639),o=n(2032),s=n(2337),a=n(875),u=[].slice;r(r.P+r.F*n(4253)((function(){i&&u.call(i)})),"Array",{slice:function(t,e){var n=a(this.length),r=o(this);if(e=void 0===e?n:e,"Array"==r)return u.call(this,t,e);for(var i=s(t,n),c=s(e,n),l=a(c-i),h=new Array(l),f=0;f<l;f++)h[f]="String"==r?this.charAt(i+f):this[i+f];return h}})},75:(t,e,n)=>{"use strict";var r=n(2985),i=n(4963),o=n(508),s=n(4253),a=[].sort,u=[1,2,3];r(r.P+r.F*(s((function(){u.sort(void 0)}))||!s((function(){u.sort(null)}))||!n(7717)(a)),"Array",{sort:function(t){return void 0===t?a.call(o(this)):a.call(o(this),i(t))}})},1822:(t,e,n)=>{var r=n(2985);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},6331:(t,e,n)=>{var r=Date.prototype,i="Invalid Date",o="toString",s=r.toString,a=r.getTime;new Date(NaN)+""!=i&&n(7234)(r,o,(function(){var t=a.call(this);return t==t?s.call(this):i}))},6059:(t,e,n)=>{var r=n(9275).f,i=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in i||n(7057)&&r(i,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},8472:(t,e,n)=>{var r=n(2985);r(r.S,"Math",{sign:n(1801)})},1246:(t,e,n)=>{"use strict";var r=n(3816),i=n(9181),o=n(2032),s=n(266),a=n(1689),u=n(4253),c=n(616).f,l=n(8693).f,h=n(9275).f,f=n(9599).trim,d="Number",p=r.Number,v=p,m=p.prototype,g=o(n(2503)(m))==d,y="trim"in String.prototype,b=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,o=(e=y?e.trim():f(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var s,u=e.slice(2),c=0,l=u.length;c<l;c++)if((s=u.charCodeAt(c))<48||s>i)return NaN;return parseInt(u,r)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof p&&(g?u((function(){m.valueOf.call(n)})):o(n)!=d)?s(new v(b(e)),n,p):b(e)};for(var x,w=n(7057)?c(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;w.length>S;S++)i(v,x=w[S])&&!i(p,x)&&h(p,x,l(v,x));p.prototype=m,m.constructor=p,n(7234)(r,d,p)}},5115:(t,e,n)=>{var r=n(2985);r(r.S+r.F,"Object",{assign:n(5345)})},8132:(t,e,n)=>{var r=n(2985);r(r.S,"Object",{create:n(2503)})},7470:(t,e,n)=>{var r=n(2985);r(r.S+r.F*!n(7057),"Object",{defineProperties:n(5588)})},8388:(t,e,n)=>{var r=n(2985);r(r.S+r.F*!n(7057),"Object",{defineProperty:n(9275).f})},4882:(t,e,n)=>{var r=n(2110),i=n(8693).f;n(3160)("getOwnPropertyDescriptor",(function(){return function(t,e){return i(r(t),e)}}))},1520:(t,e,n)=>{var r=n(508),i=n(468);n(3160)("getPrototypeOf",(function(){return function(t){return i(r(t))}}))},7476:(t,e,n)=>{var r=n(508),i=n(7184);n(3160)("keys",(function(){return function(t){return i(r(t))}}))},8838:(t,e,n)=>{var r=n(2985);r(r.S,"Object",{setPrototypeOf:n(7375).set})},6253:(t,e,n)=>{"use strict";var r=n(1488),i={};i[n(6314)("toStringTag")]="z",i+""!="[object z]"&&n(7234)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},851:(t,e,n)=>{"use strict";var r,i,o,s,a=n(4461),u=n(3816),c=n(741),l=n(1488),h=n(2985),f=n(5286),d=n(4963),p=n(3328),v=n(3531),m=n(8364),g=n(4193).set,y=n(4351)(),b=n(3499),x=n(188),w=n(575),S=n(94),O="Promise",T=u.TypeError,N=u.process,_=N&&N.versions,P=_&&_.v8||"",E=u.Promise,L="process"==l(N),R=function(){},M=i=b.f,C=!!function(){try{var t=E.resolve(1),e=(t.constructor={})[n(6314)("species")]=function(t){t(R,R)};return(L||"function"==typeof PromiseRejectionEvent)&&t.then(R)instanceof e&&0!==P.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(t){}}(),A=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},k=function(t,e){if(!t._n){t._n=!0;var n=t._c;y((function(){for(var r=t._v,i=1==t._s,o=0,s=function(e){var n,o,s,a=i?e.ok:e.fail,u=e.resolve,c=e.reject,l=e.domain;try{a?(i||(2==t._h&&I(t),t._h=1),!0===a?n=r:(l&&l.enter(),n=a(r),l&&(l.exit(),s=!0)),n===e.promise?c(T("Promise-chain cycle")):(o=A(n))?o.call(n,u,c):u(n)):c(r)}catch(t){l&&!s&&l.exit(),c(t)}};n.length>o;)s(n[o++]);t._c=[],t._n=!1,e&&!t._h&&z(t)}))}},z=function(t){g.call(u,(function(){var e,n,r,i=t._v,o=j(t);if(o&&(e=x((function(){L?N.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)})),t._h=L||j(t)?2:1),t._a=void 0,o&&e.e)throw e.v}))},j=function(t){return 1!==t._h&&0===(t._a||t._c).length},I=function(t){g.call(u,(function(){var e;L?N.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})}))},D=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),k(e,!0))},F=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw T("Promise can't be resolved itself");(e=A(t))?y((function(){var r={_w:n,_d:!1};try{e.call(t,c(F,r,1),c(D,r,1))}catch(t){D.call(r,t)}})):(n._v=t,n._s=1,k(n,!1))}catch(t){D.call({_w:n,_d:!1},t)}}};C||(E=function(t){p(this,E,O,"_h"),d(t),r.call(this);try{t(c(F,this,1),c(D,this,1))}catch(t){D.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(4408)(E.prototype,{then:function(t,e){var n=M(m(this,E));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=L?N.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&k(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=c(F,t,1),this.reject=c(D,t,1)},b.f=M=function(t){return t===E||t===s?new o(t):i(t)}),h(h.G+h.W+h.F*!C,{Promise:E}),n(2943)(E,O),n(2974)(O),s=n(5645).Promise,h(h.S+h.F*!C,O,{reject:function(t){var e=M(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(a||!C),O,{resolve:function(t){return S(a&&this===s?E:this,t)}}),h(h.S+h.F*!(C&&n(7462)((function(t){E.all(t).catch(R)}))),O,{all:function(t){var e=this,n=M(e),r=n.resolve,i=n.reject,o=x((function(){var n=[],o=0,s=1;v(t,!1,(function(t){var a=o++,u=!1;n.push(void 0),s++,e.resolve(t).then((function(t){u||(u=!0,n[a]=t,--s||r(n))}),i)})),--s||r(n)}));return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=M(e),r=n.reject,i=x((function(){v(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},2139:(t,e,n)=>{var r=n(2985),i=n(2503),o=n(4963),s=n(7007),a=n(5286),u=n(4253),c=n(4398),l=(n(3816).Reflect||{}).construct,h=u((function(){function t(){}return!(l((function(){}),[],t)instanceof t)})),f=!u((function(){l((function(){}))}));r(r.S+r.F*(h||f),"Reflect",{construct:function(t,e){o(t),s(e);var n=arguments.length<3?t:o(arguments[2]);if(f&&!h)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var u=n.prototype,d=i(a(u)?u:Object.prototype),p=Function.apply.call(t,d,e);return a(p)?p:d}})},3049:(t,e,n)=>{var r=n(8693),i=n(468),o=n(9181),s=n(2985),a=n(5286),u=n(7007);s(s.S,"Reflect",{get:function t(e,n){var s,c,l=arguments.length<3?e:arguments[2];return u(e)===l?e[n]:(s=r.f(e,n))?o(s,"value")?s.value:void 0!==s.get?s.get.call(l):void 0:a(c=i(e))?t(c,n,l):void 0}})},3946:(t,e,n)=>{var r=n(3816),i=n(266),o=n(9275).f,s=n(616).f,a=n(5364),u=n(3218),c=r.RegExp,l=c,h=c.prototype,f=/a/g,d=/a/g,p=new c(f)!==f;if(n(7057)&&(!p||n(4253)((function(){return d[n(6314)("match")]=!1,c(f)!=f||c(d)==d||"/a/i"!=c(f,"i")})))){c=function(t,e){var n=this instanceof c,r=a(t),o=void 0===e;return!n&&r&&t.constructor===c&&o?t:i(p?new l(r&&!o?t.source:t,e):l((r=t instanceof c)?t.source:t,r&&o?u.call(t):e),n?this:h,c)};for(var v=function(t){t in c||o(c,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},m=s(l),g=0;m.length>g;)v(m[g++]);h.constructor=c,c.prototype=h,n(7234)(r,"RegExp",c)}n(2974)("RegExp")},8269:(t,e,n)=>{"use strict";var r=n(1165);n(2985)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},6774:(t,e,n)=>{n(7057)&&"g"!=/./g.flags&&n(9275).f(RegExp.prototype,"flags",{configurable:!0,get:n(3218)})},1466:(t,e,n)=>{"use strict";var r=n(7007),i=n(875),o=n(6793),s=n(7787);n(8082)("match",1,(function(t,e,n,a){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=a(n,t,this);if(e.done)return e.value;var u=r(t),c=String(this);if(!u.global)return s(u,c);var l=u.unicode;u.lastIndex=0;for(var h,f=[],d=0;null!==(h=s(u,c));){var p=String(h[0]);f[d]=p,""===p&&(u.lastIndex=o(c,i(u.lastIndex),l)),d++}return 0===d?null:f}]}))},9357:(t,e,n)=>{"use strict";var r=n(7007),i=n(508),o=n(875),s=n(1467),a=n(6793),u=n(7787),c=Math.max,l=Math.min,h=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g;n(8082)("replace",2,(function(t,e,n,p){return[function(r,i){var o=t(this),s=null==r?void 0:r[e];return void 0!==s?s.call(r,o,i):n.call(String(o),r,i)},function(t,e){var i=p(n,t,this,e);if(i.done)return i.value;var h=r(t),f=String(this),d="function"==typeof e;d||(e=String(e));var m=h.global;if(m){var g=h.unicode;h.lastIndex=0}for(var y=[];;){var b=u(h,f);if(null===b)break;if(y.push(b),!m)break;""===String(b[0])&&(h.lastIndex=a(f,o(h.lastIndex),g))}for(var x,w="",S=0,O=0;O<y.length;O++){b=y[O];for(var T=String(b[0]),N=c(l(s(b.index),f.length),0),_=[],P=1;P<b.length;P++)_.push(void 0===(x=b[P])?x:String(x));var E=b.groups;if(d){var L=[T].concat(_,N,f);void 0!==E&&L.push(E);var R=String(e.apply(void 0,L))}else R=v(T,f,N,_,E,e);N>=S&&(w+=f.slice(S,N)+R,S=N+T.length)}return w+f.slice(S)}];function v(t,e,r,o,s,a){var u=r+t.length,c=o.length,l=d;return void 0!==s&&(s=i(s),l=f),n.call(a,l,(function(n,i){var a;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(u);case"<":a=s[i.slice(1,-1)];break;default:var l=+i;if(0===l)return n;if(l>c){var f=h(l/10);return 0===f?n:f<=c?void 0===o[f-1]?i.charAt(1):o[f-1]+i.charAt(1):n}a=o[l-1]}return void 0===a?"":a}))}}))},6142:(t,e,n)=>{"use strict";var r=n(7007),i=n(7195),o=n(7787);n(8082)("search",1,(function(t,e,n,s){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=s(n,t,this);if(e.done)return e.value;var a=r(t),u=String(this),c=a.lastIndex;i(c,0)||(a.lastIndex=0);var l=o(a,u);return i(a.lastIndex,c)||(a.lastIndex=c),null===l?-1:l.index}]}))},1876:(t,e,n)=>{"use strict";var r=n(5364),i=n(7007),o=n(8364),s=n(6793),a=n(875),u=n(7787),c=n(1165),l=n(4253),h=Math.min,f=[].push,d=4294967295,p=!l((function(){RegExp(d,"y")}));n(8082)("split",2,(function(t,e,n,l){var v;return v="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(i,t,e);for(var o,s,a,u=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,p=void 0===e?d:e>>>0,v=new RegExp(t.source,l+"g");(o=c.call(v,i))&&!((s=v.lastIndex)>h&&(u.push(i.slice(h,o.index)),o.length>1&&o.index<i.length&&f.apply(u,o.slice(1)),a=o[0].length,h=s,u.length>=p));)v.lastIndex===o.index&&v.lastIndex++;return h===i.length?!a&&v.test("")||u.push(""):u.push(i.slice(h)),u.length>p?u.slice(0,p):u}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var i=t(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):v.call(String(i),n,r)},function(t,e){var r=l(v,t,this,e,v!==n);if(r.done)return r.value;var c=i(t),f=String(this),m=o(c,RegExp),g=c.unicode,y=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(p?"y":"g"),b=new m(p?c:"^(?:"+c.source+")",y),x=void 0===e?d:e>>>0;if(0===x)return[];if(0===f.length)return null===u(b,f)?[f]:[];for(var w=0,S=0,O=[];S<f.length;){b.lastIndex=p?S:0;var T,N=u(b,p?f:f.slice(S));if(null===N||(T=h(a(b.lastIndex+(p?0:S)),f.length))===w)S=s(f,S,g);else{if(O.push(f.slice(w,S)),O.length===x)return O;for(var _=1;_<=N.length-1;_++)if(O.push(N[_]),O.length===x)return O;S=w=T}}return O.push(f.slice(w)),O}]}))},6108:(t,e,n)=>{"use strict";n(6774);var r=n(7007),i=n(3218),o=n(7057),s="toString",a=/./.toString,u=function(t){n(7234)(RegExp.prototype,s,t,!0)};n(4253)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?u((function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)})):a.name!=s&&u((function(){return a.call(this)}))},2850:(t,e,n)=>{"use strict";var r=n(2985),i=n(2094),o="includes";r(r.P+r.F*n(8852)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},9115:(t,e,n)=>{"use strict";var r=n(4496)(!0);n(2923)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},823:(t,e,n)=>{var r=n(2985);r(r.P,"String",{repeat:n(8595)})},5767:(t,e,n)=>{"use strict";var r=n(3816),i=n(9181),o=n(7057),s=n(2985),a=n(7234),u=n(4728).KEY,c=n(4253),l=n(3825),h=n(2943),f=n(3953),d=n(6314),p=n(8787),v=n(6074),m=n(5541),g=n(4302),y=n(7007),b=n(5286),x=n(508),w=n(2110),S=n(1689),O=n(681),T=n(2503),N=n(9327),_=n(8693),P=n(4548),E=n(9275),L=n(7184),R=_.f,M=E.f,C=N.f,A=r.Symbol,k=r.JSON,z=k&&k.stringify,j=d("_hidden"),I=d("toPrimitive"),D={}.propertyIsEnumerable,F=l("symbol-registry"),V=l("symbols"),U=l("op-symbols"),B=Object.prototype,J="function"==typeof A&&!!P.f,G=r.QObject,H=!G||!G.prototype||!G.prototype.findChild,W=o&&c((function(){return 7!=T(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=R(B,e);r&&delete B[e],M(t,e,n),r&&t!==B&&M(B,e,r)}:M,q=function(t){var e=V[t]=T(A.prototype);return e._k=t,e},X=J&&"symbol"==typeof A.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof A},Y=function(t,e,n){return t===B&&Y(U,e,n),y(t),e=S(e,!0),y(n),i(V,e)?(n.enumerable?(i(t,j)&&t[j][e]&&(t[j][e]=!1),n=T(n,{enumerable:O(0,!1)})):(i(t,j)||M(t,j,O(1,{})),t[j][e]=!0),W(t,e,n)):M(t,e,n)},K=function(t,e){y(t);for(var n,r=m(e=w(e)),i=0,o=r.length;o>i;)Y(t,n=r[i++],e[n]);return t},$=function(t){var e=D.call(this,t=S(t,!0));return!(this===B&&i(V,t)&&!i(U,t))&&(!(e||!i(this,t)||!i(V,t)||i(this,j)&&this[j][t])||e)},Q=function(t,e){if(t=w(t),e=S(e,!0),t!==B||!i(V,e)||i(U,e)){var n=R(t,e);return!n||!i(V,e)||i(t,j)&&t[j][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=C(w(t)),r=[],o=0;n.length>o;)i(V,e=n[o++])||e==j||e==u||r.push(e);return r},tt=function(t){for(var e,n=t===B,r=C(n?U:w(t)),o=[],s=0;r.length>s;)!i(V,e=r[s++])||n&&!i(B,e)||o.push(V[e]);return o};J||(a((A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===B&&e.call(U,n),i(this,j)&&i(this[j],t)&&(this[j][t]=!1),W(this,t,O(1,n))};return o&&H&&W(B,t,{configurable:!0,set:e}),q(t)}).prototype,"toString",(function(){return this._k})),_.f=Q,E.f=Y,n(616).f=N.f=Z,n(4682).f=$,P.f=tt,o&&!n(4461)&&a(B,"propertyIsEnumerable",$,!0),p.f=function(t){return q(d(t))}),s(s.G+s.W+s.F*!J,{Symbol:A});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)d(et[nt++]);for(var rt=L(d.store),it=0;rt.length>it;)v(rt[it++]);s(s.S+s.F*!J,"Symbol",{for:function(t){return i(F,t+="")?F[t]:F[t]=A(t)},keyFor:function(t){if(!X(t))throw TypeError(t+" is not a symbol!");for(var e in F)if(F[e]===t)return e},useSetter:function(){H=!0},useSimple:function(){H=!1}}),s(s.S+s.F*!J,"Object",{create:function(t,e){return void 0===e?T(t):K(T(t),e)},defineProperty:Y,defineProperties:K,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt});var ot=c((function(){P.f(1)}));s(s.S+s.F*ot,"Object",{getOwnPropertySymbols:function(t){return P.f(x(t))}}),k&&s(s.S+s.F*(!J||c((function(){var t=A();return"[null]"!=z([t])||"{}"!=z({a:t})||"{}"!=z(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(b(e)||void 0!==t)&&!X(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!X(e))return e}),r[1]=e,z.apply(k,r)}}),A.prototype[I]||n(7728)(A.prototype,I,A.prototype.valueOf),h(A,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},162:(t,e,n)=>{n(8440)("Float32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},2773:(t,e,n)=>{"use strict";var r=n(2985),i=n(9315)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(7722)("includes")},3276:(t,e,n)=>{var r=n(2985),i=n(1131)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},8351:(t,e,n)=>{var r=n(2985),i=n(7643),o=n(2110),s=n(8693),a=n(2811);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=o(t),u=s.f,c=i(r),l={},h=0;c.length>h;)void 0!==(n=u(r,e=c[h++]))&&a(l,e,n);return l}})},6409:(t,e,n)=>{var r=n(2985),i=n(1131)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},1181:(t,e,n)=>{for(var r=n(6997),i=n(7184),o=n(7234),s=n(3816),a=n(7728),u=n(2803),c=n(6314),l=c("iterator"),h=c("toStringTag"),f=u.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(d),v=0;v<p.length;v++){var m,g=p[v],y=d[g],b=s[g],x=b&&b.prototype;if(x&&(x[l]||a(x,l,f),x[h]||a(x,h,g),u[g]=f,y))for(m in r)x[m]||o(x,m,r[m],!0)}},5666:t=>{var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,o=Object.create(i.prototype),s=new E(r||[]);return o._invoke=function(t,e,n){var r=h;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return R()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=N(s,n);if(a){if(a===v)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(t,e,n);if("normal"===u.type){if(r=n.done?p:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(t,n,s),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",v={};function m(){}function g(){}function y(){}var b={};u(b,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(L([])));w&&w!==n&&r.call(w,o)&&(b=w);var S=y.prototype=m.prototype=Object.create(b);function O(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(i,o,s,a){var u=l(t[i],t,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(h).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,a)}))}a(u.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function N(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,N(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function L(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}return{next:R}}function R(){return{value:e,done:!0}}return g.prototype=y,u(S,"constructor",y),u(y,"constructor",g),g.displayName=u(y,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,a,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},O(T.prototype),u(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var s=new T(c(e,n,r,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},O(S),u(S,a,"Generator"),u(S,o,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=L,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}(()=>{"use strict";n(5666),n(9115),n(6253),n(6997),n(1181),n(851),n(8388);function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var e=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};t(e,"STATE_CHANGE","state_change"),t(e,"KEY_DOWN","key_down"),t(e,"KEY_UP","key_up"),t(e,"KEY_PRESS","key_press"),t(e,"RESIZE","resize"),t(e,"VISIBILITY","visibility"),t(e,"PROGRESS","progress"),t(e,"COMPLETE","complete"),t(e,"UPDATE","update"),t(e,"HOVER","hover"),t(e,"CLICK","click");n(6059),n(3369),n(8837),n(5767),n(3057),n(7476),n(2850),n(2773);function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"add",value:function(t,e){this.cache&&(this.files[t]=e)}},{key:"get",value:function(t){if(this.cache)return this.files[t]}},{key:"remove",value:function(t){delete this.files[t]}},{key:"clear",value:function(){this.files={}}},{key:"filter",value:function(t){var e=this;return Object.keys(this.files).filter(t).reduce((function(t,n){return t[n]=e.files[n],t}),{})}},{key:"getPath",value:function(t){return t.includes("//")||this.path&&!t.includes(this.path)&&(t=this.path+t),t}},{key:"loadImage",value:function(t,e){var n=new Image;n.crossOrigin=this.crossOrigin,n.src=this.getPath(t);var r=new Promise((function(t,e){n.onload=function(){t(n),n.onload=null},n.onerror=function(t){e(t),n.onerror=null}}));return e&&r.then(e),r}}],(n=null)&&r(e.prototype,n),i&&r(e,i),t}();i(o,"path",""),i(o,"crossOrigin",void 0),i(o,"options",void 0),i(o,"cache",!1),i(o,"files",{});n(110);function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.callbacks={}}var e,n,r;return e=t,n=[{key:"on",value:function(t,e){this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e)}},{key:"off",value:function(t,e){if(this.callbacks[t])if(e){var n=this.callbacks[t].indexOf(e);~n&&this.callbacks[t].splice(n,1)}else delete this.callbacks[t]}},{key:"emit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.callbacks[t])for(var n=this.callbacks[t].slice(),r=0,i=n.length;r<i;r++)n[r].call(this,e)}},{key:"destroy",value:function(){for(var t in this)this[t]=null;return null}}],n&&s(e.prototype,n),r&&s(e,r),t}(),u=(n(5115),n(162),.1),c="function"==typeof Float32Array;function l(t,e){return 1-3*e+3*t}function h(t,e){return 3*e-6*t}function f(t){return 3*t}function d(t,e,n){return((l(e,n)*t+h(e,n))*t+f(e))*t}function p(t,e,n){return 3*l(e,n)*t*t+2*h(e,n)*t+f(e)}function v(t){return t}function m(t,e,n,r){if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("Bezier x values must be in [0, 1] range");if(t===e&&n===r)return v;for(var i=c?new Float32Array(11):new Array(11),o=0;o<11;o++)i[o]=d(o*u,t,n);function s(e){for(var r=0,o=1;10!==o&&i[o]<=e;o++)r+=u;o--;var s=r+(e-i[o])/(i[o+1]-i[o])*u,a=p(s,t,n);return a>=.001?function(t,e,n,r){for(var i=0;i<4;i++){var o=p(e,n,r);if(0===o)return e;e-=(d(e,n,r)-t)/o}return e}(e,s,t,n):0===a?s:function(t,e,n,r,i){var o,s,a=0;do{(o=d(s=e+(n-e)/2,r,i)-t)>0?n=s:e=s}while(Math.abs(o)>1e-7&&++a<10);return s}(e,r,r+u,t,n)}return function(t){return 0===t||1===t?t:d(s(t),e,r)}}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var y,b,x=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"linear",value:function(t){return t}},{key:"easeInQuad",value:function(t){return t*t}},{key:"easeOutQuad",value:function(t){return t*(2-t)}},{key:"easeInOutQuad",value:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},{key:"easeInCubic",value:function(t){return t*t*t}},{key:"easeOutCubic",value:function(t){return--t*t*t+1}},{key:"easeInOutCubic",value:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},{key:"easeInQuart",value:function(t){return t*t*t*t}},{key:"easeOutQuart",value:function(t){return 1- --t*t*t*t}},{key:"easeInOutQuart",value:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},{key:"easeInQuint",value:function(t){return t*t*t*t*t}},{key:"easeOutQuint",value:function(t){return--t*t*t*t*t+1}},{key:"easeInOutQuint",value:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},{key:"easeInSine",value:function(t){return 1-Math.sin((1-t)*Math.PI/2)}},{key:"easeOutSine",value:function(t){return Math.sin(t*Math.PI/2)}},{key:"easeInOutSine",value:function(t){return.5*(1-Math.sin(Math.PI*(.5-t)))}},{key:"easeInExpo",value:function(t){return 0===t?0:Math.pow(1024,t-1)}},{key:"easeOutExpo",value:function(t){return 1===t?1:1-Math.pow(2,-10*t)}},{key:"easeInOutExpo",value:function(t){return 0===t||1===t?t:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},{key:"easeInCirc",value:function(t){return 1-Math.sqrt(1-t*t)}},{key:"easeOutCirc",value:function(t){return Math.sqrt(1- --t*t)}},{key:"easeInOutCirc",value:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},{key:"easeInBack",value:function(t){var e=1.70158;return 1===t?1:t*t*((e+1)*t-e)}},{key:"easeOutBack",value:function(t){var e=1.70158;return 0===t?0:--t*t*((e+1)*t+e)+1}},{key:"easeInOutBack",value:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},{key:"easeInElastic",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.3;if(0===t||1===t)return t;var r=2*Math.PI,i=n/r*Math.asin(1/e);return-e*Math.pow(2,10*--t)*Math.sin((t-i)*r/n)}},{key:"easeOutElastic",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.3;if(0===t||1===t)return t;var r=2*Math.PI,i=n/r*Math.asin(1/e);return e*Math.pow(2,-10*t)*Math.sin((t-i)*r/n)+1}},{key:"easeInOutElastic",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.3*1.5;if(0===t||1===t)return t;var r=2*Math.PI,i=n/r*Math.asin(1/e);return(t*=2)<1?e*Math.pow(2,10*--t)*Math.sin((t-i)*r/n)*-.5:e*Math.pow(2,-10*--t)*Math.sin((t-i)*r/n)*.5+1}},{key:"easeInBounce",value:function(t){return 1-this.easeOutBounce(1-t)}},{key:"easeOutBounce",value:function(t){var e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375}},{key:"easeInOutBounce",value:function(t){return t<.5?.5*this.easeInBounce(2*t):.5*this.easeOutBounce(2*t-1)+.5}},{key:"addBezier",value:function(t,e,n,r,i){this[t]=m(e,n,r,i)}}],(n=null)&&g(e.prototype,n),r&&g(e,r),t}();function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}if("undefined"!=typeof window)y=window.requestAnimationFrame,b=window.cancelAnimationFrame;else{var S=performance.now();y=function(t){return setTimeout((function(){return t(performance.now()-S)}),1e3/60)},b=clearTimeout}var O=new(function(){function t(){var e,n,r,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=function(t){i.isAnimating&&(i.requestId=y(i.onTick)),i.delta=Math.min(150,t-i.last),i.last=t,i.time=.001*t,i.frame++;for(var e=i.callbacks.length-1;e>=0;e--){var n=i.callbacks[e];if(n)if(n.fps){var r=t-n.last;if(r<1e3/n.fps)continue;n.last=t,n.frame++,n(i.time,r,n.frame)}else n(i.time,i.delta,i.frame)}},(n="onTick")in(e=this)?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,this.callbacks=[],this.last=performance.now(),this.time=0,this.delta=0,this.frame=0,this.isAnimating=!1,this.start()}var e,n,r;return e=t,(n=[{key:"add",value:function(t,e){e&&(t.fps=e,t.last=performance.now(),t.frame=0),this.callbacks.unshift(t)}},{key:"remove",value:function(t){var e=this.callbacks.indexOf(t);~e&&this.callbacks.splice(e,1)}},{key:"start",value:function(){this.isAnimating||(this.isAnimating=!0,this.requestId=y(this.onTick))}},{key:"stop",value:function(){this.isAnimating&&(this.isAnimating=!1,b(this.requestId))}},{key:"setRequestFrame",value:function(t){y=t}},{key:"setCancelFrame",value:function(t){b=t}}])&&w(e.prototype,n),r&&w(e,r),t}());function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var P=[],E=function(){function t(e,n,r,i){var o=this,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0;for(var c in T(this,t),_(this,"onUpdate",(function(t,e){o.elapsed+=e;var n=Math.max(0,Math.min(1,(o.elapsed-o.delay)/o.duration)),r=o.ease(n,o.spring,o.damping);for(var i in o.from)o.object[i]=o.from[i]+(o.to[i]-o.from[i])*r;o.update&&o.update(),1===n&&(M(o),o.complete&&o.complete())})),"number"!=typeof s&&(u=a,a=s,s=0),this.object=e,this.duration=r,this.elapsed=0,this.ease="function"==typeof i?i:x[i]||x.easeOutCubic,this.delay=s,this.complete=a,this.update=u,this.isAnimating=!1,this.from={},this.to=Object.assign({},n),this.spring=this.to.spring,this.damping=this.to.damping,delete this.to.spring,delete this.to.damping,this.to)"number"==typeof this.to[c]&&"number"==typeof e[c]&&(this.from[c]=e[c]);this.start()}var e,n,r;return e=t,(n=[{key:"start",value:function(){this.isAnimating||(this.isAnimating=!0,O.add(this.onUpdate))}},{key:"stop",value:function(){this.isAnimating&&(this.isAnimating=!1,O.remove(this.onUpdate))}}])&&N(e.prototype,n),r&&N(e,r),t}();function L(t,e){var n=new E(e,null,t,"linear",0,e);return P.push(n),n}function R(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;"number"!=typeof i&&(s=o,o=i,i=0);var a=new Promise((function(o){var a=new E(t,e,n,r,i,o,s);P.push(a)}));return o&&a.then(o),a}function M(t){if(t instanceof E){t.stop();var e=P.indexOf(t);~e&&P.splice(e,1)}else for(var n=P.length-1;n>=0;n--)P[n].object===t&&M(P[n])}function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var z,j=["x","y","z","skewX","skewY","rotation","rotationX","rotationY","rotationZ","scale","scaleX","scaleY","scaleZ"],I=["blur","brightness","contrast","grayscale","hue","invert","saturate","sepia"],D=["opacity","brightness","contrast","saturate","scale"],F=["opacity","zIndex","fontWeight","strokeWidth","strokeDashoffset"],V=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",r=arguments.length>2?arguments[2]:void 0;A(this,t),this.events=new a,this.children=[],this.timeouts=[],this.style={},this.isTransform=!1,this.isFilter=!1,"object"===C(e)&&null!==e?this.element=e:(this.name=e,this.type=n,this.element="svg"===n?document.createElementNS("http://www.w3.org/2000/svg",r||"svg"):document.createElement(n),"string"==typeof e&&("."===e.charAt(0)?this.element.className=e.substr(1):this.element.id=e)),this.element.object=this}var e,n,r;return e=t,n=[{key:"add",value:function(t){if(this.children)return t.destroy&&(this.children.push(t),t.parent=this),t.element?this.element.appendChild(t.element):t.nodeName&&this.element.appendChild(t),t}},{key:"remove",value:function(t){if(this.children){t.element?t.element.parentNode.removeChild(t.element):t.nodeName&&t.parentNode.removeChild(t);var e=this.children.indexOf(t);~e&&this.children.splice(e,1)}}},{key:"clone",value:function(){if(this.element)return new t(this.element.cloneNode(!0))}},{key:"empty",value:function(){if(this.element){for(var t=this.children.length-1;t>=0;t--)this.children[t]&&this.children[t].destroy&&this.children[t].destroy();return this.children.length=0,this.element.innerHTML="",this}}},{key:"attr",value:function(t){if(this.element){for(var e in t)this.element.setAttribute(e,t[e]);return this}}},{key:"css",value:function(t){if(this.element){var e=this.style;for(var n in t)~j.indexOf(n)?(e[n]=t[n],this.isTransform=!0):~I.indexOf(n)?(e[n]=t[n],this.isFilter=!0):this.element.style[n]="string"==typeof t[n]||~F.indexOf(n)?t[n]:t[n]+"px";if(this.isTransform){var r="";if(void 0!==e.x||void 0!==e.y||void 0!==e.z){var i=void 0!==e.x?e.x:0,o=void 0!==e.y?e.y:0,s=void 0!==e.z?e.z:0;r+="translate3d(".concat(i,"px, ").concat(o,"px, ").concat(s,"px)")}void 0!==e.skewX&&(r+="skewX(".concat(e.skewX,"deg)")),void 0!==e.skewY&&(r+="skewY(".concat(e.skewY,"deg)")),void 0!==e.rotation&&(r+="rotate(".concat(e.rotation,"deg)")),void 0!==e.rotationX&&(r+="rotateX(".concat(e.rotationX,"deg)")),void 0!==e.rotationY&&(r+="rotateY(".concat(e.rotationY,"deg)")),void 0!==e.rotationZ&&(r+="rotateZ(".concat(e.rotationZ,"deg)")),void 0!==e.scale&&(r+="scale(".concat(e.scale,")")),void 0!==e.scaleX&&(r+="scaleX(".concat(e.scaleX,")")),void 0!==e.scaleY&&(r+="scaleY(".concat(e.scaleY,")")),void 0!==e.scaleZ&&(r+="scaleZ(".concat(e.scaleZ,")")),this.element.style.transform=r}if(this.isFilter){var a="";void 0!==e.blur&&(a+="blur(".concat(e.blur,"px)")),void 0!==e.brightness&&(a+="brightness(".concat(e.brightness,")")),void 0!==e.contrast&&(a+="contrast(".concat(e.contrast,")")),void 0!==e.grayscale&&(a+="grayscale(".concat(e.grayscale,")")),void 0!==e.hue&&(a+="hue-rotate(".concat(e.hue,"deg)")),void 0!==e.invert&&(a+="invert(".concat(e.invert,")")),void 0!==e.saturate&&(a+="saturate(".concat(e.saturate,")")),void 0!==e.sepia&&(a+="sepia(".concat(e.sepia,")")),this.element.style.filter=a}return this}}},{key:"tween",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;if(this.element){"number"!=typeof i&&(s=o,o=i,i=0);var a=getComputedStyle(this.element);for(var u in t){var c=void 0;~j.indexOf(u)||~I.indexOf(u)?c=void 0!==this.style[u]?this.style[u]:~D.indexOf(u)?1:0:"string"==typeof a[u]&&(c=parseFloat(a[u])),isNaN(c)||(this.style[u]=c)}var l=R(this.style,t,e,n,i,o,(function(){r.css(r.style),s&&s()}));return l}}},{key:"clearTween",value:function(){return M(this.style),this}},{key:"delayedCall",value:function(t,e){var n=this;if(this.timeouts){var r=L(t,(function(){n.clearTimeout(r,!0),e&&e()}));return this.timeouts.push(r),r}}},{key:"clearTimeout",value:function(t,e){if(this.timeouts){e||M(t);var n=this.timeouts.indexOf(t);~n&&this.timeouts.splice(n,1)}}},{key:"clearTimeouts",value:function(){if(this.timeouts)for(var t=this.timeouts.length-1;t>=0;t--)this.clearTimeout(this.timeouts[t])}},{key:"text",value:function(t){if(this.element)return void 0===t?this.element.textContent:(this.element.textContent=t,this)}},{key:"html",value:function(t){if(this.element)return void 0===t?this.element.innerHTML:(this.element.innerHTML=t,this)}},{key:"hide",value:function(){return this.css({display:"none"})}},{key:"show",value:function(){return this.css({display:""})}},{key:"invisible",value:function(){return this.css({visibility:"hidden"})}},{key:"visible",value:function(){return this.css({visibility:""})}},{key:"bg",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"no-repeat";t=o.getPath(t);var i={backgroundImage:"url(".concat(t,")"),backgroundSize:e,backgroundPosition:n,backgroundRepeat:r};return this.css(i)}},{key:"line",value:function(t){var e=this.element.getTotalLength(),n=e*(t||this.progress),r=e-n,i=-e*(this.start+this.offset),o={strokeDasharray:"".concat(n,",").concat(r),strokeDashoffset:i};return this.css(o)}},{key:"load",value:function(t){var e=this;return t=o.getPath(t),fetch(t,o.options).then((function(t){return t.text()})).then((function(t){e.html(t)}))}},{key:"destroy",value:function(){if(this.children){this.parent&&this.parent.remove&&this.parent.remove(this),this.clearTimeouts(),this.clearTween(),this.events.destroy();for(var t=this.children.length-1;t>=0;t--)this.children[t]&&this.children[t].destroy&&this.children[t].destroy();for(var e in this.element.object=null,this)this[e]=null;return null}}}],n&&k(e.prototype,n),r&&k(e,r),t}();if("undefined"!=typeof window){var U=function(t){z.path=location.pathname,z.events.emit(e.STATE_CHANGE,t)},B=function(t){z.width=window.innerWidth,z.height=window.innerHeight,z.dpr=window.devicePixelRatio,z.aspect=z.width/z.height,z.events.emit(e.RESIZE,t)};z=new V(document.getElementById("root")),window.addEventListener("popstate",U),window.addEventListener("keydown",(function(t){z.events.emit(e.KEY_DOWN,t)})),window.addEventListener("keyup",(function(t){z.events.emit(e.KEY_UP,t)})),window.addEventListener("keypress",(function(t){z.events.emit(e.KEY_PRESS,t)})),window.addEventListener("resize",B),document.addEventListener("visibilitychange",(function(t){z.events.emit(e.VISIBILITY,t)})),B(),z.setPath=function(t){history.pushState(null,null,t),U()}}const J=THREE;class G extends J.Loader{constructor(t){super(t),this.defaultDPI=90,this.defaultUnit="px"}load(t,e,n,r){const i=this,o=new J.FileLoader(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(t,(function(n){try{e(i.parse(n))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),n,r)}parse(t){const e=this;function n(t,e,n,i,o,s,a,u){if(0==e||0==n)return void t.lineTo(u.x,u.y);i=i*Math.PI/180,e=Math.abs(e),n=Math.abs(n);const c=(a.x-u.x)/2,l=(a.y-u.y)/2,h=Math.cos(i)*c+Math.sin(i)*l,f=-Math.sin(i)*c+Math.cos(i)*l;let d=e*e,p=n*n;const v=h*h,m=f*f,g=v/d+m/p;if(g>1){const t=Math.sqrt(g);d=(e*=t)*e,p=(n*=t)*n}const y=d*m+p*v,b=(d*p-y)/y;let x=Math.sqrt(Math.max(0,b));o===s&&(x=-x);const w=x*e*f/n,S=-x*n*h/e,O=Math.cos(i)*w-Math.sin(i)*S+(a.x+u.x)/2,T=Math.sin(i)*w+Math.cos(i)*S+(a.y+u.y)/2,N=r(1,0,(h-w)/e,(f-S)/n),_=r((h-w)/e,(f-S)/n,(-h-w)/e,(-f-S)/n)%(2*Math.PI);t.currentPath.absellipse(O,T,e,n,N,N+_,0===s,i)}function r(t,e,n,r){const i=t*n+e*r,o=Math.sqrt(t*t+e*e)*Math.sqrt(n*n+r*r);let s=Math.acos(Math.max(-1,Math.min(1,i/o)));return t*r-e*n<0&&(s=-s),s}function i(t,e){e=Object.assign({},e);let n={};if(t.hasAttribute("class")){const e=t.getAttribute("class").split(/\s/).filter(Boolean).map((t=>t.trim()));for(let t=0;t<e.length;t++)n=Object.assign(n,d["."+e[t]])}function r(r,i,o){void 0===o&&(o=function(t){return t.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),t}),t.hasAttribute(r)&&(e[i]=o(t.getAttribute(r))),n[r]&&(e[i]=o(n[r])),t.style&&""!==t.style[r]&&(e[i]=o(t.style[r]))}function i(t){return Math.max(0,Math.min(1,c(t)))}function o(t){return Math.max(0,c(t))}return t.hasAttribute("id")&&(n=Object.assign(n,d["#"+t.getAttribute("id")])),r("fill","fill"),r("fill-opacity","fillOpacity",i),r("opacity","opacity",i),r("stroke","stroke"),r("stroke-opacity","strokeOpacity",i),r("stroke-width","strokeWidth",o),r("stroke-linejoin","strokeLineJoin"),r("stroke-linecap","strokeLineCap"),r("stroke-miterlimit","strokeMiterLimit",o),r("visibility","visibility"),e}function o(t,e){return t-(e-t)}function s(t,e,n){if("string"!=typeof t)throw new TypeError("Invalid input: "+typeof t);const r={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/};let i=0,o=!0,s="",a="";const u=[];function c(t,e,n){const r=new SyntaxError('Unexpected character "'+t+'" at index '+e+".");throw r.partial=n,r}function l(){""!==s&&(""===a?u.push(Number(s)):u.push(Number(s)*Math.pow(10,Number(a)))),s="",a=""}let h;const f=t.length;for(let d=0;d<f;d++)if(h=t[d],Array.isArray(e)&&e.includes(u.length%n)&&r.FLAGS.test(h))i=1,s=h,l();else{if(0===i){if(r.WHITESPACE.test(h))continue;if(r.DIGIT.test(h)||r.SIGN.test(h)){i=1,s=h;continue}if(r.POINT.test(h)){i=2,s=h;continue}r.COMMA.test(h)&&(o&&c(h,d,u),o=!0)}if(1===i){if(r.DIGIT.test(h)){s+=h;continue}if(r.POINT.test(h)){s+=h,i=2;continue}if(r.EXP.test(h)){i=3;continue}r.SIGN.test(h)&&1===s.length&&r.SIGN.test(s[0])&&c(h,d,u)}if(2===i){if(r.DIGIT.test(h)){s+=h;continue}if(r.EXP.test(h)){i=3;continue}r.POINT.test(h)&&"."===s[s.length-1]&&c(h,d,u)}if(3===i){if(r.DIGIT.test(h)){a+=h;continue}if(r.SIGN.test(h)){if(""===a){a+=h;continue}1===a.length&&r.SIGN.test(a)&&c(h,d,u)}}r.WHITESPACE.test(h)?(l(),i=0,o=!1):r.COMMA.test(h)?(l(),i=0,o=!0):r.SIGN.test(h)?(l(),i=1,s=h):r.POINT.test(h)?(l(),i=2,s=h):c(h,d,u)}return l(),u}const a=["mm","cm","in","pt","pc","px"],u={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function c(t){let n,r="px";if("string"==typeof t||t instanceof String)for(let e=0,n=a.length;e<n;e++){const n=a[e];if(t.endsWith(n)){r=n,t=t.substring(0,t.length-n.length);break}}return"px"===r&&"px"!==e.defaultUnit?n=u.in[e.defaultUnit]/e.defaultDPI:(n=u[r][e.defaultUnit],n<0&&(n=u[r].in*e.defaultDPI)),n*parseFloat(t)}function l(t){const e=t.elements;return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function h(t){const e=t.elements;return Math.sqrt(e[3]*e[3]+e[4]*e[4])}const f=[],d={},p=[],v=new J.Matrix3,m=new J.Matrix3,g=new J.Matrix3,y=new J.Matrix3,b=new J.Vector2,x=new J.Vector3,w=new J.Matrix3,S=(new DOMParser).parseFromString(t,"image/svg+xml");!function t(e,r){if(1!==e.nodeType)return;const a=function(t){if(!(t.hasAttribute("transform")||"use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))))return null;const e=function(t){const e=new J.Matrix3,n=v;if("use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))){const n=c(t.getAttribute("x")),r=c(t.getAttribute("y"));e.translate(n,r)}if(t.hasAttribute("transform")){const r=t.getAttribute("transform").split(")");for(let t=r.length-1;t>=0;t--){const i=r[t].trim();if(""===i)continue;const o=i.indexOf("("),a=i.length;if(o>0&&o<a){const t=i.substr(0,o),e=s(i.substr(o+1,a-o-1));switch(n.identity(),t){case"translate":if(e.length>=1){const t=e[0];let r=t;e.length>=2&&(r=e[1]),n.translate(t,r)}break;case"rotate":if(e.length>=1){let t=0,r=0,i=0;t=-e[0]*Math.PI/180,e.length>=3&&(r=e[1],i=e[2]),m.identity().translate(-r,-i),g.identity().rotate(t),y.multiplyMatrices(g,m),m.identity().translate(r,i),n.multiplyMatrices(m,y)}break;case"scale":if(e.length>=1){const t=e[0];let r=t;e.length>=2&&(r=e[1]),n.scale(t,r)}break;case"skewX":1===e.length&&n.set(1,Math.tan(e[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===e.length&&n.set(1,0,0,Math.tan(e[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===e.length&&n.set(e[0],e[2],e[4],e[1],e[3],e[5],0,0,1)}}e.premultiply(n)}}return e}(t);p.length>0&&e.premultiply(p[p.length-1]);return w.copy(e),p.push(e),e}(e);let u=!0,S=null;switch(e.nodeName){case"svg":break;case"style":!function(t){if(!t.sheet||!t.sheet.cssRules||!t.sheet.cssRules.length)return;for(let e=0;e<t.sheet.cssRules.length;e++){const n=t.sheet.cssRules[e];if(1!==n.type)continue;const r=n.selectorText.split(/,/gm).filter(Boolean).map((t=>t.trim()));for(let t=0;t<r.length;t++)d[r[t]]=Object.assign(d[r[t]]||{},n.style)}}(e);break;case"g":r=i(e,r);break;case"path":r=i(e,r),e.hasAttribute("d")&&(S=function(t){const e=new J.ShapePath,r=new J.Vector2,i=new J.Vector2,a=new J.Vector2;let u=!0,c=!1;const l=t.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi);for(let t=0,h=l.length;t<h;t++){const h=l[t],f=h.charAt(0),d=h.substr(1).trim();let p;switch(!0===u&&(c=!0,u=!1),f){case"M":p=s(d);for(let t=0,n=p.length;t<n;t+=2)r.x=p[t+0],r.y=p[t+1],i.x=r.x,i.y=r.y,0===t?e.moveTo(r.x,r.y):e.lineTo(r.x,r.y),0===t&&!0===c&&a.copy(r);break;case"H":p=s(d);for(let t=0,n=p.length;t<n;t++)r.x=p[t],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===t&&!0===c&&a.copy(r);break;case"V":p=s(d);for(let t=0,n=p.length;t<n;t++)r.y=p[t],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===t&&!0===c&&a.copy(r);break;case"L":p=s(d);for(let t=0,n=p.length;t<n;t+=2)r.x=p[t+0],r.y=p[t+1],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===t&&!0===c&&a.copy(r);break;case"C":p=s(d);for(let t=0,n=p.length;t<n;t+=6)e.bezierCurveTo(p[t+0],p[t+1],p[t+2],p[t+3],p[t+4],p[t+5]),i.x=p[t+2],i.y=p[t+3],r.x=p[t+4],r.y=p[t+5],0===t&&!0===c&&a.copy(r);break;case"S":p=s(d);for(let t=0,n=p.length;t<n;t+=4)e.bezierCurveTo(o(r.x,i.x),o(r.y,i.y),p[t+0],p[t+1],p[t+2],p[t+3]),i.x=p[t+0],i.y=p[t+1],r.x=p[t+2],r.y=p[t+3],0===t&&!0===c&&a.copy(r);break;case"Q":p=s(d);for(let t=0,n=p.length;t<n;t+=4)e.quadraticCurveTo(p[t+0],p[t+1],p[t+2],p[t+3]),i.x=p[t+0],i.y=p[t+1],r.x=p[t+2],r.y=p[t+3],0===t&&!0===c&&a.copy(r);break;case"T":p=s(d);for(let t=0,n=p.length;t<n;t+=2){const n=o(r.x,i.x),s=o(r.y,i.y);e.quadraticCurveTo(n,s,p[t+0],p[t+1]),i.x=n,i.y=s,r.x=p[t+0],r.y=p[t+1],0===t&&!0===c&&a.copy(r)}break;case"A":p=s(d,[3,4],7);for(let t=0,o=p.length;t<o;t+=7){if(p[t+5]==r.x&&p[t+6]==r.y)continue;const o=r.clone();r.x=p[t+5],r.y=p[t+6],i.x=r.x,i.y=r.y,n(e,p[t],p[t+1],p[t+2],p[t+3],p[t+4],o,r),0===t&&!0===c&&a.copy(r)}break;case"m":p=s(d);for(let t=0,n=p.length;t<n;t+=2)r.x+=p[t+0],r.y+=p[t+1],i.x=r.x,i.y=r.y,0===t?e.moveTo(r.x,r.y):e.lineTo(r.x,r.y),0===t&&!0===c&&a.copy(r);break;case"h":p=s(d);for(let t=0,n=p.length;t<n;t++)r.x+=p[t],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===t&&!0===c&&a.copy(r);break;case"v":p=s(d);for(let t=0,n=p.length;t<n;t++)r.y+=p[t],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===t&&!0===c&&a.copy(r);break;case"l":p=s(d);for(let t=0,n=p.length;t<n;t+=2)r.x+=p[t+0],r.y+=p[t+1],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===t&&!0===c&&a.copy(r);break;case"c":p=s(d);for(let t=0,n=p.length;t<n;t+=6)e.bezierCurveTo(r.x+p[t+0],r.y+p[t+1],r.x+p[t+2],r.y+p[t+3],r.x+p[t+4],r.y+p[t+5]),i.x=r.x+p[t+2],i.y=r.y+p[t+3],r.x+=p[t+4],r.y+=p[t+5],0===t&&!0===c&&a.copy(r);break;case"s":p=s(d);for(let t=0,n=p.length;t<n;t+=4)e.bezierCurveTo(o(r.x,i.x),o(r.y,i.y),r.x+p[t+0],r.y+p[t+1],r.x+p[t+2],r.y+p[t+3]),i.x=r.x+p[t+0],i.y=r.y+p[t+1],r.x+=p[t+2],r.y+=p[t+3],0===t&&!0===c&&a.copy(r);break;case"q":p=s(d);for(let t=0,n=p.length;t<n;t+=4)e.quadraticCurveTo(r.x+p[t+0],r.y+p[t+1],r.x+p[t+2],r.y+p[t+3]),i.x=r.x+p[t+0],i.y=r.y+p[t+1],r.x+=p[t+2],r.y+=p[t+3],0===t&&!0===c&&a.copy(r);break;case"t":p=s(d);for(let t=0,n=p.length;t<n;t+=2){const n=o(r.x,i.x),s=o(r.y,i.y);e.quadraticCurveTo(n,s,r.x+p[t+0],r.y+p[t+1]),i.x=n,i.y=s,r.x=r.x+p[t+0],r.y=r.y+p[t+1],0===t&&!0===c&&a.copy(r)}break;case"a":p=s(d,[3,4],7);for(let t=0,o=p.length;t<o;t+=7){if(0==p[t+5]&&0==p[t+6])continue;const o=r.clone();r.x+=p[t+5],r.y+=p[t+6],i.x=r.x,i.y=r.y,n(e,p[t],p[t+1],p[t+2],p[t+3],p[t+4],o,r),0===t&&!0===c&&a.copy(r)}break;case"Z":case"z":e.currentPath.autoClose=!0,e.currentPath.curves.length>0&&(r.copy(a),e.currentPath.currentPoint.copy(r),u=!0);break;default:console.warn(h)}c=!1}return e}(e));break;case"rect":r=i(e,r),S=function(t){const e=c(t.getAttribute("x")||0),n=c(t.getAttribute("y")||0),r=c(t.getAttribute("rx")||t.getAttribute("ry")||0),i=c(t.getAttribute("ry")||t.getAttribute("rx")||0),o=c(t.getAttribute("width")),s=c(t.getAttribute("height")),a=.448084975506,u=new J.ShapePath;u.moveTo(e+r,n),u.lineTo(e+o-r,n),(0!==r||0!==i)&&u.bezierCurveTo(e+o-r*a,n,e+o,n+i*a,e+o,n+i);u.lineTo(e+o,n+s-i),(0!==r||0!==i)&&u.bezierCurveTo(e+o,n+s-i*a,e+o-r*a,n+s,e+o-r,n+s);u.lineTo(e+r,n+s),(0!==r||0!==i)&&u.bezierCurveTo(e+r*a,n+s,e,n+s-i*a,e,n+s-i);u.lineTo(e,n+i),(0!==r||0!==i)&&u.bezierCurveTo(e,n+i*a,e+r*a,n,e+r,n);return u}(e);break;case"polygon":r=i(e,r),S=function(t){function e(t,e,n){const o=c(e),s=c(n);0===i?r.moveTo(o,s):r.lineTo(o,s),i++}const n=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,r=new J.ShapePath;let i=0;return t.getAttribute("points").replace(n,e),r.currentPath.autoClose=!0,r}(e);break;case"polyline":r=i(e,r),S=function(t){function e(t,e,n){const o=c(e),s=c(n);0===i?r.moveTo(o,s):r.lineTo(o,s),i++}const n=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,r=new J.ShapePath;let i=0;return t.getAttribute("points").replace(n,e),r.currentPath.autoClose=!1,r}(e);break;case"circle":r=i(e,r),S=function(t){const e=c(t.getAttribute("cx")||0),n=c(t.getAttribute("cy")||0),r=c(t.getAttribute("r")||0),i=new J.Path;i.absarc(e,n,r,0,2*Math.PI);const o=new J.ShapePath;return o.subPaths.push(i),o}(e);break;case"ellipse":r=i(e,r),S=function(t){const e=c(t.getAttribute("cx")||0),n=c(t.getAttribute("cy")||0),r=c(t.getAttribute("rx")||0),i=c(t.getAttribute("ry")||0),o=new J.Path;o.absellipse(e,n,r,i,0,2*Math.PI);const s=new J.ShapePath;return s.subPaths.push(o),s}(e);break;case"line":r=i(e,r),S=function(t){const e=c(t.getAttribute("x1")||0),n=c(t.getAttribute("y1")||0),r=c(t.getAttribute("x2")||0),i=c(t.getAttribute("y2")||0),o=new J.ShapePath;return o.moveTo(e,n),o.lineTo(r,i),o.currentPath.autoClose=!1,o}(e);break;case"defs":u=!1;break;case"use":r=i(e,r);const a=e.href.baseVal.substring(1),l=e.viewportElement.getElementById(a);l?t(l,r):console.warn("SVGLoader: 'use node' references non-existent node id: "+a)}if(S&&(void 0!==r.fill&&"none"!==r.fill&&S.color.setStyle(r.fill),function(t,e){function n(t){x.set(t.x,t.y,1).applyMatrix3(e),t.set(x.x,x.y)}const r=function(t){return 0!==t.elements[1]||0!==t.elements[3]}(e),i=t.subPaths;for(let t=0,o=i.length;t<o;t++){const o=i[t].curves;for(let t=0;t<o.length;t++){const i=o[t];i.isLineCurve?(n(i.v1),n(i.v2)):i.isCubicBezierCurve?(n(i.v0),n(i.v1),n(i.v2),n(i.v3)):i.isQuadraticBezierCurve?(n(i.v0),n(i.v1),n(i.v2)):i.isEllipseCurve&&(r&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),b.set(i.aX,i.aY),n(b),i.aX=b.x,i.aY=b.y,i.xRadius*=l(e),i.yRadius*=h(e))}}}(S,w),f.push(S),S.userData={node:e,style:r}),u){const n=e.childNodes;for(let e=0;e<n.length;e++)t(n[e],r)}a&&(p.pop(),p.length>0?w.copy(p[p.length-1]):w.identity())}(S.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4});return{paths:f,xml:S.documentElement}}static createShapes(t){const e=999999999,n=0,r=1,i=2,o=3,s=4,a=5,u=6,c={loc:n,t:0};function l(t,e,r,o){const s=t.x,a=e.x,u=r.x,l=o.x,f=t.y,d=e.y,p=r.y,v=o.y,m=(l-u)*(f-p)-(v-p)*(s-u),g=(v-p)*(a-s)-(l-u)*(d-f),y=m/g,b=((a-s)*(f-p)-(d-f)*(s-u))/g;if(0===g&&0!==m||y<=0||y>=1||b<0||b>1)return null;if(0===m&&0===g){for(let u=0;u<2;u++){if(h(0===u?r:o,t,e),c.loc==n){const t=0===u?r:o;return{x:t.x,y:t.y,t:c.t}}if(c.loc==i){return{x:+(s+c.t*(a-s)).toPrecision(10),y:+(f+c.t*(d-f)).toPrecision(10),t:c.t}}}return null}for(let i=0;i<2;i++)if(h(0===i?r:o,t,e),c.loc==n){const t=0===i?r:o;return{x:t.x,y:t.y,t:c.t}}return{x:+(s+y*(a-s)).toPrecision(10),y:+(f+y*(d-f)).toPrecision(10),t:y}}function h(t,e,l){const h=l.x-e.x,f=l.y-e.y,d=t.x-e.x,p=t.y-e.y,v=h*p-d*f;if(t.x===e.x&&t.y===e.y)return c.loc=n,void(c.t=0);if(t.x===l.x&&t.y===l.y)return c.loc=r,void(c.t=1);if(v<-Number.EPSILON)return void(c.loc=o);if(v>Number.EPSILON)return void(c.loc=s);if(h*d<0||f*p<0)return void(c.loc=a);if(Math.sqrt(h*h+f*f)<Math.sqrt(d*d+p*p))return void(c.loc=u);let m;m=0!==h?d/h:p/f,c.loc=i,c.t=m}function f(t,e,n){const r=new J.Vector2;e.getCenter(r);const i=[];return n.forEach((e=>{if(e.boundingBox.containsPoint(r)){(function(t,e){const n=[],r=[];for(let i=1;i<t.length;i++){const o=t[i-1],s=t[i];for(let t=1;t<e.length;t++){const i=l(o,s,e[t-1],e[t]);null!==i&&void 0===n.find((t=>t.t<=i.t+Number.EPSILON&&t.t>=i.t-Number.EPSILON))&&(n.push(i),r.push(new J.Vector2(i.x,i.y)))}}return r})(t,e.points).forEach((t=>{i.push({identifier:e.identifier,isCW:e.isCW,point:t})}))}})),i.sort(((t,e)=>t.point.x-e.point.x)),i}let d=0,p=e,v=-999999999,m=t.subPaths.map((t=>{const n=t.getPoints();let r=-999999999,i=e,o=-999999999,s=e;for(let t=0;t<n.length;t++){const e=n[t];e.y>r&&(r=e.y),e.y<i&&(i=e.y),e.x>o&&(o=e.x),e.x<s&&(s=e.x)}return v<=o&&(v=o+1),p>=s&&(p=s-1),{points:n,isCW:J.ShapeUtils.isClockWise(n),identifier:d++,boundingBox:new J.Box2(new J.Vector2(s,i),new J.Vector2(o,r))}}));m=m.filter((t=>t.points.length>1));const g=m.map((e=>function(t,e,n,r,i){null!=i&&""!==i||(i="nonzero");const o=new J.Vector2;t.boundingBox.getCenter(o);const s=f([new J.Vector2(n,o.y),new J.Vector2(r,o.y)],t.boundingBox,e);s.sort(((t,e)=>t.point.x-e.point.x));const a=[],u=[];s.forEach((e=>{e.identifier===t.identifier?a.push(e):u.push(e)}));const c=a[0].point.x,l=[];let h=0;for(;h<u.length&&u[h].point.x<c;)l.length>0&&l[l.length-1]===u[h].identifier?l.pop():l.push(u[h].identifier),h++;if(l.push(t.identifier),"evenodd"===i){const e=l.length%2==0,n=l[l.length-2];return{identifier:t.identifier,isHole:e,for:n}}if("nonzero"===i){let n=!0,r=null,i=null;for(let t=0;t<l.length;t++){const o=l[t];n?(i=e[o].isCW,n=!1,r=o):i!==e[o].isCW&&(i=e[o].isCW,n=!0)}return{identifier:t.identifier,isHole:n,for:r}}console.warn('fill-rule: "'+i+'" is currently not implemented.')}(e,m,p,v,t.userData.style.fillRule))),y=[];return m.forEach((t=>{if(!g[t.identifier].isHole){const e=new J.Shape(t.points);g.filter((e=>e.isHole&&e.for===t.identifier)).forEach((t=>{const n=m[t.identifier];e.holes.push(new J.Path(n.points))})),y.push(e)}})),y}static getStrokeStyle(t,e,n,r,i){return{strokeColor:e=void 0!==e?e:"#000",strokeWidth:t=void 0!==t?t:1,strokeLineJoin:n=void 0!==n?n:"miter",strokeLineCap:r=void 0!==r?r:"butt",strokeMiterLimit:i=void 0!==i?i:4}}static pointsToStroke(t,e,n,r){const i=[],o=[],s=[];if(0===G.pointsToStrokeWithBuffers(t,e,n,r,i,o,s))return null;const a=new J.BufferGeometry;return a.setAttribute("position",new J.Float32BufferAttribute(i,3)),a.setAttribute("normal",new J.Float32BufferAttribute(o,3)),a.setAttribute("uv",new J.Float32BufferAttribute(s,2)),a}static pointsToStrokeWithBuffers(t,e,n,r,i,o,s,a){const u=new J.Vector2,c=new J.Vector2,l=new J.Vector2,h=new J.Vector2,f=new J.Vector2,d=new J.Vector2,p=new J.Vector2,v=new J.Vector2,m=new J.Vector2,g=new J.Vector2,y=new J.Vector2,b=new J.Vector2,x=new J.Vector2,w=new J.Vector2,S=new J.Vector2,O=new J.Vector2,T=new J.Vector2;n=void 0!==n?n:12,r=void 0!==r?r:.001,a=void 0!==a?a:0;const N=(t=function(t){let e=!1;for(let n=1,i=t.length-1;n<i;n++)if(t[n].distanceTo(t[n+1])<r){e=!0;break}if(!e)return t;const n=[];n.push(t[0]);for(let e=1,i=t.length-1;e<i;e++)t[e].distanceTo(t[e+1])>=r&&n.push(t[e]);return n.push(t[t.length-1]),n}(t)).length;if(N<2)return 0;const _=t[0].equals(t[N-1]);let P,E,L=t[0];const R=e.strokeWidth/2,M=1/(N-1);let C,A,k,z,j=0,I=!1,D=0,F=3*a,V=2*a;U(t[0],t[1],u).multiplyScalar(R),v.copy(t[0]).sub(u),m.copy(t[0]).add(u),g.copy(v),y.copy(m);for(let n=1;n<N;n++){P=t[n],E=n===N-1?_?t[1]:void 0:t[n+1];const r=u;if(U(L,P,r),l.copy(r).multiplyScalar(R),b.copy(P).sub(l),x.copy(P).add(l),C=j+M,A=!1,void 0!==E){U(P,E,c),l.copy(c).multiplyScalar(R),w.copy(P).sub(l),S.copy(P).add(l),k=!0,l.subVectors(E,L),r.dot(l)<0&&(k=!1),1===n&&(I=k),l.subVectors(E,P),l.normalize();const t=Math.abs(r.dot(l));if(0!==t){const n=R/t;l.multiplyScalar(-n),h.subVectors(P,L),f.copy(h).setLength(n).add(l),O.copy(f).negate();const r=f.length(),i=h.length();h.divideScalar(i),d.subVectors(E,P);const o=d.length();switch(d.divideScalar(o),h.dot(O)<i&&d.dot(O)<o&&(A=!0),T.copy(f).add(P),O.add(P),z=!1,A?k?(S.copy(O),x.copy(O)):(w.copy(O),b.copy(O)):H(),e.strokeLineJoin){case"bevel":W(k,A,C);break;case"round":q(k,A),k?G(P,b,w,C,0):G(P,S,x,C,1);break;default:const t=R*e.strokeMiterLimit/r;if(t<1){if("miter-clip"!==e.strokeLineJoin){W(k,A,C);break}q(k,A),k?(d.subVectors(T,b).multiplyScalar(t).add(b),p.subVectors(T,w).multiplyScalar(t).add(w),B(b,C,0),B(d,C,0),B(P,C,.5),B(P,C,.5),B(d,C,0),B(p,C,0),B(P,C,.5),B(p,C,0),B(w,C,0)):(d.subVectors(T,x).multiplyScalar(t).add(x),p.subVectors(T,S).multiplyScalar(t).add(S),B(x,C,1),B(d,C,1),B(P,C,.5),B(P,C,.5),B(d,C,1),B(p,C,1),B(P,C,.5),B(p,C,1),B(S,C,1))}else A?(k?(B(m,j,1),B(v,j,0),B(T,C,0),B(m,j,1),B(T,C,0),B(O,C,1)):(B(m,j,1),B(v,j,0),B(T,C,1),B(v,j,0),B(O,C,0),B(T,C,1)),k?w.copy(T):S.copy(T)):k?(B(b,C,0),B(T,C,0),B(P,C,.5),B(P,C,.5),B(T,C,0),B(w,C,0)):(B(x,C,1),B(T,C,1),B(P,C,.5),B(P,C,.5),B(T,C,1),B(S,C,1)),z=!0}}else H()}else H();_||n!==N-1||X(t[0],g,y,k,!0,j),j=C,L=P,v.copy(w),m.copy(S)}if(_){if(A&&i){let t=T,e=O;I!==k&&(t=O,e=T),k?(z||I)&&(e.toArray(i,0),e.toArray(i,9),z&&t.toArray(i,3)):!z&&I||(e.toArray(i,3),e.toArray(i,9),z&&t.toArray(i,0))}}else X(P,b,x,k,!1,C);return D;function U(t,e,n){return n.subVectors(e,t),n.set(-n.y,n.x).normalize()}function B(t,e,n){i&&(i[F]=t.x,i[F+1]=t.y,i[F+2]=0,o&&(o[F]=0,o[F+1]=0,o[F+2]=1),F+=3,s&&(s[V]=e,s[V+1]=n,V+=2)),D+=3}function G(t,e,r,i,o){u.copy(e).sub(t).normalize(),c.copy(r).sub(t).normalize();let s=Math.PI;const a=u.dot(c);Math.abs(a)<1&&(s=Math.abs(Math.acos(a))),s/=n,l.copy(e);for(let e=0,r=n-1;e<r;e++)h.copy(l).rotateAround(t,s),B(l,i,o),B(h,i,o),B(t,i,.5),l.copy(h);B(h,i,o),B(r,i,o),B(t,i,.5)}function H(){B(m,j,1),B(v,j,0),B(b,C,0),B(m,j,1),B(b,C,1),B(x,C,0)}function W(t,e,n){e?t?(B(m,j,1),B(v,j,0),B(b,C,0),B(m,j,1),B(b,C,0),B(O,C,1),B(b,n,0),B(w,n,0),B(O,n,.5)):(B(m,j,1),B(v,j,0),B(x,C,1),B(v,j,0),B(O,C,0),B(x,C,1),B(x,n,1),B(S,n,0),B(O,n,.5)):t?(B(b,n,0),B(w,n,0),B(P,n,.5)):(B(x,n,1),B(S,n,0),B(P,n,.5))}function q(t,e){e&&(t?(B(m,j,1),B(v,j,0),B(b,C,0),B(m,j,1),B(b,C,0),B(O,C,1),B(b,j,0),B(P,C,.5),B(O,C,1),B(P,C,.5),B(w,j,0),B(O,C,1)):(B(m,j,1),B(v,j,0),B(x,C,1),B(v,j,0),B(O,C,0),B(x,C,1),B(x,j,1),B(O,C,0),B(P,C,.5),B(P,C,.5),B(O,C,0),B(S,j,1)))}function X(t,n,r,o,s,a){switch(e.strokeLineCap){case"round":s?G(t,r,n,a,.5):G(t,n,r,a,.5);break;case"square":if(s)u.subVectors(n,t),c.set(u.y,-u.x),l.addVectors(u,c).add(t),h.subVectors(c,u).add(t),o?(l.toArray(i,3),h.toArray(i,0),h.toArray(i,9)):(l.toArray(i,3),l.toArray(i,9),h.toArray(i,0));else{u.subVectors(r,t),c.set(u.y,-u.x),l.addVectors(u,c).add(t),h.subVectors(c,u).add(t);const e=i.length;o?(l.toArray(i,e-3),h.toArray(i,e-6),h.toArray(i,e-12)):(l.toArray(i,e-6),h.toArray(i,e-3),h.toArray(i,e-12))}}}}}n(8838),n(1520),n(2139),n(8132);function H(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var W=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};H(W,"agent",navigator.userAgent.toLowerCase()),H(W,"mobile",!!navigator.maxTouchPoints),H(W,"tablet",W.mobile&&Math.max(window.innerWidth,window.innerHeight)>1e3),H(W,"phone",W.mobile&&!W.tablet),H(W,"webgl",function(){if("undefined"!=typeof window){var t=document.createElement("canvas"),e=t.getContext("webgl2",{failIfMajorPerformanceCaveat:!0}),n=!!e;return e=null,t=null,n}}());n(4336),n(9371),n(6331),n(6108),n(3049),n(4882),n(774),n(522);function q(t){return function(t){if(Array.isArray(t))return X(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return X(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var $=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(Y(this,t),this.type=e,this.array=[],this.index=0,e)for(var r=0;r<n;r++)this.array.push(new e)}var e,n,r;return e=t,(n=[{key:"get",value:function(){var t=this.array[this.index];return this.index++,this.index===this.array.length&&(this.index=0),t}},{key:"empty",value:function(){this.array.length=0}},{key:"push",value:function(t){this.array.push(t)}},{key:"insert",value:function(t){var e;Array.isArray(t)||(t=[t]),(e=this.array).push.apply(e,q(t))}},{key:"length",value:function(){return this.array.length}},{key:"destroy",value:function(){for(var t=this.array.length-1;t>=0;t--)this.array[t]&&this.array[t].destroy&&this.array[t].destroy();for(var e in this)this[e]=null;return null}}])&&K(e.prototype,n),r&&K(e,r),t}();n(75),n(1822),n(1876),n(1246),n(9357),n(6142),n(3946),n(1466);function Q(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(10,n);return Math.round((Math.random()*(e-t)+t)*r)/r}function Z(){return(Date.now()+Q(0,99999)).toString()}function tt(t){if(t.includes("//"))return t;var e=Number(location.port)>1e3?":"+location.port:"";return location.protocol+"//"+location.hostname+e+location.pathname.replace(/\/[^/]*$/,"/")+t}function et(t){var e="function"!=typeof t,n=e?t.constructor.toString():t.toString();return{name:n.match(/(?:class|function)\s([^\s{(]+)/)[1],code:n,isInstance:e}}function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}function rt(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return it(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return it(t,e)}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function st(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function at(t,e,n){return at="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ft(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},at(t,e,n||t)}function ut(t,e){return ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ut(t,e)}function ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ft(t);if(e){var i=ft(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return lt(this,n)}}function lt(t,e){if(e&&("object"===nt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ht(t)}function ht(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ft(t){return ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ft(t)}function dt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}(s,t);var e,n,r,i=ct(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.params,n=e.imports,r=void 0===n?[]:n,a=e.classes,u=void 0===a?[]:a,c=e.controller,l=void 0===c?[]:c,h=e.handlers,f=void 0===h?[]:h;ot(this,s),dt(ht(t=i.call(this)),"onMessage",(function(e){var n=e.data;n.event?t.emit(n.event,n.message):n.id&&(t.emit(n.id,n.message),t.off(n.id))}));var d=[];if(r.forEach((function(t){var e=rt(t),n=e[0],r=e.slice(1);d.push("import { ".concat(r.join(", ")," } from '").concat(tt(o.getPath(n)),"';"))})),u.length&&d.push(u.map((function(t){return t.toString()})).join("\n\n")),l.length){var p=rt(l),v=p[0],m=p.slice(1),g=et(v),y=g.name,b=g.code;d.push("".concat(b,"\n\nnew ").concat(y,"();")),m.forEach((function(e){return t.createMethod(e)}))}else d.push("addEventListener('message', ({ data }) => self[data.message.fn].call(self, data.message));");return f.forEach((function(e){var n=et(e),r=n.name,i=n.code;t.createMethod(r),d.push("self.".concat(r,"=").concat(i,";"))})),t.worker=new Worker(URL.createObjectURL(new Blob([d.join("\n\n")],{type:"text/javascript"})),{type:"module"}),t.addListeners(),t}return e=s,n=[{key:"addListeners",value:function(){this.worker.addEventListener("message",this.onMessage)}},{key:"removeListeners",value:function(){this.worker.removeEventListener("message",this.onMessage)}},{key:"createMethod",value:function(t){var e=this;this[t]=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,i=new Promise((function(r){return e.send(t,n,r)}));return r&&i.then(r),i}}},{key:"send",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(e.fn=t,n){var r=Z();e.id=r,this.on(r,n)}this.worker.postMessage({message:e},e.buffer)}},{key:"destroy",value:function(){return this.removeListeners(),this.worker.terminate(),at(ft(s.prototype),"destroy",this).call(this)}}],r=[{key:"upload",value:function(){var t=this;this.handlers||(this.handlers=[]);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach((function(e){return t.handlers.push(e)}))}},{key:"shared",value:function(t){return this.threads||(this.params=t||{},this.params.handlers=this.handlers,this.threads=new $(s,this.count)),t?this.threads:this.threads.get()}}],n&&st(e.prototype,n),r&&st(e,r),s}(a);function vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}dt(pt,"count",navigator.hardwareConcurrency||4),dt(pt,"params",{});var mt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"init",value:function(){pt.upload((function(t){var e=t.path,n=t.options,r=t.params,i=t.id;fetch(e,n).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,r)})).then((function(t){postMessage({id:i,message:t},[t])})).catch((function(t){t instanceof Error&&(t=t.name+": "+t.message),postMessage({id:i,message:{error:t}})}))}))}},{key:"load",value:function(t,e,n){return t=tt(o.getPath(t)),pt.shared().loadImage({path:t,options:e,params:n})}}],(n=null)&&vt(e.prototype,n),r&&vt(e,r),t}();function gt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function xt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wt(t,e){return wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},wt(t,e)}function St(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Tt(t);if(e){var i=Tt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ot(this,n)}}function Ot(t,e){if(e&&("object"===bt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Tt(t){return Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Tt(t)}var Nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wt(t,e)}(s,t);var e,n,r,i=St(s);function s(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(n=i.call(this,t,e)).defaultOptions={imageOrientation:"flipY",premultiplyAlpha:"none",preserveData:!1},n.options=n.defaultOptions,n}return e=s,(n=[{key:"load",value:function(t,e){var n=this;t=o.getPath(t);var r,i,s=o.get(t);if(s&&s.isTexture)r=s,this.increment(),e&&e(r);else{if(r=new J.Texture,s)i=Promise.resolve(s);else if("undefined"==typeof createImageBitmap||W.agent.includes("firefox"))i=o.loadImage(t);else{var a={imageOrientation:this.options.imageOrientation,premultiplyAlpha:this.options.premultiplyAlpha};i=pt.threads?mt.load(t,o.options,a):fetch(t,o.options).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,a)}))}i.then((function(i){if(i.error)throw new Error(i.error);r.image=i,r.format=/jpe?g/.test(t)?J.RGBFormat:J.RGBAFormat,r.encoding=J.sRGBEncoding,J.MathUtils.isPowerOfTwo(i.width)&&J.MathUtils.isPowerOfTwo(i.height)||(r.minFilter=J.LinearFilter,r.generateMipmaps=!1),r.needsUpdate=!0,r.onUpdate=function(){i.close&&!n.options.preserveData&&i.close(),r.onUpdate=null},o.add(t,r),n.increment(),e&&e(r)})).catch((function(t){n.increment(),e&&e(t)}))}return this.total++,r}},{key:"setOptions",value:function(t){return this.options=Object.assign(this.defaultOptions,t),this}}])&&xt(e.prototype,n),r&&xt(e,r),s}(function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;gt(this,t),this.events=new a,this.total=0,this.loaded=0,this.progress=0,this.promise=new Promise((function(t){return e.resolve=t})),this.assets=n,this.callback=r,n.forEach((function(t){return e.load(t)}))}var n,r,i;return n=t,r=[{key:"load",value:function(){}},{key:"loadAsync",value:function(t){var e=this;return new Promise((function(n){return e.load(t,n)}))}},{key:"increment",value:function(){this.progress=++this.loaded/this.total,this.events.emit(e.PROGRESS,{progress:this.progress}),this.loaded===this.total&&this.complete()}},{key:"complete",value:function(){this.resolve(),this.events.emit(e.COMPLETE),this.callback&&this.callback()}},{key:"add",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.total+=t}},{key:"trigger",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=0;e<t;e++)this.increment()}},{key:"ready",value:function(){return this.total?this.promise:Promise.resolve()}},{key:"destroy",value:function(){for(var t in this.events.destroy(),this)this[t]=null;return null}}],r&&yt(n.prototype,r),i&&yt(n,i),t}());function _t(){var t=new J.BufferGeometry,e=new Float32Array([-1,-1,3,-1,-1,3]),n=new Float32Array([0,0,2,0,0,2]);return t.setAttribute("position",new J.BufferAttribute(e,2)),t.setAttribute("uv",new J.BufferAttribute(n,2)),t}var Pt={bgColor:"#222326",sphere:{passes:3,speed:6,smoothness:10,value1:.7,value2:.9,rotationSpeed:{x:-10,y:-10,z:0}},bloom:{luminosityThreshold:.25,bloomStrength:.3,bloomRadius:.8},adjustments:{hue:0,saturation:1.5}};function Et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Rt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"init",value:function(){this.initWorld(),this.initLights(),this.initLoaders(),this.addListeners()}},{key:"initWorld",value:function(){this.renderer=new J.WebGLRenderer({powerPreference:"high-performance",stencil:!1}),this.element=this.renderer.domElement,this.renderer.toneMapping=J.ACESFilmicToneMapping,this.renderer.toneMappingExposure=1,this.scene=new J.Scene,this.scene.background=new J.Color(Pt.bgColor),this.scene.fog=new J.Fog(Pt.bgColor,1,50),this.camera=new J.PerspectiveCamera(30),this.camera.near=.5,this.camera.far=50,this.camera.position.z=10,this.camera.zoom=1.1,this.camera.lookAt(this.scene.position),this.screenTriangle=_t(),this.resolution=new J.Uniform(new J.Vector2),this.aspect=new J.Uniform(1),this.time=new J.Uniform(0),this.frame=new J.Uniform(0)}},{key:"initLights",value:function(){this.scene.add(new J.HemisphereLight(6316128,4210752));var t=new J.DirectionalLight(16777215);t.position.set(1,1,1),this.scene.add(t)}},{key:"initLoaders",value:function(){this.textureLoader=new Nt,this.svgLoader=new G}},{key:"addListeners",value:function(){this.renderer.domElement.addEventListener("touchstart",this.onTouchStart)}}],(n=null)&&Et(e.prototype,n),r&&Et(e,r),t}();Lt(Rt,"onTouchStart",(function(t){t.preventDefault()})),Lt(Rt,"resize",(function(t,e,n){t=Math.round(t*n),e=Math.round(e*n),Rt.resolution.value.set(t,e),Rt.aspect.value=t/e})),Lt(Rt,"update",(function(t,e,n){Rt.time.value=t,Rt.frame.value=n})),Lt(Rt,"getTexture",(function(t,e){return Rt.textureLoader.load(t,e)})),Lt(Rt,"loadTexture",(function(t){return Rt.textureLoader.loadAsync(t)})),Lt(Rt,"loadSVG",(function(t){return Rt.svgLoader.loadAsync(t)}));n(6409);const Mt="\nprecision highp float;\n\nuniform sampler2D tMap;\nuniform vec2 uResolution;\n\nin vec2 v_rgbNW;\nin vec2 v_rgbNE;\nin vec2 v_rgbSW;\nin vec2 v_rgbSE;\nin vec2 v_rgbM;\n\nin vec2 vUv;\n\nout vec4 FragColor;\n\n".concat("\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE,\n            vec2 v_rgbSW, vec2 v_rgbSE,\n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture(tex, v_rgbSE).xyz;\n    vec4 texColor = texture(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n","\n\nvoid main() {\n    FragColor = fxaa(tMap, vUv * uResolution, uResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n");function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function At(t,e){return At=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},At(t,e)}function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=jt(t);if(e){var i=jt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return zt(this,n)}}function zt(t,e){if(e&&("object"===Ct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function jt(t){return jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},jt(t)}var It=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&At(t,e)}(n,t);var e=kt(n);function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.call(this,{glslVersion:J.GLSL3,uniforms:{tMap:new J.Uniform(null),uResolution:new J.Uniform(new J.Vector2)},vertexShader:"\nin vec3 position;\nin vec2 uv;\n\nuniform vec2 uResolution;\n\nout vec2 v_rgbNW;\nout vec2 v_rgbNE;\nout vec2 v_rgbSW;\nout vec2 v_rgbSE;\nout vec2 v_rgbM;\n\nout vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n\n    vec2 fragCoord = uv * uResolution;\n    vec2 inverseVP = 1.0 / uResolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n\n    gl_Position = vec4(position, 1.0);\n}\n",fragmentShader:Mt,blending:J.NoBlending,depthWrite:!1,depthTest:!1})}return n}(J.RawShaderMaterial);function Dt(t){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(t)}function Ft(t,e){return Ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ft(t,e)}function Vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Bt(t);if(e){var i=Bt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ut(this,n)}}function Ut(t,e){if(e&&("object"===Dt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Bt(t){return Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Bt(t)}var Jt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ft(t,e)}(n,t);var e=Vt(n);function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.call(this,{glslVersion:J.GLSL3,uniforms:{tMap:new J.Uniform(null),uLuminosityThreshold:new J.Uniform(1),uLuminositySmoothing:new J.Uniform(1)},vertexShader:"\nin vec3 position;\nin vec2 uv;\n\nout vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n\n    gl_Position = vec4(position, 1.0);\n}\n",fragmentShader:"\nprecision highp float;\n\nuniform sampler2D tMap;\nuniform float uLuminosityThreshold;\nuniform float uLuminositySmoothing;\n\nin vec2 vUv;\n\nout vec4 FragColor;\n\nvoid main() {\n    vec4 texel = texture(tMap, vUv);\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float v = dot(texel.xyz, luma);\n    vec4 outputColor = vec4(0);\n    float alpha = smoothstep(uLuminosityThreshold, uLuminosityThreshold + uLuminositySmoothing, v);\n\n    FragColor = mix(outputColor, texel, alpha);\n}\n",blending:J.NoBlending,depthWrite:!1,depthTest:!1})}return n}(J.RawShaderMaterial);const Gt="\n".concat("\nfloat random(vec2 co) {\n    float a = 12.9898;\n    float b = 78.233;\n    float c = 43758.5453;\n    float dt = dot(co.xy, vec2(a, b));\n    float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n","\n\nvec3 dither(vec3 color) {\n    // Calculate grid position\n    float grid_position = random(gl_FragCoord.xy);\n\n    // Shift the individual colors differently, thus making it even harder to see the dithering pattern\n    vec3 dither_shift_RGB = vec3(0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0);\n\n    // Modify shift acording to grid position\n    dither_shift_RGB = mix(2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position);\n\n    // Shift the color by dither_shift\n    return color + dither_shift_RGB;\n}\n"),Ht="\nprecision highp float;\n\nuniform sampler2D tBlur1;\nuniform sampler2D tBlur2;\nuniform sampler2D tBlur3;\nuniform sampler2D tBlur4;\nuniform sampler2D tBlur5;\nuniform float uBloomFactors[NUM_MIPS];\n\nin vec2 vUv;\n\nout vec4 FragColor;\n\n".concat(Gt,"\n\nvoid main() {\n    FragColor = uBloomFactors[0] * texture(tBlur1, vUv) +\n                uBloomFactors[1] * texture(tBlur2, vUv) +\n                uBloomFactors[2] * texture(tBlur3, vUv) +\n                uBloomFactors[3] * texture(tBlur4, vUv) +\n                uBloomFactors[4] * texture(tBlur5, vUv);\n\n    FragColor.rgb = dither(FragColor.rgb);\n}\n");function Wt(t){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wt(t)}function qt(t,e){return qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},qt(t,e)}function Xt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Kt(t);if(e){var i=Kt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yt(this,n)}}function Yt(t,e){if(e&&("object"===Wt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Kt(t){return Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Kt(t)}var $t=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qt(t,e)}(n,t);var e=Xt(n);function n(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.call(this,{glslVersion:J.GLSL3,defines:{NUM_MIPS:t},uniforms:{tBlur1:new J.Uniform(null),tBlur2:new J.Uniform(null),tBlur3:new J.Uniform(null),tBlur4:new J.Uniform(null),tBlur5:new J.Uniform(null),uBloomFactors:new J.Uniform(null)},vertexShader:"\nin vec3 position;\nin vec2 uv;\n\nout vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n\n    gl_Position = vec4(position, 1.0);\n}\n",fragmentShader:Ht,blending:J.NoBlending,depthWrite:!1,depthTest:!1})}return n}(J.RawShaderMaterial);const Qt="\nprecision highp float;\n\nuniform sampler2D tMap;\nuniform vec2 uDirection;\nuniform vec2 uResolution;\n\nin vec2 vUv;\n\nout vec4 FragColor;\n\n".concat("\n#define MAX_KERNEL_RADIUS 11\n\nfloat gaussianPdf(float x, float sigma) {\n    return 0.39894 * exp(-0.5 * x * x / (sigma * sigma)) / sigma;\n}\n\nvec4 blur(sampler2D image, vec2 uv, vec2 resolution, vec2 direction, int kernelRadius, int sigma) {\n    vec2 invSize = 1.0 / resolution;\n    float fSigma = float(sigma);\n    float weightSum = gaussianPdf(0.0, fSigma);\n    vec3 diffuseSum = texture(image, uv).rgb * weightSum;\n\n    for (int i = 1; i < MAX_KERNEL_RADIUS; i++) {\n        if (i >= kernelRadius) break;\n        float x = float(i);\n        float w = gaussianPdf(x, fSigma);\n        vec2 uvOffset = direction * invSize * x;\n        vec3 sample1 = texture(image, uv + uvOffset).rgb;\n        vec3 sample2 = texture(image, uv - uvOffset).rgb;\n        diffuseSum += (sample1 + sample2) * w;\n        weightSum += 2.0 * w;\n    }\n\n    return vec4(diffuseSum / weightSum, 1.0);\n}\n\nvec4 blur(sampler2D image, vec2 uv, vec2 resolution, vec2 direction, int kernelRadius) {\n    return blur(image, uv, resolution, direction, kernelRadius, kernelRadius);\n}\n","\n\nvoid main() {\n    FragColor = blur(tMap, vUv, uResolution, uDirection, KERNEL_RADIUS, SIGMA);\n}\n");function Zt(t){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt(t)}function te(t,e){return te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},te(t,e)}function ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=re(t);if(e){var i=re(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(t,e){if(e&&("object"===Zt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function re(t){return re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},re(t)}var ie=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&te(t,e)}(n,t);var e=ee(n);function n(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.call(this,{glslVersion:J.GLSL3,defines:{KERNEL_RADIUS:t,SIGMA:t},uniforms:{tMap:new J.Uniform(null),uDirection:new J.Uniform(new J.Vector2(.5,.5)),uResolution:new J.Uniform(new J.Vector2)},vertexShader:"\nin vec3 position;\nin vec2 uv;\n\nout vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n\n    gl_Position = vec4(position, 1.0);\n}\n",fragmentShader:Qt,blending:J.NoBlending,depthWrite:!1,depthTest:!1})}return n}(J.RawShaderMaterial);function oe(t){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(t)}function se(t,e){return se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},se(t,e)}function ae(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ce(t);if(e){var i=ce(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ue(this,n)}}function ue(t,e){if(e&&("object"===oe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ce(t){return ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ce(t)}var le="\n\tprecision highp float;\n\n\tuniform sampler2D tScene;\n\tuniform sampler2D tBloom;\n\tuniform float uDistortion;\n\n\tin vec2 vUv;\n\n\tout vec4 FragColor;\n\n\t".concat("\nvec4 getRGB(sampler2D image, vec2 uv, float angle, float amount) {\n    vec2 offset = vec2(cos(angle), sin(angle)) * amount;\n    vec4 r = texture(image, uv + offset);\n    vec4 g = texture(image, uv);\n    vec4 b = texture(image, uv - offset);\n    return vec4(r.r, g.g, b.b, g.a);\n}\n","\n\n\tvoid main() {\n\t\tFragColor = texture(tScene, vUv);\n\n\t\tfloat angle = length(vUv - 0.5);\n\t\tfloat amount = 0.0002 + uDistortion;\n\n\t\tFragColor.rgb += getRGB(tBloom, vUv, angle, amount).rgb;\n\t}\n"),he=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&se(t,e)}(n,t);var e=ae(n);function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.call(this,{glslVersion:J.GLSL3,uniforms:{tScene:new J.Uniform(null),tBloom:new J.Uniform(null),uDistortion:new J.Uniform(.00125)},vertexShader:"\n\tin vec3 position;\n\tin vec2 uv;\n\n\tout vec2 vUv;\n\n\tvoid main() {\n\t\tvUv = uv;\n\n\t\tgl_Position = vec4(position, 1.0);\n\t}\n",fragmentShader:le,blending:J.NoBlending,depthWrite:!1,depthTest:!1})}return n}(J.RawShaderMaterial),fe={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\t\t}"};class de{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const pe=new J.OrthographicCamera(-1,1,1,-1,0,1),ve=new J.BufferGeometry;ve.setAttribute("position",new J.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),ve.setAttribute("uv",new J.Float32BufferAttribute([0,2,0,0,2,0],2));class me{constructor(t){this._mesh=new J.Mesh(ve,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,pe)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}class ge extends de{constructor(t,e){super(),this.textureID=void 0!==e?e:"tDiffuse",t instanceof J.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=J.UniformsUtils.clone(t.uniforms),this.material=new J.ShaderMaterial({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new me(this.material)}render(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}}class ye extends de{constructor(t,e){super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,e,n){const r=t.getContext(),i=t.state;let o,s;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(o=0,s=1):(o=1,s=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),i.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),i.buffers.stencil.setClear(s),i.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(r.EQUAL,1,4294967295),i.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),i.buffers.stencil.setLocked(!0)}}class be extends de{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}class xe{constructor(t,e){if(this.renderer=t,void 0===e){const n={minFilter:J.LinearFilter,magFilter:J.LinearFilter,format:J.RGBAFormat},r=t.getSize(new J.Vector2);this._pixelRatio=t.getPixelRatio(),this._width=r.width,this._height=r.height,(e=new J.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===fe&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===ge&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new ge(fe),this.clock=new J.Clock}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const e=this.passes.indexOf(t);-1!==e&&this.passes.splice(e,1)}isLastEnabledPass(t){for(let e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(t){void 0===t&&(t=this.clock.getDelta());const e=this.renderer.getRenderTarget();let n=!1;for(let e=0,r=this.passes.length;e<r;e++){const r=this.passes[e];if(!1!==r.enabled){if(r.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(e),r.render(this.renderer,this.writeBuffer,this.readBuffer,t,n),r.needsSwap){if(n){const e=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(e.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),n.setFunc(e.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==ye&&(r instanceof ye?n=!0:r instanceof be&&(n=!1))}}this.renderer.setRenderTarget(e)}reset(t){if(void 0===t){const e=this.renderer.getSize(new J.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,e){this._width=t,this._height=e;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let t=0;t<this.passes.length;t++)this.passes[t].setSize(n,r)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}}new J.OrthographicCamera(-1,1,1,-1,0,1);const we=new J.BufferGeometry;we.setAttribute("position",new J.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),we.setAttribute("uv",new J.Float32BufferAttribute([0,2,0,0,2,0],2));class Se extends de{constructor(t,e,n,r,i){super(),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new J.Color}render(t,e,n){const r=t.autoClear;let i,o;t.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),i=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),t.autoClear=r}}class Oe{constructor(t={}){this.name=t.name,this.type=t.type,this.node=t.node,this.needsUpdate=t.needsUpdate}get value(){return this.node.value}set value(t){this.node.value=t}}const Te={elements:["x","y","z","w"],addShortcuts:function(){function t(t,e,n){return n?{get:function(){return this[t][e][n]},set:function(r){this[t][e][n]=r}}:{get:function(){return this[t][e]},set:function(n){this[t][e]=n}}}return function(e,n,r){const i={};for(let e=0;e<r.length;++e){const o=r[e].split("."),s=o[0],a=o[1];i[s]=t(n,s,a)}Object.defineProperties(e,i)}}()},Ne={nodes:{},keywords:{},add:function(t){this.nodes[t.name]=t},addKeyword:function(t,e,n){n=void 0===n||n,this.keywords[t]={callback:e,cache:n}},remove:function(t){delete this.nodes[t.name]},removeKeyword:function(t){delete this.keywords[t]},get:function(t){return this.nodes[t]},getKeyword:function(t,e){return this.keywords[t].callback.call(this,e)},getKeywordData:function(t){return this.keywords[t]},contains:function(t){return void 0!==this.nodes[t]},containsKeyword:function(t){return void 0!==this.keywords[t]}};class _e{constructor(t){this.uuid=J.MathUtils.generateUUID(),this.name="",this.type=t,this.userData={}}analyze(t,e={}){t.analyzing=!0,this.build(t.addFlow(e.slot,e.cache,e.context),"v4"),t.clearVertexNodeCode(),t.clearFragmentNodeCode(),t.removeFlow(),t.analyzing=!1}analyzeAndFlow(t,e,n={}){return this.analyze(t,n),this.flow(t,e,n)}flow(t,e,n={}){t.addFlow(n.slot,n.cache,n.context);const r={};return r.result=this.build(t,e),r.code=t.clearNodeCode(),r.extra=t.context.extra,t.removeFlow(),r}build(t,e,n){e=e||this.getType(t,e);const r=t.getNodeData(n||this);return t.analyzing&&this.appendDepsNode(t,r,e),-1===t.nodes.indexOf(this)&&t.nodes.push(this),void 0!==this.updateFrame&&-1===t.updaters.indexOf(this)&&t.updaters.push(this),this.generate(t,e,n)}generate(){}getHash(){let t,e,n="{";for(t in this)e=this[t],e instanceof _e&&(n+='"'+t+'":'+e.getHash()+",");if(this.hashProperties)for(let r=0;r<this.hashProperties.length;r++)t=this.hashProperties[r],e=this[t],n+='"'+t+'":"'+String(e)+'",';return n+='"id":"'+this.uuid+'"}',n}appendDepsNode(t,e,n){e.deps=(e.deps||0)+1;const r=t.getTypeLength(n);(r>(e.outputMax||0)||this.getType(t,n))&&(e.outputMax=r,e.output=n)}setName(t){return this.name=t,this}getName(){return this.name}getType(t,e){return"sampler2D"===e||"samplerCube"===e?e:this.type}getJSONNode(t){if(!(void 0===t||"string"==typeof t)&&void 0!==t.nodes[this.uuid])return t.nodes[this.uuid]}copy(t){return void 0!==t.name&&(this.name=t.name),void 0!==t.userData&&(this.userData=JSON.parse(JSON.stringify(t.userData))),this}createJSONNode(t){const e=void 0===t||"string"==typeof t,n={};if("string"!=typeof this.nodeType)throw new Error("Node does not allow serialization.");return n.uuid=this.uuid,n.nodeType=this.nodeType,""!==this.name&&(n.name=this.name),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e||(t.nodes[this.uuid]=n),n}toJSON(t){return this.getJSONNode(t)||this.createJSONNode(t)}}_e.prototype.isNode=!0,_e.prototype.hashProperties=void 0;class Pe extends _e{constructor(t,e={}){super(t),this.shared=void 0===e.shared||e.shared,this.unique=void 0!==e.unique&&e.unique}build(t,e,n,r){if(e=e||this.getType(t),this.getShared(t,e)){const i=this.getUnique(t,e);i&&void 0===this.constructor.uuid&&(this.constructor.uuid=J.MathUtils.generateUUID()),n=t.getUuid(n||this.getUuid(),!i);const o=t.getNodeData(n),s=o.output||this.getType(t);if(t.analyzing)return(o.deps||0)>0||this.getLabel()?(this.appendDepsNode(t,o,e),this.generate(t,e,n)):super.build(t,e,n);if(i)return o.name=o.name||super.build(t,e,n),o.name;if(!this.getLabel()&&(!this.getShared(t,s)||t.context.ignoreCache||1===o.deps))return super.build(t,e,n);n=this.getUuid(!1);let a=this.getTemp(t,n);if(a)return t.format(a,s,e);{a=Pe.prototype.generate.call(this,t,e,n,o.output,r);const i=this.generate(t,s,n);return t.addNodeCode(a+" = "+i+";"),t.format(a,s,e)}}return super.build(t,e,n)}getShared(t,e){return"sampler2D"!==e&&"samplerCube"!==e&&this.shared}getUnique(){return this.unique}setLabel(t){return this.label=t,this}getLabel(){return this.label}getUuid(t){let e=(t||null==t)&&this.constructor.uuid||this.uuid;return"string"==typeof this.scope&&(e=this.scope+"-"+e),e}getTemp(t,e){e=e||this.uuid;const n=t.getVars()[e];return n?n.name:void 0}generate(t,e,n,r,i){return this.getShared(t,e)||console.error("THREE.TempNode is not shared!"),n=n||this.uuid,t.getTempVar(n,r||this.getType(t),i,this.getLabel()).name}}const Ee=/^\s*([a-z_0-9]+)\s+([a-z_0-9]+)\s*\(([\s\S]*?)\)/i,Le=/[a-z_0-9]+/gi;class Re extends Pe{constructor(t,e,n,r,i){super(i),this.isMethod=void 0===i,this.isInterface=!1,this.parse(t,e,n,r)}getShared(){return!this.isMethod}getType(t){return t.getTypeByFormat(this.type)}getInputByName(t){let e=this.inputs.length;for(;e--;)if(this.inputs[e].name===t)return this.inputs[e]}getIncludeByName(t){let e=this.includes.length;for(;e--;)if(this.includes[e].name===t)return this.includes[e]}generate(t,e){let n,r=0,i=this.src;for(let e=0;e<this.includes.length;e++)t.include(this.includes[e],this);for(const e in this.extensions)t.extensions[e]=!0;const o=[];for(;n=Le.exec(this.src);)o.push(n);for(let e=0;e<o.length;e++){const n=o[e],s=n[0],a=!this.isMethod||!this.getInputByName(s);let u=s;if(this.keywords[s]||this.useKeywords&&a&&Ne.containsKeyword(s)){let e=this.keywords[s];if(!e){const n=Ne.getKeywordData(s);n.cache&&(e=t.keywords[s]),e=e||Ne.getKeyword(s,t),n.cache&&(t.keywords[s]=e)}u=e.build(t)}s!==u&&(i=i.substring(0,n.index+r)+u+i.substring(n.index+s.length+r),r+=u.length-s.length),void 0===this.getIncludeByName(u)&&Ne.contains(u)&&t.include(Ne.get(u))}return"source"===e?i:this.isMethod?(this.isInterface||t.include(this,!1,i),this.name):t.format("( "+i+" )",this.getType(t),e)}parse(t,e,n,r){if(this.src=t||"",this.includes=e||[],this.extensions=n||{},this.keywords=r||{},this.isMethod){const t=this.src.match(Ee);if(this.inputs=[],t&&4==t.length){this.type=t[1],this.name=t[2];const e=t[3].match(Le);if(e){let t=0;for(;t<e.length;){let n,r=e[t++];"in"===r||"out"===r||"inout"===r?n=e[t++]:(n=r,r="");const i=e[t++];this.inputs.push({name:i,type:n,qualifier:r})}}this.isInterface=-1===this.src.indexOf("{")}else this.type="",this.name=""}}copy(t){return super.copy(t),this.isMethod=t.isMethod,this.useKeywords=t.useKeywords,this.parse(t.src,t.includes,t.extensions,t.keywords),void 0!==t.type&&(this.type=t.type),this}toJSON(t){let e=this.getJSONNode(t);if(!e){e=this.createJSONNode(t),e.src=this.src,e.isMethod=this.isMethod,e.useKeywords=this.useKeywords,this.isMethod||(e.type=this.type),e.extensions=JSON.parse(JSON.stringify(this.extensions)),e.keywords={};for(const n in this.keywords)e.keywords[n]=this.keywords[n].toJSON(t).uuid;if(this.includes.length){e.includes=[];for(let n=0;n<this.includes.length;n++)e.includes.push(this.includes[n].toJSON(t).uuid)}}return e}}Re.prototype.nodeType="Function",Re.prototype.useKeywords=!0;const Me=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i;class Ce extends Pe{constructor(t,e){super(),this.parse(t||Ce.PI,e)}getType(t){return t.getTypeByFormat(this.type)}parse(t,e){this.src=t||"";let n,r,i="";const o=this.src.match(Me);this.useDefine=e||"#"===this.src.charAt(0),o&&o.length>1?(r=o[1],n=o[2],i=o[3]):(n=this.src,r="f"),this.name=n,this.type=r,this.value=i}build(t,e){return"source"!==e?(t.include(this),t.format(this.name,this.getType(t),e)):this.value?this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";":this.useDefine?this.src:void 0}generate(t,e){return t.format(this.name,this.getType(t),e)}copy(t){return super.copy(t),this.parse(t.src,t.useDefine),this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.src=this.src,!0===e.useDefine&&(e.useDefine=!0)),e}}Ce.prototype.nodeType="Const",Ce.PI="PI",Ce.PI2="PI2",Ce.RECIPROCAL_PI="RECIPROCAL_PI",Ce.RECIPROCAL_PI2="RECIPROCAL_PI2",Ce.LOG2="LOG2",Ce.EPSILON="EPSILON";const Ae=/^struct\s*([a-z_0-9]+)\s*{\s*((.|\n)*?)}/gim,ke=/\s*(\w*?)\s*(\w*?)(\=|\;)/gim;class ze extends Pe{constructor(t){super(),this.parse(t)}getType(t){return t.getTypeByFormat(this.name)}getInputByName(t){let e=this.inputs.length;for(;e--;)if(this.inputs[e].name===t)return this.inputs[e]}generate(t,e){return"source"===e?this.src+";":t.format("( "+this.src+" )",this.getType(t),e)}parse(t=""){this.src=t,this.inputs=[];const e=Ae.exec(this.src);if(e){const t=e[2];let n;for(;n=ke.exec(t);)this.inputs.push({type:n[1],name:n[2]});this.name=e[1]}else this.name="";this.type=this.name}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.src=this.src),e}}ze.prototype.nodeType="Struct";class je extends Pe{constructor(t,e){(e=e||{}).shared=void 0!==e.shared&&e.shared,super(t,e),this.readonly=!1}setReadonly(t){return this.readonly=t,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}copy(t){return super.copy(t),void 0!==t.readonly&&(this.readonly=t.readonly),this}createJSONNode(t){const e=super.createJSONNode(t);return!0===this.readonly&&(e.readonly=this.readonly),e}generate(t,e,n,r,i,o){n=t.getUuid(n||this.getUuid()),r=r||this.getType(t);const s=t.getNodeData(n);return this.getReadonly(t)&&void 0!==this.generateReadonly?this.generateReadonly(t,e,n,r,i,o):t.isShader("vertex")?(s.vertex||(s.vertex=t.createVertexUniform(r,this,i,o,this.getLabel())),t.format(s.vertex.name,r,e)):(s.fragment||(s.fragment=t.createFragmentUniform(r,this,i,o,this.getLabel())),t.format(s.fragment.name,r,e))}}class Ie extends je{constructor(t,e){super("v2"),this.value=t instanceof J.Vector2?t:new J.Vector2(t,e)}generateReadonly(t,e,n,r){return t.format("vec2( "+this.x+", "+this.y+" )",r,e)}copy(t){return super.copy(t),this.value.copy(t),this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.x=this.x,e.y=this.y,!0===this.readonly&&(e.readonly=!0)),e}}Ie.prototype.nodeType="Vector2",Te.addShortcuts(Ie.prototype,"value",["x","y"]);class De extends je{constructor(t,e,n){super("v3"),this.value=t instanceof J.Vector3?t:new J.Vector3(t,e,n)}generateReadonly(t,e,n,r){return t.format("vec3( "+this.x+", "+this.y+", "+this.z+" )",r,e)}copy(t){return super.copy(t),this.value.copy(t),this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.x=this.x,e.y=this.y,e.z=this.z,!0===this.readonly&&(e.readonly=!0)),e}}De.prototype.nodeType="Vector3",Te.addShortcuts(De.prototype,"value",["x","y","z"]);class Fe extends je{constructor(t,e,n,r){super("v4"),this.value=t instanceof J.Vector4?t:new J.Vector4(t,e,n,r)}generateReadonly(t,e,n,r){return t.format("vec4( "+this.x+", "+this.y+", "+this.z+", "+this.w+" )",r,e)}copy(t){return super.copy(t),this.value.copy(t),this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.x=this.x,e.y=this.y,e.z=this.z,e.w=this.w,!0===this.readonly&&(e.readonly=!0)),e}}Fe.prototype.nodeType="Vector4",Te.addShortcuts(Fe.prototype,"value",["x","y","z","w"]);class Ve extends Pe{constructor(t){super("v2",{shared:!1}),this.index=t||0}generate(t,e){t.requires.uv[this.index]=!0;const n=this.index>0?this.index+1:"",r=t.isShader("vertex")?"uv"+n:"vUv"+n;return t.format(r,this.getType(t),e)}copy(t){return super.copy(t),this.index=t.index,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.index=this.index),e}}Ve.prototype.nodeType="UV",Ne.addKeyword("uv",(function(){return new Ve})),Ne.addKeyword("uv2",(function(){return new Ve(1)}));class Ue extends je{constructor(t){super("f"),this.value=t||0}generateReadonly(t,e,n,r){return t.format(this.value+(this.value%1?"":".0"),r,e)}copy(t){return super.copy(t),this.value=t.value,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.value=this.value,!0===this.readonly&&(e.readonly=!0)),e}}Ue.prototype.nodeType="Float";class Be extends Re{constructor(t,e,n,r,i){super(t,i,r,n,e)}}Be.prototype.nodeType="Expression";class Je extends Pe{constructor(t,e){super("v4"),this.input=t,this.method=e||Je.LINEAR_TO_LINEAR}generate(t,e){const n=this.input.build(t,"v4"),r=this.getType(t),i=Je.Nodes[this.method],o=t.include(i);if(o===Je.LINEAR_TO_LINEAR)return t.format(n,r,e);if(2===i.inputs.length){const i=this.factor.build(t,"f");return t.format(o+"( "+n+", "+i+" )",r,e)}return t.format(o+"( "+n+" )",r,e)}fromEncoding(t){const e=Je.getEncodingComponents(t);this.method="LinearTo"+e[0],this.factor=e[1]}fromDecoding(t){const e=Je.getEncodingComponents(t);this.method=e[0]+"ToLinear",this.factor=e[1]}copy(t){return super.copy(t),this.input=t.input,this.method=t.method,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.input=this.input.toJSON(t).uuid,e.method=this.method),e}}Je.Nodes=function(){const t=new Re("\n\t\tvec4 LinearToLinear( in vec4 value ) {\n\n\t\t\treturn value;\n\n\t\t}"),e=new Re("\n\t\tvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\n\t\t\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n\n\t\t}"),n=new Re("\n\t\tvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\n\t\t\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n\n\t\t}"),r=new Re("\n\t\tvec4 sRGBToLinear( in vec4 value ) {\n\n\t\t\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n\n\t\t}"),i=new Re("\n\t\tvec4 LinearTosRGB( in vec4 value ) {\n\n\t\t\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n\n\t\t}"),o=new Re("\n\t\tvec4 RGBEToLinear( in vec4 value ) {\n\n\t\t\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n\n\t\t}"),s=new Re("\n\t\tvec4 LinearToRGBE( in vec4 value ) {\n\n\t\t\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\t\t\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\t\t\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n\n\t\t}"),a=new Re("\n\t\tvec3 RGBMToLinear( in vec4 value, in float maxRange ) {\n\n\t\t\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n\n\t\t}"),u=new Re("\n\t\tvec3 LinearToRGBM( in vec4 value, in float maxRange ) {\n\n\t\t\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\t\t\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\t\t\tM            = ceil( M * 255.0 ) / 255.0;\n\t\t\treturn vec4( value.rgb / ( M * maxRange ), M );\n\n\t\t}"),c=new Re("\n\t\tvec3 RGBDToLinear( in vec4 value, in float maxRange ) {\n\n\t\t\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n\n\t\t}"),l=new Re("\n\t\tvec3 LinearToRGBD( in vec4 value, in float maxRange ) {\n\n\t\t\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\t\t\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\t\t\tD            = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\t\t\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n\n\t\t}"),h=new Ce("const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );"),f=new Re("\n\t\tvec4 LinearToLogLuv( in vec4 value ) {\n\n\t\t\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\t\t\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\t\t\tvec4 vResult;\n\t\t\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\t\t\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\t\t\tvResult.w = fract(Le);\n\t\t\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\t\t\treturn vResult;\n\n\t\t}",[h]),d=new Ce("const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );");return{LinearToLinear:t,GammaToLinear:e,LinearToGamma:n,sRGBToLinear:r,LinearTosRGB:i,RGBEToLinear:o,LinearToRGBE:s,RGBMToLinear:a,LinearToRGBM:u,RGBDToLinear:c,LinearToRGBD:l,cLogLuvM:h,LinearToLogLuv:f,cLogLuvInverseM:d,LogLuvToLinear:new Re("\n\t\tvec4 LogLuvToLinear( in vec4 value ) {\n\n\t\t\tfloat Le = value.z * 255.0 + value.w;\n\t\t\tvec3 Xp_Y_XYZp;\n\t\t\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\t\t\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\t\t\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\t\t\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\t\t\treturn vec4( max(vRGB, 0.0), 1.0 );\n\n\t\t}",[d])}}(),Je.LINEAR_TO_LINEAR="LinearToLinear",Je.GAMMA_TO_LINEAR="GammaToLinear",Je.LINEAR_TO_GAMMA="LinearToGamma",Je.SRGB_TO_LINEAR="sRGBToLinear",Je.LINEAR_TO_SRGB="LinearTosRGB",Je.RGBE_TO_LINEAR="RGBEToLinear",Je.LINEAR_TO_RGBE="LinearToRGBE",Je.RGBM_TO_LINEAR="RGBMToLinear",Je.LINEAR_TO_RGBM="LinearToRGBM",Je.RGBD_TO_LINEAR="RGBDToLinear",Je.LINEAR_TO_RGBD="LinearToRGBD",Je.LINEAR_TO_LOG_LUV="LinearToLogLuv",Je.LOG_LUV_TO_LINEAR="LogLuvToLinear",Je.getEncodingComponents=function(t){switch(t){case J.LinearEncoding:return["Linear"];case J.sRGBEncoding:return["sRGB"];case J.RGBEEncoding:return["RGBE"];case J.RGBM7Encoding:return["RGBM",new Ue(7).setReadonly(!0)];case J.RGBM16Encoding:return["RGBM",new Ue(16).setReadonly(!0)];case J.RGBDEncoding:return["RGBD",new Ue(256).setReadonly(!0)];case J.GammaEncoding:return["Gamma",new Be("float( GAMMA_FACTOR )","f")]}},Je.prototype.nodeType="ColorSpace",Je.prototype.hashProperties=["method"];class Ge extends je{constructor(t,e,n,r){super("v4",{shared:!0}),this.value=t,this.uv=e||new Ve,this.bias=n,this.project=void 0!==r&&r}getTexture(t,e){return super.generate(t,e,this.value.uuid,"t")}generate(t,e){if("sampler2D"===e)return this.getTexture(t,e);const n=this.getTexture(t,e),r=this.uv.build(t,this.project?"v4":"v2");let i,o,s=this.bias?this.bias.build(t,"f"):void 0;void 0===s&&t.context.bias&&(s=t.context.bias.setTexture(this).build(t,"f")),i=this.project?"texture2DProj":s?"tex2DBias":"tex2D",o=s?i+"( "+n+", "+r+", "+s+" )":i+"( "+n+", "+r+" )";const a={include:t.isShader("vertex"),ignoreCache:!0},u=this.getType(t);return t.addContext(a),this.colorSpace=this.colorSpace||new Je(new Be("",u)),this.colorSpace.fromDecoding(t.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(o),o=this.colorSpace.build(t,u),t.removeContext(),t.format(o,u,e)}copy(t){return super.copy(t),t.value&&(this.value=t.value),this.uv=t.uv,t.bias&&(this.bias=t.bias),void 0!==t.project&&(this.project=t.project),this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),this.value&&(e.value=this.value.uuid),e.uv=this.uv.toJSON(t).uuid,e.project=this.project,this.bias&&(e.bias=this.bias.toJSON(t).uuid)),e}}Ge.prototype.nodeType="Texture";class He extends Pe{constructor(t){super("v3"),this.scope=t||He.LOCAL}getType(){return this.scope===He.PROJECTION?"v4":this.type}getShared(){switch(this.scope){case He.LOCAL:case He.WORLD:return!1}return!0}generate(t,e){let n;switch(this.scope){case He.LOCAL:t.isShader("vertex")?n="transformed":(t.requires.position=!0,n="vPosition");break;case He.WORLD:if(t.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";t.requires.worldPosition=!0,n="vWPosition";break;case He.VIEW:n=t.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case He.PROJECTION:n=t.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )"}return t.format(n,this.getType(t),e)}copy(t){return super.copy(t),this.scope=t.scope,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.scope=this.scope),e}}He.LOCAL="local",He.WORLD="world",He.VIEW="view",He.PROJECTION="projection",He.prototype.nodeType="Position",Ne.addKeyword("position",(function(){return new He})),Ne.addKeyword("worldPosition",(function(){return new He(He.WORLD)})),Ne.addKeyword("viewPosition",(function(){return new He(He.VIEW)}));class We extends Pe{constructor(t){super("v3"),this.scope=t||We.VIEW}getShared(){return this.scope===We.WORLD}build(t,e,n,r){const i=t.context[this.scope+"Normal"];return i?i.build(t,e,n,r):super.build(t,e,n)}generate(t,e){let n;switch(this.scope){case We.VIEW:n=t.isShader("vertex")?"transformedNormal":"geometryNormal";break;case We.LOCAL:t.isShader("vertex")?n="objectNormal":(t.requires.normal=!0,n="vObjectNormal");break;case We.WORLD:t.isShader("vertex")?n="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(t.requires.worldNormal=!0,n="vWNormal")}return t.format(n,this.getType(t),e)}copy(t){return super.copy(t),this.scope=t.scope,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.scope=this.scope),e}}We.LOCAL="local",We.WORLD="world",We.VIEW="view",We.prototype.nodeType="Normal",Ne.addKeyword("viewNormal",(function(){return new We(We.VIEW)})),Ne.addKeyword("localNormal",(function(){return new We(We.NORMAL)})),Ne.addKeyword("worldNormal",(function(){return new We(We.WORLD)}));class qe extends Pe{constructor(t){super("v3"),this.scope=t||qe.CUBE}getUnique(t){return!t.context.viewNormal}getType(){return this.scope===qe.SPHERE?"v2":this.type}generate(t,e){const n=this.getUnique(t);if(t.isShader("fragment")){let r,i,o;switch(this.scope){case qe.VECTOR:const e=new We(We.VIEW),s=t.context.roughness,a=e.build(t,"v3"),u=new He(He.VIEW).build(t,"v3"),c=s?s.build(t,"f"):void 0;let l=`reflect( -normalize( ${u} ), ${a} )`;c&&(l=`normalize( mix( ${l}, ${a}, ${c} * ${c} ) )`),i=`inverseTransformDirection( ${l}, viewMatrix )`,n?(t.addNodeCode(`vec3 reflectVec = ${i};`),r="reflectVec"):r=i;break;case qe.CUBE:o=new qe(qe.VECTOR).build(t,"v3"),i="vec3( -"+o+".x, "+o+".yz )",n?(t.addNodeCode(`vec3 reflectCubeVec = ${i};`),r="reflectCubeVec"):r=i;break;case qe.SPHERE:o=new qe(qe.VECTOR).build(t,"v3"),i="normalize( ( viewMatrix * vec4( "+o+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5",n?(t.addNodeCode(`vec2 reflectSphereVec = ${i};`),r="reflectSphereVec"):r=i}return t.format(r,this.getType(t),e)}return console.warn("THREE.ReflectNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.type,e)}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.scope=this.scope),e}}qe.CUBE="cube",qe.SPHERE="sphere",qe.VECTOR="vector",qe.prototype.nodeType="Reflect";class Xe extends je{constructor(t,e,n){super("v4",{shared:!0}),this.value=t,this.uv=e||new qe,this.bias=n}getTexture(t,e){return super.generate(t,e,this.value.uuid,"tc")}generate(t,e){if("samplerCube"===e)return this.getTexture(t,e);const n=this.getTexture(t,e),r=this.uv.build(t,"v3");let i,o=this.bias?this.bias.build(t,"f"):void 0;void 0===o&&t.context.bias&&(o=t.context.bias.setTexture(this).build(t,"f")),i=o?"texCubeBias( "+n+", "+r+", "+o+" )":"texCube( "+n+", "+r+" )";const s={include:t.isShader("vertex"),ignoreCache:!0},a=this.getType(t);return t.addContext(s),this.colorSpace=this.colorSpace||new Je(new Be("",a)),this.colorSpace.fromDecoding(t.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(i),i=this.colorSpace.build(t,a),t.removeContext(),t.format(i,a,e)}copy(t){return super.copy(t),t.value&&(this.value=t.value),this.uv=t.uv,t.bias&&(this.bias=t.bias),this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.value=this.value.uuid,e.uv=this.uv.toJSON(t).uuid,this.bias&&(e.bias=this.bias.toJSON(t).uuid)),e}}Xe.prototype.nodeType="CubeTexture";class Ye extends Pe{constructor(t,e){super(),this.setFunction(t,e)}setFunction(t,e=[]){this.value=t,this.inputs=e}getFunction(){return this.value}getType(t){return this.value.getType(t)}generate(t,e){const n=this.getType(t),r=this.value;let i=r.build(t,e)+"( ";const o=[];for(let e=0;e<r.inputs.length;e++){const n=r.inputs[e],i=this.inputs[e]||this.inputs[n.name];o.push(i.build(t,t.getTypeByFormat(n.type)))}return i+=o.join(", ")+" )",t.format(i,n,e)}copy(t){super.copy(t);for(const e in t.inputs)this.inputs[e]=t.inputs[e];return this.value=t.value,this}toJSON(t){let e=this.getJSONNode(t);if(!e){const n=this.value;if(e=this.createJSONNode(t),e.value=this.value.toJSON(t).uuid,n.inputs.length){e.inputs={};for(let r=0;r<n.inputs.length;r++){const i=n.inputs[r],o=this.inputs[r]||this.inputs[i.name];e.inputs[i.name]=o.toJSON(t).uuid}}}return e}}Ye.prototype.nodeType="FunctionCall";class Ke extends Pe{constructor(t,e,n){super(),this.a=t,this.b=e,this.op=n}getType(t){const e=this.a.getType(t),n=this.b.getType(t);return t.isTypeMatrix(e)?"v4":t.getTypeLength(n)>t.getTypeLength(e)?n:e}generate(t,e){const n=this.getType(t),r=this.a.build(t,n),i=this.b.build(t,n);return t.format("( "+r+" "+this.op+" "+i+" )",n,e)}copy(t){return super.copy(t),this.a=t.a,this.b=t.b,this.op=t.op,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.a=this.a.toJSON(t).uuid,e.b=this.b.toJSON(t).uuid,e.op=this.op),e}}Ke.ADD="+",Ke.SUB="-",Ke.MUL="*",Ke.DIV="/",Ke.prototype.nodeType="Operator";class $e extends Pe{constructor(t,e,n,r){super(),this.a=t,"string"!=typeof e?this.b=e:r=e,"string"!=typeof n?this.c=n:r=n,this.method=r}getNumInputs(){switch(this.method){case $e.MIX:case $e.CLAMP:case $e.REFRACT:case $e.SMOOTHSTEP:case $e.FACEFORWARD:return 3;case $e.MIN:case $e.MAX:case $e.MOD:case $e.STEP:case $e.REFLECT:case $e.DISTANCE:case $e.DOT:case $e.CROSS:case $e.POW:return 2;default:return 1}}getInputType(t){const e=t.getTypeLength(this.a.getType(t)),n=this.b?t.getTypeLength(this.b.getType(t)):0,r=this.c?t.getTypeLength(this.c.getType(t)):0;return e>n&&e>r?this.a.getType(t):n>r?this.b.getType(t):this.c.getType(t)}getType(t){switch(this.method){case $e.LENGTH:case $e.DISTANCE:case $e.DOT:return"f";case $e.CROSS:return"v3"}return this.getInputType(t)}generate(t,e){let n,r,i;const o=this.a?t.getTypeLength(this.a.getType(t)):0,s=this.b?t.getTypeLength(this.b.getType(t)):0,a=this.c?t.getTypeLength(this.c.getType(t)):0,u=this.getInputType(t),c=this.getType(t);switch(this.method){case $e.NEGATE:return t.format("( -"+this.a.build(t,u)+" )",u,e);case $e.INVERT:return t.format("( 1.0 - "+this.a.build(t,u)+" )",u,e);case $e.CROSS:n=this.a.build(t,"v3"),r=this.b.build(t,"v3");break;case $e.STEP:n=this.a.build(t,1===o?"f":u),r=this.b.build(t,u);break;case $e.MIN:case $e.MAX:case $e.MOD:n=this.a.build(t,u),r=this.b.build(t,1===s?"f":u);break;case $e.REFRACT:n=this.a.build(t,u),r=this.b.build(t,u),i=this.c.build(t,"f");break;case $e.MIX:n=this.a.build(t,u),r=this.b.build(t,u),i=this.c.build(t,1===a?"f":u);break;default:n=this.a.build(t,u),this.b&&(r=this.b.build(t,u)),this.c&&(i=this.c.build(t,u))}const l=[];l.push(n),r&&l.push(r),i&&l.push(i);const h=this.getNumInputs(t);if(l.length!==h)throw Error(`Arguments not match used in "${this.method}". Require ${h}, currently ${l.length}.`);return t.format(this.method+"( "+l.join(", ")+" )",c,e)}copy(t){return super.copy(t),this.a=t.a,this.b=t.b,this.c=t.c,this.method=t.method,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.a=this.a.toJSON(t).uuid,this.b&&(e.b=this.b.toJSON(t).uuid),this.c&&(e.c=this.c.toJSON(t).uuid),e.method=this.method),e}}$e.RAD="radians",$e.DEG="degrees",$e.EXP="exp",$e.EXP2="exp2",$e.LOG="log",$e.LOG2="log2",$e.SQRT="sqrt",$e.INV_SQRT="inversesqrt",$e.FLOOR="floor",$e.CEIL="ceil",$e.NORMALIZE="normalize",$e.FRACT="fract",$e.SATURATE="saturate",$e.SIN="sin",$e.COS="cos",$e.TAN="tan",$e.ASIN="asin",$e.ACOS="acos",$e.ARCTAN="atan",$e.ABS="abs",$e.SIGN="sign",$e.LENGTH="length",$e.NEGATE="negate",$e.INVERT="invert",$e.MIN="min",$e.MAX="max",$e.MOD="mod",$e.STEP="step",$e.REFLECT="reflect",$e.DISTANCE="distance",$e.DOT="dot",$e.CROSS="cross",$e.POW="pow",$e.MIX="mix",$e.CLAMP="clamp",$e.REFRACT="refract",$e.SMOOTHSTEP="smoothstep",$e.FACEFORWARD="faceforward",$e.prototype.nodeType="Math",$e.prototype.hashProperties=["method"];class Qe extends Pe{constructor(t,e,n){super("v4"),this.value=t,this.uv=e,this.bias=n}bilinearCubeUV(t,e,n,r){const i=new Ye(Qe.Nodes.bilinearCubeUV,[e,n,r]);this.colorSpaceTL=this.colorSpaceTL||new Je(new Be("","v4")),this.colorSpaceTL.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(i.build(t)+".tl"),this.colorSpaceTR=this.colorSpaceTR||new Je(new Be("","v4")),this.colorSpaceTR.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(i.build(t)+".tr"),this.colorSpaceBL=this.colorSpaceBL||new Je(new Be("","v4")),this.colorSpaceBL.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(i.build(t)+".bl"),this.colorSpaceBR=this.colorSpaceBR||new Je(new Be("","v4")),this.colorSpaceBR.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(i.build(t)+".br");const o={include:t.isShader("vertex"),ignoreCache:!0};t.addContext(o),this.colorSpaceTLExp=new Be(this.colorSpaceTL.build(t,"v4"),"v4"),this.colorSpaceTRExp=new Be(this.colorSpaceTR.build(t,"v4"),"v4"),this.colorSpaceBLExp=new Be(this.colorSpaceBL.build(t,"v4"),"v4"),this.colorSpaceBRExp=new Be(this.colorSpaceBR.build(t,"v4"),"v4"),t.removeContext();const s=new Be("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return s.keywords.cubeUV_TL=this.colorSpaceTLExp,s.keywords.cubeUV_TR=this.colorSpaceTRExp,s.keywords.cubeUV_BL=this.colorSpaceBLExp,s.keywords.cubeUV_BR=this.colorSpaceBRExp,s.keywords.cubeUV=i,s}generate(t,e){if(t.isShader("fragment")){const n=this.uv,r=this.bias||t.context.roughness,i=new Ye(Qe.Nodes.roughnessToMip,[r]),o=new $e(i,Qe.Nodes.m0,Qe.Nodes.cubeUV_maxMipLevel,$e.CLAMP),s=new $e(o,$e.FLOOR),a=new $e(o,$e.FRACT),u=this.bilinearCubeUV(t,this.value,n,s),c=this.bilinearCubeUV(t,this.value,n,new Ke(s,new Ue(1).setReadonly(!0),Ke.ADD)),l=new $e(u,c,a,$e.MIX);return t.format(l.build(t),"v4",e)}return console.warn("THREE.TextureCubeUVNode is not compatible with "+t.shader+" shader."),t.format("vec4( 0.0 )",this.getType(t),e)}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.value=this.value.toJSON(t).uuid,e.uv=this.uv.toJSON(t).uuid,e.bias=this.bias.toJSON(t).uuid),e}}Qe.Nodes=function(){const t=new ze("struct TextureCubeUVData {\n\t\t\tvec4 tl;\n\t\t\tvec4 tr;\n\t\t\tvec4 br;\n\t\t\tvec4 bl;\n\t\t\tvec2 f;\n\t\t}"),e=new Ce("float cubeUV_maxMipLevel 8.0",!0),n=new Ce("float cubeUV_minMipLevel 4.0",!0),r=new Ce("float cubeUV_maxTileSize 256.0",!0),i=new Ce("float cubeUV_minTileSize 16.0",!0),o=new Re("float getFace(vec3 direction) {\n\t\t\t\tvec3 absDirection = abs(direction);\n\t\t\t\tfloat face = -1.0;\n\t\t\t\tif (absDirection.x > absDirection.z) {\n\t\t\t\t\tif (absDirection.x > absDirection.y)\n\t\t\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t} else {\n\t\t\t\t\tif (absDirection.z > absDirection.y)\n\t\t\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t}\n\t\t\t\treturn face;\n\t\t}");o.useKeywords=!1;const s=new Re("vec2 getUV(vec3 direction, float face) {\n\t\t\t\tvec2 uv;\n\t\t\t\tif (face == 0.0) {\n\t\t\t\t\tuv = vec2(direction.z, direction.y) / abs(direction.x); // pos x\n\t\t\t\t} else if (face == 1.0) {\n\t\t\t\t\tuv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y\n\t\t\t\t} else if (face == 2.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z\n\t\t\t\t} else if (face == 3.0) {\n\t\t\t\t\tuv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x\n\t\t\t\t} else if (face == 4.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y\n\t\t\t\t} else {\n\t\t\t\t\tuv = vec2(direction.x, direction.y) / abs(direction.z); // neg z\n\t\t\t\t}\n\t\t\t\treturn 0.5 * (uv + 1.0);\n\t\t}");s.useKeywords=!1;const a=new Re("TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n\n\t\t\tfloat face = getFace(direction);\n\t\t\tfloat filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n\t\t\tmipInt = max(mipInt, cubeUV_minMipLevel);\n\t\t\tfloat faceSize = exp2(mipInt);\n\n\t\t\tfloat texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n\n\t\t\tvec2 uv = getUV(direction, face) * (faceSize - 1.0);\n\t\t\tvec2 f = fract(uv);\n\t\t\tuv += 0.5 - f;\n\t\t\tif (face > 2.0) {\n\t\t\t\tuv.y += faceSize;\n\t\t\t\tface -= 3.0;\n\t\t\t}\n\t\t\tuv.x += face * faceSize;\n\t\t\tif(mipInt < cubeUV_maxMipLevel){\n\t\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t\t}\n\t\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\t\tuv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n\t\t\tuv *= texelSize;\n\n\t\t\tvec4 tl = texture2D(envMap, uv);\n\t\t\tuv.x += texelSize;\n\t\t\tvec4 tr = texture2D(envMap, uv);\n\t\t\tuv.y += texelSize;\n\t\t\tvec4 br = texture2D(envMap, uv);\n\t\t\tuv.x -= texelSize;\n\t\t\tvec4 bl = texture2D(envMap, uv);\n\n\t\t\treturn TextureCubeUVData( tl, tr, br, bl, f );\n\t\t}",[t,o,s,e,n,r,i]);a.useKeywords=!1;const u=new Ce("float r0 1.0",!0),c=new Ce("float v0 0.339",!0),l=new Ce("float m0 -2.0",!0),h=new Ce("float r1 0.8",!0),f=new Ce("float v1 0.276",!0),d=new Ce("float m1 -1.0",!0),p=new Ce("float r4 0.4",!0),v=new Ce("float v4 0.046",!0),m=new Ce("float m4 2.0",!0),g=new Ce("float r5 0.305",!0),y=new Ce("float v5 0.016",!0),b=new Ce("float m5 3.0",!0),x=new Ce("float r6 0.21",!0),w=new Ce("float v6 0.0038",!0),S=new Ce("float m6 4.0",!0);return{bilinearCubeUV:a,roughnessToMip:new Re("float roughnessToMip(float roughness) {\n\t\t\tfloat mip = 0.0;\n\t\t\tif (roughness >= r1) {\n\t\t\t\tmip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n\t\t\t} else if (roughness >= r4) {\n\t\t\t\tmip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n\t\t\t} else if (roughness >= r5) {\n\t\t\t\tmip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n\t\t\t} else if (roughness >= r6) {\n\t\t\t\tmip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n\t\t\t} else {\n\t\t\t\tmip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25\n\t\t\t}\n\t\t\treturn mip;\n\t\t}",[u,c,l,h,f,d,p,v,m,g,y,b,x,w,S]),m0:l,cubeUV_maxMipLevel:e}}(),Qe.prototype.nodeType="TextureCubeUV";class Ze extends Pe{constructor(t,e,n){super("v4"),this.value=t,this.radianceNode=new Qe(this.value,e||new qe(qe.VECTOR),n),this.irradianceNode=new Qe(this.value,new We(We.WORLD),new Ue(1).setReadonly(!0))}generate(t,e){if(t.isShader("fragment")){t.require("irradiance"),t.context.bias&&t.context.bias.setTexture(this.value);return("irradiance"===t.slot?this.irradianceNode:this.radianceNode).build(t,e)}return console.warn("THREE.TextureCubeNode is not compatible with "+t.shader+" shader."),t.format("vec4( 0.0 )",this.getType(t),e)}copy(t){return super.copy(t),this.value=t.value,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.value=this.value.toJSON(t).uuid),e}}Ze.prototype.nodeType="TextureCube";const tn=Te.elements,en=["float","vec2","vec3","vec4"],nn={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b"},rn={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4"};class on{constructor(){this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.requires={uv:[],color:[],lights:!1,fog:!1,transparent:!1,irradiance:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode="\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\t#define texCube(a, b) textureCube(a, b)\n\t\t\t\t#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)\n\n\t\t\t\t#define tex2D(a, b) texture2D(a, b)\n\t\t\t\t#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)\n\n\t\t\t#else\n\n\t\t\t\t#define texCube(a, b) textureCube(a, b)\n\t\t\t\t#define texCubeBias(a, b, c) textureCube(a, b, c)\n\n\t\t\t\t#define tex2D(a, b) texture2D(a, b)\n\t\t\t\t#define tex2DBias(a, b, c) texture2D(a, b, c)\n\n\t\t\t#endif\n\n\t\t\t#include <packing>\n\t\t\t#include <common>",this.parsCode={vertex:"",fragment:""},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={},this.updaters=[],this.nodes=[],this.analyzing=!1}build(t,e){this.buildShader("vertex",t),this.buildShader("fragment",e);for(let t=0;t<this.requires.uv.length;t++)if(this.requires.uv[t]){const e=t>0?t+1:"";this.addVaryCode("varying vec2 vUv"+e+";"),t>0&&this.addVertexParsCode("attribute vec2 uv"+e+";"),this.addVertexFinalCode("vUv"+e+" = uv"+e+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition&&(this.addVaryCode("varying vec3 vWPosition;"),this.addVertexFinalCode("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;")),this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this}buildShader(t,e){this.resultCode[t]=e.build(this.setShader(t),"v4")}setMaterial(t,e){return this.material=t,this.renderer=e,this.requires.lights=t.lights,this.requires.fog=t.fog,this.mergeDefines(t.defines),this}addFlow(t,e,n){return this.addSlot(t).addCache(e).addContext(n)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(t){return this.cache=t||"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(t){return this.context=Object.assign({},this.context,t),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(t=""){return this.slot=t,this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addVertexCode(t){this.addCode(t,"vertex")}addFragmentCode(t){this.addCode(t,"fragment")}addCode(t,e){this.code[e||this.shader]+=t+"\n"}addVertexNodeCode(t){this.addNodeCode(t,"vertex")}addFragmentNodeCode(t){this.addNodeCode(t,"fragment")}addNodeCode(t,e){this.nodeCode[e||this.shader]+=t+"\n"}clearNodeCode(t){t=t||this.shader;const e=this.nodeCode[t];return this.nodeCode[t]="",e}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(t){this.addFinalCode(t,"vertex")}addFragmentFinalCode(t){this.addFinalCode(t,"fragment")}addFinalCode(t,e){this.finalCode[e||this.shader]+=t+"\n"}addVertexParsCode(t){this.addParsCode(t,"vertex")}addFragmentParsCode(t){this.addParsCode(t,"fragment")}addParsCode(t,e){this.parsCode[e||this.shader]+=t+"\n"}addVaryCode(t){this.addVertexParsCode(t),this.addFragmentParsCode(t)}isCache(t){return-1!==this.caches.indexOf(t)}isSlot(t){return-1!==this.slots.indexOf(t)}define(t,e){this.defines[t]=void 0===e?1:e}require(t){this.requires[t]=!0}isDefined(t){return void 0!==this.defines[t]}getVar(t,e,n,r="varying",i="V",o=""){const s=this.getVars(r);let a=s[t];if(!a){const r=s.length;a={name:n||"node"+i+r+(o?"_"+o:""),type:e},s.push(a),s[t]=a}return a}getTempVar(t,e,n,r){return this.getVar(t,e,n,this.shader,"T",r)}getAttribute(t,e){if(!this.attributes[t]){const n=this.getVar(t,e);this.addVertexParsCode("attribute "+e+" "+t+";"),this.addVertexFinalCode(n.name+" = "+t+";"),this.attributes[t]={varying:n,name:t,type:e}}return this.attributes[t]}getCode(t){return[this.prefixCode,this.parsCode[t],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[t],"uniform"),this.getIncludesCode("consts",t),this.getIncludesCode("structs",t),this.getIncludesCode("functions",t),"void main() {",this.getVarListCode(this.getVars(t)),this.code[t],this.resultCode[t],this.finalCode[t],"}"].join("\n")}getVarListCode(t,e=""){let n="";for(let r=0,i=t.length;r<i;++r){const i=t[r],o=i.type,s=i.name,a=this.getFormatByType(o);if(void 0===a)throw new Error("Node pars "+a+" not found.");n+=e+" "+a+" "+s+";\n"}return n}getVars(t){return this.inputs.vars[t||this.shader]}getNodeData(t){const e=t.isNode?t.uuid:t;return this.nodeData[e]=this.nodeData[e]||{}}createUniform(t,e,n,r,i,o){const s=this.inputs.uniforms,a=s.list.length,u=new Oe({type:e,name:r||"nodeU"+a+(o?"_"+o:""),node:n,needsUpdate:i});return s.list.push(u),s[t].push(u),s[t][u.name]=u,this.uniforms[u.name]=u,u}createVertexUniform(t,e,n,r,i){return this.createUniform("vertex",t,e,n,r,i)}createFragmentUniform(t,e,n,r,i){return this.createUniform("fragment",t,e,n,r,i)}include(t,e,n){let r;if(t="string"==typeof t?Ne.get(t):t,!1===this.context.include)return t.name;t instanceof Re?r=this.includes.functions:t instanceof Ce?r=this.includes.consts:t instanceof ze&&(r=this.includes.structs);const i=r[this.shader]=r[this.shader]||[];if(t){let r=i[t.name];if(r||(r=i[t.name]={node:t,deps:[]},i.push(r),r.src=t.build(this,"source")),t instanceof Re&&e&&i[e.name]&&-1==i[e.name].deps.indexOf(t)&&(i[e.name].deps.push(t),t.includes&&t.includes.length)){let n=0;do{this.include(t.includes[n++],e)}while(n<t.includes.length)}return n&&(r.src=n),t.name}throw new Error("Include not found.")}colorToVectorProperties(t){return t.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(t){return t.replace(/c/g,"v3")}getIncludes(t,e){return this.includes[t][e||this.shader]}getIncludesCode(t,e){let n=this.getIncludes(t,e);if(!n)return"";let r="";n=n.sort(sn);for(let t=0;t<n.length;t++)n[t].src&&(r+=n[t].src+"\n");return r}getConstructorFromLength(t){return en[t-1]}isTypeMatrix(t){return/^m/.test(t)}getTypeLength(t){return"f"===t?1:parseInt(this.colorToVector(t).substr(1))}getTypeFromLength(t){return 1===t?"f":"v"+t}findNode(){for(let t=0;t<arguments.length;t++){const e=arguments[t];if(void 0!==e&&e.isNode)return e}}resolve(){for(let t=0;t<arguments.length;t++){const e=arguments[t];if(void 0!==e){if(e.isNode)return e;if(e.isTexture)switch(e.mapping){case J.CubeReflectionMapping:case J.CubeRefractionMapping:return new Xe(e);case J.CubeUVReflectionMapping:case J.CubeUVRefractionMapping:return new Ze(new Ge(e));default:return new Ge(e)}else{if(e.isVector2)return new Ie(e);if(e.isVector3)return new De(e);if(e.isVector4)return new Fe(e)}}}}format(t,e,n){switch(this.colorToVector(n+" <- "+e)){case"f <- v2":case"f <- v3":case"f <- v4":return t+".x";case"f <- i":case"f <- b":return"float( "+t+" )";case"v2 <- f":return"vec2( "+t+" )";case"v2 <- v3":case"v2 <- v4":return t+".xy";case"v2 <- i":case"v2 <- b":case"v3 <- i":case"v3 <- b":return"vec2( float( "+t+" ) )";case"v3 <- f":return"vec3( "+t+" )";case"v3 <- v2":return"vec3( "+t+", 0.0 )";case"v3 <- v4":return t+".xyz";case"v4 <- f":return"vec4( "+t+" )";case"v4 <- v2":return"vec4( "+t+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+t+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+t+" ) )";case"i <- f":case"i <- b":return"int( "+t+" )";case"i <- v2":case"i <- v3":case"i <- v4":return"int( "+t+".x )";case"b <- f":return"( "+t+" != 0.0 )";case"b <- v2":return"( "+t+" != vec2( 0.0 ) )";case"b <- v3":return"( "+t+" != vec3( 0.0 ) )";case"b <- v4":return"( "+t+" != vec4( 0.0 ) )";case"b <- i":return"( "+t+" != 0 )"}return t}getTypeByFormat(t){return nn[t]||t}getFormatByType(t){return rn[t]||t}getUuid(t,e){return(e=void 0===e||e)&&this.cache&&(t=this.cache+"-"+t),t}getElementByIndex(t){return tn[t]}getIndexByElement(t){return tn.indexOf(t)}isShader(t){return this.shader===t}setShader(t){return this.shader=t,this}mergeDefines(t){for(const e in t)this.defines[e]=t[e];return this.defines}mergeUniform(t){for(const e in t)this.uniforms[e]=t[e];return this.uniforms}getTextureEncodingFromMap(t){let e;return t?t.isTexture?e=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=J.LinearEncoding,e===J.LinearEncoding&&this.context.gamma&&(e=J.GammaEncoding),e}}function sn(t,e){return t.deps.length-e.deps.length}class an extends je{constructor(t,e,n){super("c"),this.value=t instanceof J.Color?t:new J.Color(t||0,e,n)}generateReadonly(t,e,n,r){return t.format("vec3( "+this.r+", "+this.g+", "+this.b+" )",r,e)}copy(t){return super.copy(t),this.value.copy(t),this}toJSON(t){var e=this.getJSONNode(t);return e||((e=this.createJSONNode(t)).r=this.r,e.g=this.g,e.b=this.b,!0===this.readonly&&(e.readonly=!0)),e}}an.prototype.nodeType="Color",Te.addShortcuts(an.prototype,"value",["r","g","b"]);class un extends _e{constructor(t){super("v4"),this.value=t}generate(t){const e=this.value.analyzeAndFlow(t,this.type);let n=e.code+"\n";return t.isShader("vertex")?n+="gl_Position = "+e.result+";":n+="gl_FragColor = "+e.result+";",n}copy(t){return super.copy(t),this.value=t.value,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.value=this.value.toJSON(t).uuid),e}}un.prototype.nodeType="Raw";class cn extends J.ShaderMaterial{constructor(t,e){super(),this.vertex=t||new un(new He(He.PROJECTION)),this.fragment=e||new un(new an(16711680)),this.updaters=[],this.type="NodeMaterial"}get properties(){return this.fragment.properties}get needsUpdate(){return this.needsCompile}set needsUpdate(t){!0===t&&this.version++,this.needsCompile=t}onBeforeCompile(t,e){this.build({renderer:e}),t.defines=this.defines,t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.extensionDerivatives=!0===this.extensions.derivatives,t.extensionFragDepth=!0===this.extensions.fragDepth,t.extensionDrawBuffers=!0===this.extensions.drawBuffers,t.extensionShaderTextureLOD=!0===this.extensions.shaderTextureLOD}customProgramCacheKey(){return this.getHash()}getHash(){let t="{";return t+='"vertex":'+this.vertex.getHash()+",",t+='"fragment":'+this.fragment.getHash(),t+="}",t}updateFrame(t){for(let e=0;e<this.updaters.length;++e)t.updateNode(this.updaters[e])}build(t={}){const e=t.builder||new on;return e.setMaterial(this,t.renderer),e.build(this.vertex,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters,this.fog=e.requires.fog,this.lights=e.requires.lights,this.transparent=e.requires.transparent||this.blending>J.NormalBlending,this}copy(t){const e=this.uuid;for(const e in t)this[e]=t[e];return this.uuid=e,void 0!==t.userData&&(this.userData=JSON.parse(JSON.stringify(t.userData))),this}toJSON(t){if((void 0===t||"string"==typeof t)&&(t={nodes:{}}),t&&!t.materials&&(t.materials={}),!t.materials[this.uuid]){const e={};e.uuid=this.uuid,e.type=this.type,t.materials[e.uuid]=e,""!==this.name&&(e.name=this.name),void 0!==this.size&&(e.size=this.size),void 0!==this.sizeAttenuation&&(e.sizeAttenuation=this.sizeAttenuation),this.blending!==J.NormalBlending&&(e.blending=this.blending),!0===this.flatShading&&(e.flatShading=this.flatShading),this.side!==J.FrontSide&&(e.side=this.side),this.vertexColors!==J.NoColors&&(e.vertexColors=this.vertexColors),this.depthFunc!==J.LessEqualDepth&&(e.depthFunc=this.depthFunc),!1===this.depthTest&&(e.depthTest=this.depthTest),!1===this.depthWrite&&(e.depthWrite=this.depthWrite),1!==this.linewidth&&(e.linewidth=this.linewidth),void 0!==this.dashSize&&(e.dashSize=this.dashSize),void 0!==this.gapSize&&(e.gapSize=this.gapSize),void 0!==this.scale&&(e.scale=this.scale),!0===this.dithering&&(e.dithering=!0),!0===this.wireframe&&(e.wireframe=this.wireframe),this.wireframeLinewidth>1&&(e.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(e.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(e.wireframeLinejoin=this.wireframeLinejoin),this.alphaTest>0&&(e.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(e.premultipliedAlpha=this.premultipliedAlpha),!1===this.visible&&(e.visible=!1),"{}"!==JSON.stringify(this.userData)&&(e.userData=this.userData),e.fog=this.fog,e.lights=this.lights,e.vertex=this.vertex.toJSON(t).uuid,e.fragment=this.fragment.toJSON(t).uuid}return t.material=this.uuid,t}}cn.prototype.isNodeMaterial=!0;class ln extends Ge{constructor(t){super(void 0,t)}getUnique(){return!0}getTexture(t,e){return je.prototype.generate.call(this,t,e,this.getUuid(),"t","renderTexture")}}ln.prototype.nodeType="Screen";class hn extends ge{constructor(){super(),this.name="",this.uuid=J.MathUtils.generateUUID(),this.userData={},this.textureID="renderTexture",this.input=new ln,this.material=new cn,this.needsUpdate=!0}render(){this.needsUpdate&&(this.material.dispose(),this.material.fragment.value=this.input,this.needsUpdate=!1),this.uniforms=this.material.uniforms,super.render(...arguments)}copy(t){return this.input=t.input,this}toJSON(t){if((void 0===t||"string"==typeof t)&&(t={nodes:{}}),t&&!t.passes&&(t.passes={}),!t.passes[this.uuid]){var e={};e.uuid=this.uuid,e.type="NodePass",t.passes[this.uuid]=e,""!==this.name&&(e.name=this.name),"{}"!==JSON.stringify(this.userData)&&(e.userData=this.userData),e.input=this.input.toJSON(t).uuid}return t.pass=this.uuid,t}}(class extends _e{constructor(t,e){super(t),this.value=e}getType(t){return t.getTypeByFormat(this.type)}generate(t,e){const n=t.getVar(this.uuid,this.type);return this.value&&t.isShader("vertex")&&t.addNodeCode(n.name+" = "+this.value.build(t,this.getType(t))+";"),t.format(n.name,this.getType(t),e)}copy(t){return super.copy(t),this.type=t.type,this.value=t.value,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.type=this.type,this.value&&(e.value=this.value.toJSON(t).uuid)),e}}).prototype.nodeType="Var";(class extends _e{constructor(t,e){super(e),this.name=t}getAttributeType(t){return"number"==typeof this.type?t.getConstructorFromLength(this.type):this.type}getType(t){const e=this.getAttributeType(t);return t.getTypeByFormat(e)}generate(t,e){const n=this.getAttributeType(t),r=t.getAttribute(this.name,n),i=t.isShader("vertex")?this.name:r.varying.name;return t.format(i,this.getType(t),e)}copy(t){return super.copy(t),this.type=t.type,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.type=this.type),e}}).prototype.nodeType="Attribute";(class extends je{constructor(t){super("b"),this.value=Boolean(t)}generateReadonly(t,e,n,r){return t.format(this.value,r,e)}copy(t){return super.copy(t),this.value=t.value,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.value=this.value,!0===this.readonly&&(e.readonly=!0)),e}}).prototype.nodeType="Bool";class fn extends je{constructor(t){super("i"),this.value=Math.floor(t||0)}generateReadonly(t,e,n,r){return t.format(this.value,r,e)}copy(t){return super.copy(t),this.value=t.value,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.value=this.value,!0===this.readonly&&(e.readonly=!0)),e}}fn.prototype.nodeType="Int";class dn extends je{constructor(t){super("m3"),this.value=t||new J.Matrix3}get elements(){return this.value.elements}set elements(t){this.value.elements=t}generateReadonly(t,e,n,r){return t.format("mat3( "+this.value.elements.join(", ")+" )",r,e)}copy(t){return super.copy(t),this.value.fromArray(t.elements),this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.elements=this.value.elements.concat()),e}}dn.prototype.nodeType="Matrix3";class pn extends je{constructor(t){super("m4"),this.value=t||new J.Matrix4}get elements(){return this.value.elements}set elements(t){this.value.elements=t}generateReadonly(t,e,n,r){return t.format("mat4( "+this.value.elements.join(", ")+" )",r,e)}copy(t){return super.copy(t),this.scope.value.fromArray(t.elements),this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.elements=this.value.elements.concat()),e}}pn.prototype.nodeType="Matrix4";(class extends Pe{constructor(t){super("v4"),t&&this.setMirror(t)}setMirror(t){this.mirror=t,this.textureMatrix=new pn(this.mirror.material.uniforms.textureMatrix.value),this.localPosition=new He(He.LOCAL),this.uv=new Ke(this.textureMatrix,this.localPosition,Ke.MUL),this.uvResult=new Ke(null,this.uv,Ke.ADD),this.texture=new Ge(this.mirror.material.uniforms.tDiffuse.value,this.uv,null,!0)}generate(t,e){return t.isShader("fragment")?(this.uvResult.a=this.offset,this.texture.uv=this.offset?this.uvResult:this.uv,"sampler2D"===e?this.texture.build(t,e):t.format(this.texture.build(t,this.type),this.type,e)):(console.warn("THREE.ReflectorNode is not compatible with "+t.shader+" shader."),t.format("vec4( 0.0 )",this.type,e))}copy(t){return je.prototype.copy.call(this,t),this.scope.mirror=t.mirror,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.mirror=this.mirror.uuid,this.offset&&(e.offset=this.offset.toJSON(t).uuid)),e}}).prototype.nodeType="Reflector";class vn extends je{constructor(t,e,n){super(n),this.object=t,this.property=e}get value(){return this.object[this.property]}set value(t){this.object[this.property]=t}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.value=this.value,e.property=this.property),e}}vn.prototype.nodeType="Property";(class extends Ge{constructor(t,e,n,r={}){const i=new J.WebGLRenderTarget(t,e,r);super(i.texture),this.input=n,this.clear=void 0===r.clear||r.clear,this.renderTarget=i,this.material=new cn,this.camera=new J.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new J.Scene,this.quad=new J.Mesh(new J.PlaneGeometry(2,2),this.material),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.render=!0}build(t,e,n){const r=new on;return r.nodes=t.nodes,r.updaters=t.updaters,this.material.fragment.value=this.input,this.material.build({builder:r}),super.build(t,e,n)}updateFramesaveTo(t){if(this.saveTo.render=!1,this.saveTo!==this.saveToCurrent){this.saveToMaterial&&this.saveToMaterial.dispose();const t=new cn;t.fragment.value=this,t.build();const e=new J.Scene,n=new J.Mesh(new J.PlaneGeometry(2,2),t);n.frustumCulled=!1,e.add(n),this.saveToScene=e,this.saveToMaterial=t}this.saveToCurrent=this.saveTo,t.renderer.setRenderTarget(this.saveTo.renderTarget),this.saveTo.clear&&t.renderer.clear(),t.renderer.render(this.saveToScene,this.camera)}updateFrame(t){t.renderer?(this.saveTo&&!1===this.saveTo.render&&this.updateFramesaveTo(t),this.render&&(this.material.uniforms.renderTexture&&(this.material.uniforms.renderTexture.value=t.renderTexture),t.renderer.setRenderTarget(this.renderTarget),this.clear&&t.renderer.clear(),t.renderer.render(this.scene,this.camera)),this.saveTo&&!0===this.saveTo.render&&this.updateFramesaveTo(t)):console.warn("RTTNode need a renderer in NodeFrame")}copy(t){return super.copy(t),this.saveTo=t.saveTo,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=super.toJSON(t),this.saveTo&&(e.saveTo=this.saveTo.toJSON(t).uuid)),e}}).prototype.nodeType="RTT";var mn=["color","color2"],gn=["vColor","vColor2"];(class extends Pe{constructor(t){super("v4",{shared:!1}),this.index=t||0}generate(t,e){t.requires.color[this.index]=!0;const n=t.isShader("vertex")?mn[this.index]:gn[this.index];return t.format(n,this.getType(t),e)}copy(t){return super.copy(t),this.index=t.index,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.index=this.index),e}}).prototype.nodeType="Colors";class yn extends Pe{constructor(t,e){super("v3"),this.setScope(t||yn.POSITION),this.setCamera(e)}setCamera(t){this.camera=t,this.updateFrame=void 0!==t?this.onUpdateFrame:void 0}setScope(t){if(this.scope===yn.DEPTH)delete this.near,delete this.far;if(this.scope=t,t===yn.DEPTH){const t=this.camera;this.near=new Ue(t?t.near:1),this.far=new Ue(t?t.far:1200)}}getType(){return this.scope===yn.DEPTH?"f":this.type}getUnique(){switch(this.scope){case yn.DEPTH:case yn.TO_VERTEX:return!0}return!1}getShared(){return this.scope!==yn.POSITION}generate(t,e){let n;switch(this.scope){case yn.POSITION:n="cameraPosition";break;case yn.DEPTH:n=t.include(yn.Nodes.depthColor)+"( "+this.near.build(t,"f")+", "+this.far.build(t,"f")+" )";break;case yn.TO_VERTEX:n="normalize( "+new He(He.WORLD).build(t,"v3")+" - cameraPosition )"}return t.format(n,this.getType(t),e)}onUpdateFrame(){if(this.scope===yn.DEPTH){const t=this.camera;this.near.value=t.near,this.far.value=t.far}}copy(t){if(super.copy(t),this.setScope(t.scope),t.camera&&this.setCamera(t.camera),t.scope===yn.DEPTH)this.near.number=t.near,this.far.number=t.far;return this}toJSON(t){let e=this.getJSONNode(t);if(!e&&(e=this.createJSONNode(t),e.scope=this.scope,this.camera&&(e.camera=this.camera.uuid),this.scope===yn.DEPTH))e.near=this.near.value,e.far=this.far.value;return e}}yn.Nodes={depthColor:new Re("\n\t\tfloat depthColor( float mNear, float mFar ) {\n\n\t\t\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\t\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n\t\t\t#else\n\n\t\t\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\n\t\t\t#endif\n\n\t\t\treturn 1.0 - smoothstep( mNear, mFar, depth );\n\n\t\t}")},yn.POSITION="position",yn.DEPTH="depth",yn.TO_VERTEX="toVertex",yn.prototype.nodeType="Camera";class bn extends Pe{constructor(t){super("v3",{shared:!1}),this.scope=t||bn.TOTAL}generate(t,e){return t.isCache("light")?t.format("reflectedLight.directDiffuse",this.type,e):(console.warn('THREE.LightNode is only compatible in "light" channel.'),t.format("vec3( 0.0 )",this.type,e))}copy(t){return super.copy(t),this.scope=t.scope,this}toJSON(t){var e=this.getJSONNode(t);return e||((e=this.createJSONNode(t)).scope=this.scope),e}}bn.TOTAL="total",bn.prototype.nodeType="Light";class xn extends Ie{constructor(){super(),this.size=new J.Vector2}updateFrame(t){if(t.renderer){t.renderer.getSize(this.size);const e=t.renderer.getPixelRatio();this.x=this.size.width*e,this.y=this.size.height*e}else console.warn("ResolutionNode need a renderer in NodeFrame")}copy(t){return super.copy(t),this.renderer=t.renderer,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.renderer=this.renderer.uuid),e}}xn.prototype.nodeType="Resolution";(class extends Pe{constructor(t){super("v2"),this.resolution=t||new xn}generate(t,e){let n;return t.isShader("fragment")?n="( gl_FragCoord.xy / "+this.resolution.build(t,"v2")+")":(console.warn("THREE.ScreenUVNode is not compatible with "+t.shader+" shader."),n="vec2( 0.0 )"),t.format(n,this.getType(t),e)}copy(t){return super.copy(t),this.resolution=t.resolution,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.resolution=this.resolution.toJSON(t).uuid),e}}).prototype.nodeType="ScreenUV";class wn extends Pe{constructor(t,e,n,r,i){super(),this.a=t,this.b=e,this.op=n,this.ifNode=r,this.elseNode=i}getType(t){if(this.ifNode){const e=this.ifNode.getType(t),n=this.elseNode.getType(t);return t.getTypeLength(n)>t.getTypeLength(e)?n:e}return"b"}getCondType(t){return t.getTypeLength(this.b.getType(t))>t.getTypeLength(this.a.getType(t))?this.b.getType(t):this.a.getType(t)}generate(t,e){const n=this.getType(t),r=this.getCondType(t),i=this.a.build(t,r),o=this.b.build(t,r);let s;if(this.ifNode){const e=this.ifNode.build(t,n),r=this.elseNode.build(t,n);s="( "+[i,this.op,o,"?",e,":",r].join(" ")+" )"}else s="( "+i+" "+this.op+" "+o+" )";return t.format(s,this.getType(t),e)}copy(t){return super.copy(t),this.a=t.a,this.b=t.b,this.op=t.op,this.ifNode=t.ifNode,this.elseNode=t.elseNode,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.a=this.a.toJSON(t).uuid,e.b=this.b.toJSON(t).uuid,e.op=this.op,e.ifNode&&(e.ifNode=this.ifNode.toJSON(t).uuid),e.elseNode&&(e.elseNode=this.elseNode.toJSON(t).uuid)),e}}wn.EQUAL="==",wn.NOT_EQUAL="!=",wn.GREATER=">",wn.GREATER_EQUAL=">=",wn.LESS="<",wn.LESS_EQUAL="<=",wn.AND="&&",wn.OR="||",wn.prototype.nodeType="Cond";const Sn="\nvec3 mod289( vec3 x ) {\n\n\treturn x - floor( x * ( 1.0 / 289.0 ) ) * 289.0;\n\n}\n\nvec4 mod289( vec4 x ) {\n\n\treturn x - floor( x * ( 1.0 / 289.0 ) ) * 289.0;\n\n}\n\nvec4 permute( vec4 x ) {\n\n\treturn mod289( ( ( x * 34.0 ) + 1.0 ) * x );\n\n}\n\nvec4 taylorInvSqrt( vec4 r ) {\n\n\treturn 1.79284291400159 - 0.85373472095314 * r;\n\n}\n\nvec2 fade( vec2 t ) {\n\n\treturn t * t * t * ( t * ( t * 6.0 - 15.0 ) + 10.0 );\n\n}\n\nvec3 fade( vec3 t ) {\n\n\treturn t * t * t * ( t * ( t * 6.0 - 15.0 ) + 10.0 );\n\n}\n".trim(),On="\nfloat noise2d( vec2 P, float amplitude, float pivot ) {\n\n\tvec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n\tvec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n\tPi = mod289(Pi); // To avoid truncation effects in permutation\n\tvec4 ix = Pi.xzxz;\n\tvec4 iy = Pi.yyww;\n\tvec4 fx = Pf.xzxz;\n\tvec4 fy = Pf.yyww;\n\n\tvec4 i = permute(permute(ix) + iy);\n\n\tvec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;\n\tvec4 gy = abs(gx) - 0.5 ;\n\tvec4 tx = floor(gx + 0.5);\n\tgx = gx - tx;\n\n\tvec2 g00 = vec2(gx.x,gy.x);\n\tvec2 g10 = vec2(gx.y,gy.y);\n\tvec2 g01 = vec2(gx.z,gy.z);\n\tvec2 g11 = vec2(gx.w,gy.w);\n\n\tvec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));\n\tg00 *= norm.x;\n\tg01 *= norm.y;\n\tg10 *= norm.z;\n\tg11 *= norm.w;\n\n\tfloat n00 = dot(g00, vec2(fx.x, fy.x));\n\tfloat n10 = dot(g10, vec2(fx.y, fy.y));\n\tfloat n01 = dot(g01, vec2(fx.z, fy.z));\n\tfloat n11 = dot(g11, vec2(fx.w, fy.w));\n\n\tvec2 fade_xy = fade(Pf.xy);\n\tvec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n\tfloat n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n\treturn 2.3 * n_xy * amplitude + pivot;\n\n}\n".trim();class Tn extends Pe{constructor(t=new Ve,e=new Ue(1),n=new Ue(0)){super("f"),this.uv=t,this.amplitude=e,this.pivot=n}generate(t,e){const n=new Ye(Tn.Nodes.noise2d,[this.uv,this.amplitude,this.pivot]);return t.format(n.generate(t,e),this.getType(t),e)}copy(t){super.copy(t),this.uv=t.uv,this.amplitude=t.amplitude,this.pivot=t.pivot}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.uv=this.uv.toJSON(t).uuid,e.amplitude=this.amplitude.toJSON(t).uuid,e.pivot=this.pivot.toJSON(t).uuid),e}}Tn.prototype.nodeType="Noise2D",Tn.Nodes=function(){const t=new Re(Sn),e=new Re(On);return e.includes=[t],{noiseCommon:t,noise2d:e}}();const Nn="\nfloat noise3d( vec3 P, float amplitude, float pivot ) {\n\n\tvec3 Pi0 = floor(P); // Integer part for indexing\n\tvec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n\tPi0 = mod289(Pi0);\n\tPi1 = mod289(Pi1);\n\tvec3 Pf0 = fract(P); // Fractional part for interpolation\n\tvec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n\tvec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n\tvec4 iy = vec4(Pi0.yy, Pi1.yy);\n\tvec4 iz0 = Pi0.zzzz;\n\tvec4 iz1 = Pi1.zzzz;\n\n\tvec4 ixy = permute(permute(ix) + iy);\n\tvec4 ixy0 = permute(ixy + iz0);\n\tvec4 ixy1 = permute(ixy + iz1);\n\n\tvec4 gx0 = ixy0 * (1.0 / 7.0);\n\tvec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n\tgx0 = fract(gx0);\n\tvec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n\tvec4 sz0 = step(gz0, vec4(0.0));\n\tgx0 -= sz0 * (step(0.0, gx0) - 0.5);\n\tgy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n\tvec4 gx1 = ixy1 * (1.0 / 7.0);\n\tvec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n\tgx1 = fract(gx1);\n\tvec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n\tvec4 sz1 = step(gz1, vec4(0.0));\n\tgx1 -= sz1 * (step(0.0, gx1) - 0.5);\n\tgy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n\tvec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n\tvec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n\tvec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n\tvec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n\tvec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n\tvec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n\tvec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n\tvec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n\tvec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n\tg000 *= norm0.x;\n\tg010 *= norm0.y;\n\tg100 *= norm0.z;\n\tg110 *= norm0.w;\n\tvec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n\tg001 *= norm1.x;\n\tg011 *= norm1.y;\n\tg101 *= norm1.z;\n\tg111 *= norm1.w;\n\n\tfloat n000 = dot(g000, Pf0);\n\tfloat n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n\tfloat n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n\tfloat n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n\tfloat n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n\tfloat n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n\tfloat n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n\tfloat n111 = dot(g111, Pf1);\n\n\tvec3 fade_xyz = fade(Pf0);\n\tvec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n\tvec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n\tfloat n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n\treturn 2.2 * n_xyz * amplitude + pivot;\n\n}\n".trim();class _n extends Pe{constructor(t=new He,e=new Ue(1),n=new Ue(0)){super("f"),this.position=t,this.amplitude=e,this.pivot=n}generate(t,e){const n=new Ye(_n.Nodes.noise3d,[this.position,this.amplitude,this.pivot]);return t.format(n.generate(t,e),this.getType(t),e)}copy(t){super.copy(t),this.position=t.position,this.amplitude=t.amplitude,this.pivot=t.pivot}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.position=this.position.toJSON(t).uuid,e.amplitude=this.amplitude.toJSON(t).uuid,e.pivot=this.pivot.toJSON(t).uuid),e}}_n.prototype.nodeType="Noise3D",_n.Nodes=function(){const t=new Re(Nn);return t.includes=[Tn.Nodes.noiseCommon],{noise3d:t}}();class Pn extends Pe{constructor(t){super("f"),this.uv=t||new Ve}generate(t,e){const n=t.include(Pn.Nodes.checker);return t.format(n+"( "+this.uv.build(t,"v2")+" )",this.getType(t),e)}copy(t){return super.copy(t),this.uv=t.uv,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.uv=this.uv.toJSON(t).uuid),e}}Pn.Nodes={checker:new Re("\n\t\tfloat checker( vec2 uv ) {\n\n\t\t\tfloat cx = floor( uv.x );\n\t\t\tfloat cy = floor( uv.y );\n\t\t\tfloat result = mod( cx + cy, 2.0 );\n\n\t\t\treturn sign( result );\n\n\t\t}")},Pn.prototype.nodeType="Noise";const En="\nfloat fractal3d( vec3 p, float amplitude, int octaves, float lacunarity, float diminish ) {\n\n\tfloat result = 0.0;\n\n\tfor (int i = 0;  i < octaves; ++i) {\n\n\t\tresult += noise3d(p, amplitude, 0.0);\n\t\tamplitude *= diminish;\n\t\tp *= lacunarity;\n\n\t}\n\n\treturn result;\n\n}\n".trim();class Ln extends Pe{constructor(t=new He,e=new Ue(1),n=3,r=2,i=.5){super("f"),this.position=t,this.amplitude=e,this.octaves=new fn(n).setReadonly(!0),this.lacunarity=new Ue(r).setReadonly(!0),this.diminish=new Ue(i).setReadonly(!0)}generate(t,e){const n=new Ye(Ln.Nodes.fractal3d,[this.position,this.amplitude,this.octaves,this.lacunarity,this.diminish]);return t.format(n.generate(t,e),this.getType(t),e)}copy(t){super.copy(t),this.position=t.position,this.amplitude=t.amplitude,this.octaves=t.octaves,this.lacunarity=t.lacunarity,this.diminish=t.diminish}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.position=this.position.toJSON(t).uuid,e.amplitude=this.amplitude.toJSON(t).uuid,e.octaves=this.octaves.toJSON(t).uuid,e.lacunarity=this.lacunarity.toJSON(t).uuid,e.diminish=this.diminish.toJSON(t).uuid),e}}Ln.prototype.nodeType="Fractal3D",Ln.Nodes=function(){const t=new Re(En);return t.includes=[_n.Nodes.noise3d],{fractal3d:t}}();class Rn extends Pe{constructor(t,e){super("v3"),this.value=t,this.scale=e||new Ie(1,1)}generate(t,e){if(t.isShader("fragment")){const n=t.include(Rn.Nodes.perturbNormal2Arb);this.normal=this.normal||new We,this.position=this.position||new He(He.VIEW),this.uv=this.uv||new Ve;let r=this.scale.build(t,"v2");return t.material.side===J.BackSide&&(r="-"+r),t.format(n+"( -"+this.position.build(t,"v3")+", "+this.normal.build(t,"v3")+", "+this.value.build(t,"v3")+", "+this.uv.build(t,"v2")+", "+r+" )",this.getType(t),e)}return console.warn("THREE.NormalMapNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}copy(t){return super.copy(t),this.value=t.value,this.scale=t.scale,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.value=this.value.toJSON(t).uuid,e.scale=this.scale.toJSON(t).uuid),e}}Rn.Nodes={perturbNormal2Arb:new Re("vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 map, vec2 vUv, vec2 normalScale ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = map * 2.0 - 1.0;\n\n\t\tmapN.xy *= normalScale;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t// Workaround for Adreno GPUs gl_FrontFacing bug. See #15850 and #10331\n\n\t\t\tif ( dot( cross( S, T ), N ) < 0.0 ) mapN.xy *= - 1.0;\n\n\t\t#else\n\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}",null,{derivatives:!0})},Rn.prototype.nodeType="NormalMap";class Mn extends Pe{constructor(t,e){super("v3"),this.value=t,this.scale=e||new Ue(1),this.toNormalMap=!1}generate(t,e){if(t.isShader("fragment")){if(this.toNormalMap){const n=t.include(Mn.Nodes.bumpToNormal);return t.format(n+"( "+this.value.build(t,"sampler2D")+", "+this.value.uv.build(t,"v2")+", "+this.scale.build(t,"f")+" )",this.getType(t),e)}{const n=t.include(Mn.Nodes.dHdxy_fwd),r=t.include(Mn.Nodes.perturbNormalArb);this.normal=this.normal||new We,this.position=this.position||new He(He.VIEW);const i=n+"( "+this.value.build(t,"sampler2D")+", "+this.value.uv.build(t,"v2")+", "+this.scale.build(t,"f")+" )";return t.format(r+"( -"+this.position.build(t,"v3")+", "+this.normal.build(t,"v3")+", "+i+" )",this.getType(t),e)}}return console.warn("THREE.BumpMapNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}copy(t){return super.copy(t),this.value=t.value,this.scale=t.scale,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.value=this.value.toJSON(t).uuid,e.scale=this.scale.toJSON(t).uuid),e}}Mn.Nodes=function(){const t=new Re("\n\n\t\tvec2 dHdxy_fwd( sampler2D bumpMap, vec2 vUv, float bumpScale ) {\n\n\t\t\tvec2 dSTdx = dFdx( vUv );\n\t\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\t\treturn vec2( dBx, dBy );\n\n\t\t}",null,{derivatives:!0});return{dHdxy_fwd:t,perturbNormalArb:new Re("\n\n\t\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\t\tvec3 vN = surf_norm; // normalized\n\n\t\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\n\t\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t\t}",[t],{derivatives:!0}),bumpToNormal:new Re("\n\t\tvec3 bumpToNormal( sampler2D bumpMap, vec2 uv, float scale ) {\n\n\t\t\tvec2 dSTdx = dFdx( uv );\n\t\t\tvec2 dSTdy = dFdy( uv );\n\n\t\t\tfloat Hll = texture2D( bumpMap, uv ).x;\n\t\t\tfloat dBx = texture2D( bumpMap, uv + dSTdx ).x - Hll;\n\t\t\tfloat dBy = texture2D( bumpMap, uv + dSTdy ).x - Hll;\n\n\t\t\treturn vec3( .5 - ( dBx * scale ), .5 - ( dBy * scale ), 1.0 );\n\n\t\t}",null,{derivatives:!0})}}(),Mn.prototype.nodeType="BumpMap",Mn.prototype.hashProperties=["toNormalMap"];(class extends _e{constructor(t,e){super(),this.code=t,this.value=e}getType(t){return this.value?this.value.getType(t):t.isShader("fragment")?"f":"void"}generate(t,e){const n=this.code.build(t,e)+";";return t.addNodeCode(n),t.isShader("vertex")?this.value?this.value.build(t,e):void 0:this.value?this.value.build(t,e):t.format("0.0","f",e)}copy(t){return super.copy(t),this.code=t.code,this.value=t.value,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.code=this.code.toJSON(t).uuid,this.value&&(e.value=this.value.toJSON(t).uuid)),e}}).prototype.nodeType="Bypass";const Cn=Te.elements;(class extends Pe{constructor(t,e,n,r){super("f"),this.x=t,this.y=e,this.z=n,this.w=r}getNumElements(){let t=Cn.length;for(;t--;)if(void 0!==this[Cn[t]]){++t;break}return Math.max(t,2)}getType(t){return t.getTypeFromLength(this.getNumElements())}generate(t,e){const n=this.getType(t),r=this.getNumElements(),i=[];for(let e=0;e<r;e++){const n=this[Cn[e]];i.push(n?n.build(t,"f"):"0.0")}const o=(r>1?t.getConstructorFromLength(r):"")+"( "+i.join(", ")+" )";return t.format(o,n,e)}copy(t){super.copy(t);for(const e in t.inputs)this[e]=t.inputs[e];return this}toJSON(t){let e=this.getJSONNode(t);if(!e){e=this.createJSONNode(t),e.inputs={};const n=this.getNumElements();for(let r=0;r<n;r++){const n=this[Cn[r]];n&&(e.inputs[Cn[r]]=n.toJSON(t).uuid)}}return e}}).prototype.nodeType="Join";class An extends _e{constructor(t,e){super(),this.node=t,this.components=e||"x"}getType(t){return t.getTypeFromLength(this.components.length)}generate(t,e){const n=this.node.getType(t),r=t.getTypeLength(n)-1;let i=this.node.build(t,n);if(r>0){let n=0;const o=t.colorToVectorProperties(this.components);let s;const a=o.length;for(s=0;s<a;s++)n=Math.max(n,t.getIndexByElement(o.charAt(s)));for(n>r&&(n=r),i+=".",s=0;s<a;s++){let e=t.getIndexByElement(o.charAt(s));e>n&&(e=n),i+=t.getElementByIndex(e)}return t.format(i,this.getType(t),e)}return t.format(i,n,e)}copy(t){return super.copy(t),this.node=t.node,this.components=t.components,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.node=this.node.toJSON(t).uuid,e.components=this.components),e}}An.prototype.nodeType="Switch";const kn="\nfloat remap( float value, float inLow, float inHigh, float outLow, float outHigh ) {\n\n\tfloat x = ( value - inLow ) / ( inHigh - inLow );\n\treturn outLow + ( outHigh - outLow ) * x;\n\n}\n\nvec2 remap( vec2 value, vec2 inLow, vec2 inHigh, vec2 outLow, vec2 outHigh ) {\n\n\treturn vec2(\n\t\tremap( value.x, inLow.x, inHigh.x, outLow.x, outHigh.x ),\n\t\tremap( value.y, inLow.y, inHigh.y, outLow.y, outHigh.y )\n\t);\n\n}\n\nvec2 remap( vec2 value, float inLow, float inHigh, float outLow, float outHigh ) {\n\n\treturn vec2(\n\t\tremap( value.x, inLow, inHigh, outLow, outHigh ),\n\t\tremap( value.y, inLow, inHigh, outLow, outHigh )\n\t);\n\n}\n\nvec3 remap( vec3 value, vec3 inLow, vec3 inHigh, vec3 outLow, vec3 outHigh ) {\n\n\treturn vec3(\n\t\tremap( value.x, inLow.x, inHigh.x, outLow.x, outHigh.x ),\n\t\tremap( value.y, inLow.y, inHigh.y, outLow.y, outHigh.y ),\n\t\tremap( value.z, inLow.z, inHigh.z, outLow.z, outHigh.z )\n\t);\n\n}\n\nvec3 remap( vec3 value, float inLow, float inHigh, float outLow, float outHigh ) {\n\n\treturn vec3(\n\t\tremap( value.x, inLow, inHigh, outLow, outHigh ),\n\t\tremap( value.y, inLow, inHigh, outLow, outHigh ),\n\t\tremap( value.z, inLow, inHigh, outLow, outHigh )\n\t);\n\n}\n\nvec4 remap( vec4 value, vec4 inLow, vec4 inHigh, vec4 outLow, vec4 outHigh ) {\n\n\treturn vec4(\n\t\tremap( value.x, inLow.x, inHigh.x, outLow.x, outHigh.x ),\n\t\tremap( value.y, inLow.y, inHigh.y, outLow.y, outHigh.y ),\n\t\tremap( value.z, inLow.z, inHigh.z, outLow.z, outHigh.z ),\n\t\tremap( value.w, inLow.w, inHigh.w, outLow.w, outHigh.w )\n\t);\n\n}\n\nvec4 remap( vec4 value, float inLow, float inHigh, float outLow, float outHigh ) {\n\n\treturn vec4(\n\t\tremap( value.x, inLow, inHigh, outLow, outHigh ),\n\t\tremap( value.y, inLow, inHigh, outLow, outHigh ),\n\t\tremap( value.z, inLow, inHigh, outLow, outHigh ),\n\t\tremap( value.w, inLow, inHigh, outLow, outHigh )\n\t);\n\n}\n".trim();class zn extends Pe{constructor(t,e,n,r,i){super("f"),this.value=t,this.inLow=e,this.inHigh=n,this.outLow=r,this.outHigh=i}generate(t,e){const n=t.include(zn.Nodes.remap);return t.format(n+"( "+[this.value.build(t),this.inLow.build(t),this.inHigh.build(t),this.outLow.build(t),this.outHigh.build(t)].join(", ")+" )",this.getType(t),e)}getType(t){return this.value.getType(t)}copy(t){super.copy(t),this.value=t.value,this.inLow=t.inLow,this.inHigh=t.inHigh,this.outLow=t.outLow,this.outHigh=t.outHigh}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.value=this.value.toJSON(t).uuid,e.inLow=this.inLow.toJSON(t).uuid,e.inHigh=this.inHigh.toJSON(t).uuid,e.outLow=this.outLow.toJSON(t).uuid,e.outHigh=this.outHigh.toJSON(t).uuid),e}}zn.prototype.nodeType="Remap",zn.Nodes={remap:new Re(kn)};class jn extends Ue{constructor(t,e,n){super(),this.scale=void 0!==t?t:1,this.scope=e||jn.GLOBAL,this.timeScale=void 0!==n?n:void 0!==t}getReadonly(){return!1}getUnique(){return this.timeScale&&(this.scope===jn.GLOBAL||this.scope===jn.DELTA)}updateFrame(t){const e=this.timeScale?this.scale:1;switch(this.scope){case jn.LOCAL:this.value+=t.delta*e;break;case jn.DELTA:this.value=t.delta*e;break;default:this.value=t.time*e}}copy(t){return super.copy(t),this.scope=t.scope,this.scale=t.scale,this.timeScale=t.timeScale,this}toJSON(t){const e=super.toJSON(t);return e.scope=this.scope,e.scale=this.scale,e.timeScale=this.timeScale,e}}jn.GLOBAL="global",jn.LOCAL="local",jn.DELTA="delta",jn.prototype.nodeType="Timer",Ne.addKeyword("time",(function(){return new jn}));(class extends De{constructor(t,e){super(),this.params={},this.velocity=new J.Vector3,this.setTarget(t),this.setParams(e)}getReadonly(){return!1}setParams(t){if("elastic"===this.params.type)delete this.moment,delete this.speed,delete this.springVelocity,delete this.lastVelocity;if(this.params=t||{},"elastic"===this.params.type)this.moment=new J.Vector3,this.speed=new J.Vector3,this.springVelocity=new J.Vector3,this.lastVelocity=new J.Vector3}setTarget(t){this.target&&(delete this.position,delete this.oldPosition),this.target=t,t&&(this.position=t.getWorldPosition(this.position||new J.Vector3),this.oldPosition=this.position.clone())}updateFrameVelocity(){this.target&&(this.position=this.target.getWorldPosition(this.position||new J.Vector3),this.velocity.subVectors(this.position,this.oldPosition),this.oldPosition.copy(this.position))}updateFrame(t){if(this.updateFrameVelocity(t),"elastic"===this.params.type){const e=t.delta*(this.params.fps||60),n=Math.pow(this.params.spring,e),r=Math.pow(this.params.damping,e);this.velocity.multiplyScalar(Math.exp(-this.params.damping*e)),this.velocity.add(this.springVelocity),this.velocity.add(this.speed.multiplyScalar(r).multiplyScalar(1-n)),this.speed.subVectors(this.velocity,this.lastVelocity),this.springVelocity.add(this.speed),this.springVelocity.multiplyScalar(n),this.moment.add(this.springVelocity),this.moment.multiplyScalar(r),this.lastVelocity.copy(this.velocity),this.value.copy(this.moment)}else this.value.copy(this.velocity)}copy(t){return super.copy(t),t.target&&this.setTarget(t.target),this.setParams(t.params),this}toJSON(t){const e=super.toJSON(t);return this.target&&(e.target=this.target.uuid),e.params=JSON.parse(JSON.stringify(this.params)),e}}).prototype.nodeType="Velocity";(class extends Be{constructor(t,e){super("( uvTransform * vec3( uvNode, 1 ) ).xy","vec2"),this.uv=t||new Ve,this.position=e||new dn}generate(t,e){return this.keywords.uvNode=this.uv,this.keywords.uvTransform=this.position,super.generate(t,e)}setUvTransform(t,e,n,r,i,o,s){o=void 0!==o?o:.5,s=void 0!==s?s:.5,this.position.value.setUvTransform(t,e,n,r,i,o,s)}copy(t){return super.copy(t),this.uv=t.uv,this.position=t.position,this}toJSON(t){var e=this.getJSONNode(t);return e||((e=this.createJSONNode(t)).uv=this.uv.toJSON(t).uuid,e.position=this.position.toJSON(t).uuid),e}}).prototype.nodeType="UVTransform";class In extends Ue{constructor(t){super(),this.texture=t,this.maxMIPLevel=0}get value(){if(0===this.maxMIPLevel){var t=this.texture.value.image;Array.isArray(t)&&(t=t[0]),this.maxMIPLevel=void 0!==t?Math.log(Math.max(t.width,t.height))*Math.LOG2E:0}return this.maxMIPLevel}set value(t){}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.texture=this.texture.uuid),e}}In.prototype.nodeType="MaxMIPLevel";class Dn extends Pe{constructor(t,e){super("f"),this.roughness=t,this.texture=e,this.maxMIPLevel=void 0}setTexture(t){return this.texture=t,this}generate(t,e){if(t.isShader("fragment")){this.maxMIPLevel=this.maxMIPLevel||new In,this.maxMIPLevel.texture=this.texture;const n=t.include(Dn.Nodes.getSpecularMIPLevel);return t.format(n+"( "+this.roughness.build(t,"f")+", "+this.maxMIPLevel.build(t,"f")+" )",this.type,e)}return console.warn("THREE.SpecularMIPLevelNode is not compatible with "+t.shader+" shader."),t.format("0.0",this.type,e)}copy(t){return super.copy(t),this.texture=t.texture,this.roughness=t.roughness,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.texture=this.texture,e.roughness=this.roughness),e}}Dn.Nodes={getSpecularMIPLevel:new Re("\n\n\t\tfloat getSpecularMIPLevel( const in float roughness, const in float maxMIPLevelScalar ) {\n\n\t\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\n\t\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\n\t\t}")},Dn.prototype.nodeType="SpecularMIPLevel";(class extends Pe{constructor(t){super(),this.slots=t||{}}getType(t,e){return e}generate(t,e){return this.slots[t.slot]?this.slots[t.slot].build(t,e):t.format("0.0","f",e)}copy(t){super.copy(t);for(const e in t.slots)this.slots[e]=t.slots[e];return this}toJSON(t){let e=this.getJSONNode(t);if(!e){e=this.createJSONNode(t),e.slots={};for(const n in this.slots){const r=this.slots[n];r&&(e.slots[n]=r.toJSON(t).uuid)}}return e}}).prototype.nodeType="SubSlot";class Fn extends Pe{constructor(t,e,n,r){super("v4"),this.value=t,this.uv=e||new Ve,this.radius=n||new Ie(1,1),this.size=r,this.blurX=!0,this.blurY=!0,this.horizontal=new Ue(1/64),this.vertical=new Ue(1/64)}updateFrame(){if(this.size)this.horizontal.value=this.radius.x/this.size.x,this.vertical.value=this.radius.y/this.size.y;else if(this.value.value&&this.value.value.image){const t=this.value.value.image;this.horizontal.value=this.radius.x/t.width,this.vertical.value=this.radius.y/t.height}}generate(t,e){if(t.isShader("fragment")){const n=[];let r;const i=t.include(Fn.Nodes.blurX),o=t.include(Fn.Nodes.blurY);return this.blurX&&n.push(i+"( "+this.value.build(t,"sampler2D")+", "+this.uv.build(t,"v2")+", "+this.horizontal.build(t,"f")+" )"),this.blurY&&n.push(o+"( "+this.value.build(t,"sampler2D")+", "+this.uv.build(t,"v2")+", "+this.vertical.build(t,"f")+" )"),r=2==n.length?"( "+n.join(" + ")+" / 2.0 )":n.length?"( "+n[0]+" )":"vec4( 0.0 )",t.format(r,this.getType(t),e)}return console.warn("THREE.BlurNode is not compatible with "+t.shader+" shader."),t.format("vec4( 0.0 )",this.getType(t),e)}copy(t){return super.copy(t),this.value=t.value,this.uv=t.uv,this.radius=t.radius,void 0!==t.size&&(this.size=new J.Vector2(t.size.x,t.size.y)),this.blurX=t.blurX,this.blurY=t.blurY,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.value=this.value.toJSON(t).uuid,e.uv=this.uv.toJSON(t).uuid,e.radius=this.radius.toJSON(t).uuid,this.size&&(e.size={x:this.size.x,y:this.size.y}),e.blurX=this.blurX,e.blurY=this.blurY),e}}Fn.Nodes={blurX:new Re("\n\t\tvec4 blurX( sampler2D tex, vec2 uv, float s ) {\n\t\t\tvec4 sum = vec4( 0.0 );\n\t\t\tsum += texture2D( tex, vec2( uv.x - 4.0 * s, uv.y ) ) * 0.051;\n\t\t\tsum += texture2D( tex, vec2( uv.x - 3.0 * s, uv.y ) ) * 0.0918;\n\t\t\tsum += texture2D( tex, vec2( uv.x - 2.0 * s, uv.y ) ) * 0.12245;\n\t\t\tsum += texture2D( tex, vec2( uv.x - 1.0 * s, uv.y ) ) * 0.1531;\n\t\t\tsum += texture2D( tex, vec2( uv.x, uv.y ) ) * 0.1633;\n\t\t\tsum += texture2D( tex, vec2( uv.x + 1.0 * s, uv.y ) ) * 0.1531;\n\t\t\tsum += texture2D( tex, vec2( uv.x + 2.0 * s, uv.y ) ) * 0.12245;\n\t\t\tsum += texture2D( tex, vec2( uv.x + 3.0 * s, uv.y ) ) * 0.0918;\n\t\t\tsum += texture2D( tex, vec2( uv.x + 4.0 * s, uv.y ) ) * 0.051;\n\t\t\treturn sum * .667;\n\t\t}"),blurY:new Re("\n\t\tvec4 blurY( sampler2D tex, vec2 uv, float s ) {\n\t\t\tvec4 sum = vec4( 0.0 );\n\t\t\tsum += texture2D( tex, vec2( uv.x, uv.y - 4.0 * s ) ) * 0.051;\n\t\t\tsum += texture2D( tex, vec2( uv.x, uv.y - 3.0 * s ) ) * 0.0918;\n\t\t\tsum += texture2D( tex, vec2( uv.x, uv.y - 2.0 * s ) ) * 0.12245;\n\t\t\tsum += texture2D( tex, vec2( uv.x, uv.y - 1.0 * s ) ) * 0.1531;\n\t\t\tsum += texture2D( tex, vec2( uv.x, uv.y ) ) * 0.1633;\n\t\t\tsum += texture2D( tex, vec2( uv.x, uv.y + 1.0 * s ) ) * 0.1531;\n\t\t\tsum += texture2D( tex, vec2( uv.x, uv.y + 2.0 * s ) ) * 0.12245;\n\t\t\tsum += texture2D( tex, vec2( uv.x, uv.y + 3.0 * s ) ) * 0.0918;\n\t\t\tsum += texture2D( tex, vec2( uv.x, uv.y + 4.0 * s ) ) * 0.051;\n\t\t\treturn sum * .667;\n\t\t}")},Fn.prototype.nodeType="Blur",Fn.prototype.hashProperties=["blurX","blurY"];class Vn extends Pe{constructor(t){super("f"),this.rgb=t}generate(t,e){const n=t.include(Vn.Nodes.luminance);return t.format(n+"( "+this.rgb.build(t,"v3")+" )",this.getType(t),e)}copy(t){return super.copy(t),this.rgb=t.rgb,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.rgb=this.rgb.toJSON(t).uuid),e}}Vn.Nodes=function(){const t=new Ce("vec3 LUMA vec3( 0.2125, 0.7154, 0.0721 )");return{LUMA:t,luminance:new Re("\n\n\t\tfloat luminance( vec3 rgb ) {\n\n\t\t\treturn dot( rgb, LUMA );\n\n\t\t}",[t])}}(),Vn.prototype.nodeType="Luminance";class Un extends Pe{constructor(t,e,n){super("v3"),this.rgb=t,this.adjustment=e,this.method=n||Un.SATURATION}generate(t,e){const n=this.rgb.build(t,"v3"),r=this.adjustment.build(t,"f");switch(this.method){case Un.BRIGHTNESS:return t.format("( "+n+" + "+r+" )",this.getType(t),e);case Un.CONTRAST:return t.format("( "+n+" * "+r+" )",this.getType(t),e)}const i=t.include(Un.Nodes[this.method]);return t.format(i+"( "+n+", "+r+" )",this.getType(t),e)}copy(t){return super.copy(t),this.rgb=t.rgb,this.adjustment=t.adjustment,this.method=t.method,this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.rgb=this.rgb.toJSON(t).uuid,e.adjustment=this.adjustment.toJSON(t).uuid,e.method=this.method),e}}Un.Nodes={hue:new Re("\n\t\tvec3 hue(vec3 rgb, float adjustment) {\n\n\t\t\tconst mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.595716, -0.274453, -0.321263, 0.211456, -0.522591, 0.311135);\n\t\t\tconst mat3 YIQtoRGB = mat3(1.0, 0.9563, 0.6210, 1.0, -0.2721, -0.6474, 1.0, -1.107, 1.7046);\n\n\t\t\tvec3 yiq = RGBtoYIQ * rgb;\n\n\t\t\tfloat hue = atan(yiq.z, yiq.y) + adjustment;\n\t\t\tfloat chroma = sqrt(yiq.z * yiq.z + yiq.y * yiq.y);\n\n\t\t\treturn YIQtoRGB * vec3(yiq.x, chroma * cos(hue), chroma * sin(hue));\n\n\t\t}"),saturation:new Re("\n\t\tvec3 saturation(vec3 rgb, float adjustment) {\n\n\t\t\tvec3 intensity = vec3( luminance( rgb ) );\n\n\t\t\treturn mix( intensity, rgb, adjustment );\n\n\t\t}",[Vn.Nodes.luminance]),vibrance:new Re("\n\n\t\tvec3 vibrance(vec3 rgb, float adjustment) {\n\n\t\t\tfloat average = (rgb.r + rgb.g + rgb.b) / 3.0;\n\n\t\t\tfloat mx = max(rgb.r, max(rgb.g, rgb.b));\n\t\t\tfloat amt = (mx - average) * (-3.0 * adjustment);\n\n\t\t\treturn mix(rgb.rgb, vec3(mx), amt);\n\n\t\t}")},Un.SATURATION="saturation",Un.HUE="hue",Un.VIBRANCE="vibrance",Un.BRIGHTNESS="brightness",Un.CONTRAST="contrast",Un.prototype.nodeType="ColorAdjustment",Un.prototype.hashProperties=["method"];class Bn extends _e{constructor(){super(),this.color=new an(16777215)}generate(t){let e;if(t.isShader("vertex")){const n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0,r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","#include <skinnormal_vertex>","#include <defaultnormal_vertex>"];r.push("#include <begin_vertex>"),n&&r.push(n.code,n.result?"transformed = "+n.result+";":""),r.push("#include <morphtarget_vertex>","#include <skinning_vertex>","#include <project_vertex>","#include <logdepthbuf_vertex>","#include <worldpos_vertex>","#include <clipping_planes_vertex>","#include <fog_vertex>"),e=r.join("\n")}else{this.color.analyze(t,{slot:"color"}),this.alpha&&this.alpha.analyze(t),this.mask&&this.mask.analyze(t);const n=this.color.flow(t,"c",{slot:"color"}),r=this.alpha?this.alpha.flow(t,"f"):void 0,i=this.mask?this.mask.flow(t,"b"):void 0;t.requires.transparent=void 0!==r;const o=[n.code];i&&o.push(i.code,"if ( ! "+i.result+" ) discard;"),r&&o.push(r.code,"#ifdef ALPHATEST"," if ( "+r.result+" <= ALPHATEST ) discard;","#endif"),r?o.push("gl_FragColor = vec4("+n.result+", "+r.result+" );"):o.push("gl_FragColor = vec4("+n.result+", 1.0 );"),e=o.join("\n")}return e}copy(t){return super.copy(t),this.color=t.color,t.position&&(this.position=t.position),t.alpha&&(this.alpha=t.alpha),t.mask&&(this.mask=t.mask),this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),e.color=this.color.toJSON(t).uuid,this.position&&(e.position=this.position.toJSON(t).uuid),this.alpha&&(e.alpha=this.alpha.toJSON(t).uuid),this.mask&&(e.mask=this.mask.toJSON(t).uuid)),e}}Bn.prototype.nodeType="Basic";class Jn extends _e{constructor(){super(),this.color=new an(15658734),this.spherical=!0}build(t){let e;if(t.define("SPRITE"),t.requires.lights=!1,t.requires.transparent=void 0!==this.alpha,t.isShader("vertex")){const n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform(J.UniformsUtils.merge([J.UniformsLib.fog])),t.addParsCode("\n\t\t\t\t#include <fog_pars_vertex>\n\t\t\t\t#include <logdepthbuf_pars_vertex>\n\t\t\t\t#include <clipping_planes_pars_vertex>"),e=["#include <clipping_planes_fragment>","#include <begin_vertex>"],n&&e.push(n.code,n.result?"transformed = "+n.result+";":""),e.push("#include <project_vertex>","#include <fog_vertex>","mat4 modelViewMtx = modelViewMatrix;","mat4 modelMtx = modelMatrix;","modelMtx[3][0] = 0.0;","modelMtx[3][1] = 0.0;","modelMtx[3][2] = 0.0;"),this.spherical||e.push("modelMtx[1][1] = 1.0;"),e.push("modelViewMtx[0][0] = 1.0;","modelViewMtx[0][1] = 0.0;","modelViewMtx[0][2] = 0.0;"),this.spherical&&e.push("modelViewMtx[1][0] = 0.0;","modelViewMtx[1][1] = 1.0;","modelViewMtx[1][2] = 0.0;"),e.push("modelViewMtx[2][0] = 0.0;","modelViewMtx[2][1] = 0.0;","modelViewMtx[2][2] = 1.0;","gl_Position = projectionMatrix * modelViewMtx * modelMtx * vec4( transformed, 1.0 );","#include <logdepthbuf_vertex>","#include <clipping_planes_vertex>","#include <fog_vertex>")}else{t.addParsCode("\n\t\t\t\t#include <fog_pars_fragment>\n\t\t\t\t#include <logdepthbuf_pars_fragment>\n\t\t\t\t#include <clipping_planes_pars_fragment>"),t.addCode("\n\t\t\t\t#include <clipping_planes_fragment>\n\t\t\t\t#include <logdepthbuf_fragment>"),this.mask&&this.mask.analyze(t),this.alpha&&this.alpha.analyze(t),this.color.analyze(t,{slot:"color"});const n=this.mask?this.mask.flow(t,"b"):void 0,r=this.alpha?this.alpha.flow(t,"f"):void 0,i=this.color.flow(t,"c",{slot:"color"});e=[],n&&e.push(n.code,"if ( ! "+n.result+" ) discard;"),r?e.push(r.code,"#ifdef ALPHATEST","if ( "+r.result+" <= ALPHATEST ) discard;","#endif",i.code,"gl_FragColor = vec4( "+i.result+", "+r.result+" );"):e.push(i.code,"gl_FragColor = vec4( "+i.result+", 1.0 );"),e.push("#include <tonemapping_fragment>","#include <encodings_fragment>","#include <fog_fragment>")}return e.join("\n")}copy(t){return super.copy(t),t.position&&(this.position=t.position),this.color=t.color,void 0!==t.spherical&&(this.spherical=t.spherical),t.mask&&(this.mask=t.mask),t.alpha&&(this.alpha=t.alpha),this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),this.position&&(e.position=this.position.toJSON(t).uuid),e.color=this.color.toJSON(t).uuid,!1===this.spherical&&(e.spherical=!1),this.mask&&(e.mask=this.mask.toJSON(t).uuid),this.alpha&&(e.alpha=this.alpha.toJSON(t).uuid)),e}}Jn.prototype.nodeType="Sprite";class Gn extends _e{constructor(){super(),this.color=new an(15658734),this.specular=new an(1118481),this.shininess=new Ue(30)}build(t){let e;if(t.define("PHONG"),t.requires.lights=!0,t.isShader("vertex")){const n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform(J.UniformsUtils.merge([J.UniformsLib.fog,J.UniformsLib.lights])),t.addParsCode('\n\t\t\t\tvarying vec3 vViewPosition;\n\n\t\t\t\t//"#include <encodings_pars_fragment> // encoding functions\n\t\t\t\t#include <fog_pars_vertex>\n\t\t\t\t#include <normal_pars_vertex>\n\t\t\t\t#include <morphtarget_pars_vertex>\n\t\t\t\t#include <skinning_pars_vertex>\n\t\t\t\t#include <shadowmap_pars_vertex>\n\t\t\t\t#include <logdepthbuf_pars_vertex>\n\t\t\t\t#include <clipping_planes_pars_vertex>');const r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","#include <skinbase_vertex>","#include <skinnormal_vertex>","#include <defaultnormal_vertex>","#include <normal_vertex>","#include <begin_vertex>"];n&&r.push(n.code,n.result?"transformed = "+n.result+";":""),r.push("\t#include <morphtarget_vertex>","\t#include <skinning_vertex>","\t#include <project_vertex>","\t#include <fog_vertex>","\t#include <logdepthbuf_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),e=r.join("\n")}else{this.mask&&this.mask.analyze(t),this.color.analyze(t,{slot:"color"}),this.specular.analyze(t),this.shininess.analyze(t),this.alpha&&this.alpha.analyze(t),this.normal&&this.normal.analyze(t),this.light&&this.light.analyze(t,{cache:"light"}),this.ao&&this.ao.analyze(t),this.ambient&&this.ambient.analyze(t),this.shadow&&this.shadow.analyze(t),this.emissive&&this.emissive.analyze(t,{slot:"emissive"}),this.environment&&this.environment.analyze(t,{slot:"environment"}),this.environmentAlpha&&this.environment&&this.environmentAlpha.analyze(t);const n=this.mask?this.mask.flow(t,"b"):void 0,r=this.color.flow(t,"c",{slot:"color"}),i=this.specular.flow(t,"c"),o=this.shininess.flow(t,"f"),s=this.alpha?this.alpha.flow(t,"f"):void 0,a=this.normal?this.normal.flow(t,"v3"):void 0,u=this.light?this.light.flow(t,"v3",{cache:"light"}):void 0,c=this.ao?this.ao.flow(t,"f"):void 0,l=this.ambient?this.ambient.flow(t,"c"):void 0,h=this.shadow?this.shadow.flow(t,"c"):void 0,f=this.emissive?this.emissive.flow(t,"c",{slot:"emissive"}):void 0,d=this.environment?this.environment.flow(t,"c",{slot:"environment"}):void 0,p=this.environmentAlpha&&this.environment?this.environmentAlpha.flow(t,"f"):void 0;t.requires.transparent=void 0!==s,t.addParsCode("\n\t\t\t\t#include <fog_pars_fragment>\n\t\t\t\t#include <bsdfs>\n\t\t\t\t#include <lights_pars_begin>\n\t\t\t\t#include <normal_pars_fragment>\n\t\t\t\t#include <lights_phong_pars_fragment>\n\t\t\t\t#include <shadowmap_pars_fragment>\n\t\t\t\t#include <logdepthbuf_pars_fragment>");const v=["#include <normal_fragment_begin>","\tBlinnPhongMaterial material;"];n&&v.push(n.code,"if ( ! "+n.result+" ) discard;"),v.push(r.code,"\tvec3 diffuseColor = "+r.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","#include <logdepthbuf_fragment>",i.code,"\tvec3 specular = "+i.result+";",o.code,"\tfloat shininess = max( 0.0001, "+o.result+" );","\tfloat specularStrength = 1.0;"),s&&v.push(s.code,"#ifdef ALPHATEST","if ( "+s.result+" <= ALPHATEST ) discard;","#endif"),a&&v.push(a.code,"normal = "+a.result+";"),v.push("material.diffuseColor = "+(u?"vec3( 1.0 )":"diffuseColor")+";"),v.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),u&&(v.push(u.code,"reflectedLight.directDiffuse = "+u.result+";"),v.push("reflectedLight.directDiffuse *= diffuseColor;","reflectedLight.indirectDiffuse *= diffuseColor;")),c&&v.push(c.code,"reflectedLight.indirectDiffuse *= "+c.result+";"),l&&v.push(l.code,"reflectedLight.indirectDiffuse += "+l.result+";"),h&&v.push(h.code,"reflectedLight.directDiffuse *= "+h.result+";","reflectedLight.directSpecular *= "+h.result+";"),f&&v.push(f.code,"reflectedLight.directDiffuse += "+f.result+";"),v.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),d&&(v.push(d.code),p?v.push(p.code,"outgoingLight = mix( outgoingLight, "+d.result+", "+p.result+" );"):v.push("outgoingLight = "+d.result+";")),s?v.push("gl_FragColor = vec4( outgoingLight, "+s.result+" );"):v.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),v.push("#include <tonemapping_fragment>","#include <encodings_fragment>","#include <fog_fragment>","#include <premultiplied_alpha_fragment>"),e=v.join("\n")}return e}copy(t){return super.copy(t),t.position&&(this.position=t.position),this.color=t.color,this.specular=t.specular,this.shininess=t.shininess,t.mask&&(this.mask=t.mask),t.alpha&&(this.alpha=t.alpha),t.normal&&(this.normal=t.normal),t.light&&(this.light=t.light),t.shadow&&(this.shadow=t.shadow),t.ao&&(this.ao=t.ao),t.emissive&&(this.emissive=t.emissive),t.ambient&&(this.ambient=t.ambient),t.environment&&(this.environment=t.environment),t.environmentAlpha&&(this.environmentAlpha=t.environmentAlpha),this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),this.position&&(e.position=this.position.toJSON(t).uuid),e.color=this.color.toJSON(t).uuid,e.specular=this.specular.toJSON(t).uuid,e.shininess=this.shininess.toJSON(t).uuid,this.mask&&(e.mask=this.mask.toJSON(t).uuid),this.alpha&&(e.alpha=this.alpha.toJSON(t).uuid),this.normal&&(e.normal=this.normal.toJSON(t).uuid),this.light&&(e.light=this.light.toJSON(t).uuid),this.ao&&(e.ao=this.ao.toJSON(t).uuid),this.ambient&&(e.ambient=this.ambient.toJSON(t).uuid),this.shadow&&(e.shadow=this.shadow.toJSON(t).uuid),this.emissive&&(e.emissive=this.emissive.toJSON(t).uuid),this.environment&&(e.environment=this.environment.toJSON(t).uuid),this.environmentAlpha&&(e.environmentAlpha=this.environmentAlpha.toJSON(t).uuid)),e}}Gn.prototype.nodeType="Phong";class Hn extends _e{constructor(){super(),this.color=new an(16777215),this.roughness=new Ue(1),this.metalness=new Ue(0)}build(t){let e;t.define("STANDARD");const n=this.clearcoat||this.clearcoatRoughness||this.clearCoatNormal;if(n&&t.define("CLEARCOAT"),t.requires.lights=!0,t.extensions.derivatives=!0,t.extensions.shaderTextureLOD=!0,t.isShader("vertex")){const n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform(J.UniformsUtils.merge([J.UniformsLib.fog,J.UniformsLib.lights])),J.UniformsLib.LTC_1&&(t.uniforms.ltc_1={value:void 0},t.uniforms.ltc_2={value:void 0}),t.addParsCode('\n\t\t\t\tvarying vec3 vViewPosition;\n\n\t\t\t\t#ifndef FLAT_SHADED\n\n\t\t\t\t\tvarying vec3 vNormal;\n\n\t\t\t\t#endif\n\n\t\t\t\t//"#include <encodings_pars_fragment> // encoding functions\n\t\t\t\t#include <fog_pars_vertex>\n\t\t\t\t#include <morphtarget_pars_vertex>\n\t\t\t\t#include <skinning_pars_vertex>\n\t\t\t\t#include <shadowmap_pars_vertex>\n\t\t\t\t#include <logdepthbuf_pars_vertex>\n\t\t\t\t#include <clipping_planes_pars_vertex>');const r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","#include <skinbase_vertex>","#include <skinnormal_vertex>","#include <defaultnormal_vertex>","#ifndef FLAT_SHADED","\tvNormal = normalize( transformedNormal );","#endif","#include <begin_vertex>"];n&&r.push(n.code,n.result?"transformed = "+n.result+";":""),r.push("#include <morphtarget_vertex>","#include <skinning_vertex>","#include <project_vertex>","#include <fog_vertex>","#include <logdepthbuf_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),e=r.join("\n")}else{const r=new Be("material.roughness","f"),i=new Be("material.clearcoatRoughness","f"),o={roughness:r,bias:new Dn(r),viewNormal:new Be("normal","v3"),worldNormal:new Be("inverseTransformDirection( geometry.normal, viewMatrix )","v3"),gamma:!0},s={gamma:!0},a={roughness:i,bias:new Dn(i),viewNormal:new Be("clearcoatNormal","v3"),worldNormal:new Be("inverseTransformDirection( geometry.clearcoatNormal, viewMatrix )","v3"),gamma:!0};this.mask&&this.mask.analyze(t),this.color.analyze(t,{slot:"color",context:s}),this.roughness.analyze(t),this.metalness.analyze(t),this.alpha&&this.alpha.analyze(t),this.normal&&this.normal.analyze(t),this.clearcoat&&this.clearcoat.analyze(t),this.clearcoatRoughness&&this.clearcoatRoughness.analyze(t),this.clearcoatNormal&&this.clearcoatNormal.analyze(t),this.reflectivity&&this.reflectivity.analyze(t),this.light&&this.light.analyze(t,{cache:"light"}),this.ao&&this.ao.analyze(t),this.ambient&&this.ambient.analyze(t),this.shadow&&this.shadow.analyze(t),this.emissive&&this.emissive.analyze(t,{slot:"emissive"}),this.environment&&(this.environment.analyze(t,{cache:"radiance",context:o,slot:"radiance"}),t.requires.irradiance&&this.environment.analyze(t,{cache:"irradiance",context:o,slot:"irradiance"})),this.sheenTint&&this.sheenTint.analyze(t);const u=this.mask?this.mask.flow(t,"b"):void 0,c=this.color.flow(t,"c",{slot:"color",context:s}),l=this.roughness.flow(t,"f"),h=this.metalness.flow(t,"f"),f=this.alpha?this.alpha.flow(t,"f"):void 0,d=this.normal?this.normal.flow(t,"v3"):void 0,p=this.clearcoat?this.clearcoat.flow(t,"f"):void 0,v=this.clearcoatRoughness?this.clearcoatRoughness.flow(t,"f"):void 0,m=this.clearcoatNormal?this.clearcoatNormal.flow(t,"v3"):void 0,g=this.reflectivity?this.reflectivity.flow(t,"f"):void 0,y=this.light?this.light.flow(t,"v3",{cache:"light"}):void 0,b=this.ao?this.ao.flow(t,"f"):void 0,x=this.ambient?this.ambient.flow(t,"c"):void 0,w=this.shadow?this.shadow.flow(t,"c"):void 0,S=this.emissive?this.emissive.flow(t,"c",{slot:"emissive"}):void 0;let O;this.environment&&(O={radiance:this.environment.flow(t,"c",{cache:"radiance",context:o,slot:"radiance"})},t.requires.irradiance&&(O.irradiance=this.environment.flow(t,"c",{cache:"irradiance",context:o,slot:"irradiance"})));const T=n&&O?this.environment.flow(t,"c",{cache:"clearcoat",context:a,slot:"environment"}):void 0,N=this.sheenTint?this.sheenTint.flow(t,"c"):void 0;t.requires.transparent=void 0!==f,t.addParsCode("\n\t\t\t\tvarying vec3 vViewPosition;\n\n\t\t\t\t#define NODE_MAXIMUM_SPECULAR_COEFFICIENT 0.16\n\t\t\t\t#define NODE_DEFAULT_SPECULAR_COEFFICIENT 0.04\n\n\t\t\t\t#ifndef FLAT_SHADED\n\n\t\t\t\t\tvarying vec3 vNormal;\n\n\t\t\t\t#endif\n\n\t\t\t\t#include <dithering_pars_fragment>\n\t\t\t\t#include <fog_pars_fragment>\n\t\t\t\t#include <bsdfs>\n\t\t\t\t#include <lights_pars_begin>\n\t\t\t\t#include <lights_physical_pars_fragment>\n\t\t\t\t#include <shadowmap_pars_fragment>\n\t\t\t\t#include <logdepthbuf_pars_fragment>");const _=["#include <clipping_planes_fragment>","\t#include <normal_fragment_begin>","\t#include <clearcoat_normal_fragment_begin>","\tPhysicalMaterial material;","\tmaterial.diffuseColor = vec3( 1.0 );"];u&&_.push(u.code,"if ( ! "+u.result+" ) discard;"),_.push(c.code,"\tvec3 diffuseColor = "+c.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","#include <logdepthbuf_fragment>",l.code,"\tfloat roughnessFactor = "+l.result+";",h.code,"\tfloat metalnessFactor = "+h.result+";"),f&&_.push(f.code,"#ifdef ALPHATEST","\tif ( "+f.result+" <= ALPHATEST ) discard;","#endif"),d&&_.push(d.code,"normal = "+d.result+";"),m&&_.push(m.code,"clearcoatNormal = "+m.result+";"),_.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),_.push("material.diffuseColor = "+(y?"vec3( 1.0 )":"diffuseColor * ( 1.0 - metalnessFactor )")+";","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),p?_.push(p.code,"material.clearcoat = saturate( "+p.result+" );"):n&&_.push("material.clearcoat = 0.0;"),v?_.push(v.code,"material.clearcoatRoughness = max( "+v.result+", 0.0525 );","material.clearcoatRoughness += geometryRoughness;","material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );"):n&&_.push("material.clearcoatRoughness = 0.0;"),N&&_.push("material.sheenTint = "+N.result+";"),g?_.push(g.code,"material.specularColor = mix( vec3( NODE_MAXIMUM_SPECULAR_COEFFICIENT * pow2( "+g.result+" ) ), diffuseColor, metalnessFactor );"):_.push("material.specularColor = mix( vec3( NODE_DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor, metalnessFactor );"),_.push("#include <lights_fragment_begin>"),y&&(_.push(y.code,"reflectedLight.directDiffuse = "+y.result+";"),_.push("diffuseColor *= 1.0 - metalnessFactor;","reflectedLight.directDiffuse *= diffuseColor;","reflectedLight.indirectDiffuse *= diffuseColor;")),b&&_.push(b.code,"reflectedLight.indirectDiffuse *= "+b.result+";","float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );","reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, "+b.result+", material.roughness );"),x&&_.push(x.code,"reflectedLight.indirectDiffuse += "+x.result+";"),w&&_.push(w.code,"reflectedLight.directDiffuse *= "+w.result+";","reflectedLight.directSpecular *= "+w.result+";"),S&&_.push(S.code,"reflectedLight.directDiffuse += "+S.result+";"),O&&(_.push(O.radiance.code),t.requires.irradiance&&_.push(O.irradiance.code),T&&_.push(T.code,"clearcoatRadiance += "+T.result+";"),_.push("radiance += "+O.radiance.result+";"),t.requires.irradiance&&_.push("iblIrradiance += PI * "+O.irradiance.result+";")),_.push("#include <lights_fragment_end>"),_.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;"),f?_.push("gl_FragColor = vec4( outgoingLight, "+f.result+" );"):_.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),_.push("#include <tonemapping_fragment>","#include <encodings_fragment>","#include <fog_fragment>","#include <premultiplied_alpha_fragment>","#include <dithering_fragment>"),e=_.join("\n")}return e}copy(t){return super.copy(t),t.position&&(this.position=t.position),this.color=t.color,this.roughness=t.roughness,this.metalness=t.metalness,t.mask&&(this.mask=t.mask),t.alpha&&(this.alpha=t.alpha),t.normal&&(this.normal=t.normal),t.clearcoat&&(this.clearcoat=t.clearcoat),t.clearcoatRoughness&&(this.clearcoatRoughness=t.clearcoatRoughness),t.clearcoatNormal&&(this.clearcoatNormal=t.clearcoatNormal),t.reflectivity&&(this.reflectivity=t.reflectivity),t.light&&(this.light=t.light),t.shadow&&(this.shadow=t.shadow),t.ao&&(this.ao=t.ao),t.emissive&&(this.emissive=t.emissive),t.ambient&&(this.ambient=t.ambient),t.environment&&(this.environment=t.environment),t.sheenTint&&(this.sheenTint=t.sheenTint),this}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),this.position&&(e.position=this.position.toJSON(t).uuid),e.color=this.color.toJSON(t).uuid,e.roughness=this.roughness.toJSON(t).uuid,e.metalness=this.metalness.toJSON(t).uuid,this.mask&&(e.mask=this.mask.toJSON(t).uuid),this.alpha&&(e.alpha=this.alpha.toJSON(t).uuid),this.normal&&(e.normal=this.normal.toJSON(t).uuid),this.clearcoat&&(e.clearcoat=this.clearcoat.toJSON(t).uuid),this.clearcoatRoughness&&(e.clearcoatRoughness=this.clearcoatRoughness.toJSON(t).uuid),this.clearcoatNormal&&(e.clearcoatNormal=this.clearcoatNormal.toJSON(t).uuid),this.reflectivity&&(e.reflectivity=this.reflectivity.toJSON(t).uuid),this.light&&(e.light=this.light.toJSON(t).uuid),this.shadow&&(e.shadow=this.shadow.toJSON(t).uuid),this.ao&&(e.ao=this.ao.toJSON(t).uuid),this.emissive&&(e.emissive=this.emissive.toJSON(t).uuid),this.ambient&&(e.ambient=this.ambient.toJSON(t).uuid),this.environment&&(e.environment=this.environment.toJSON(t).uuid),this.sheenTint&&(e.sheenTint=this.sheenTint.toJSON(t).uuid)),e}}Hn.prototype.nodeType="Standard";class Wn extends Hn{constructor(){super(),this.properties={color:new J.Color(16777215),roughness:.5,metalness:.5,normalScale:new J.Vector2(1,1)},this.inputs={color:new vn(this.properties,"color","c"),roughness:new vn(this.properties,"roughness","f"),metalness:new vn(this.properties,"metalness","f"),normalScale:new vn(this.properties,"normalScale","v2")}}build(t){const e=this.properties,n=this.inputs;if(t.isShader("fragment")){const r=t.findNode(e.color,n.color),i=t.resolve(e.map);this.color=i?new Ke(r,i,Ke.MUL):r;const o=t.findNode(e.roughness,n.roughness),s=t.resolve(e.roughnessMap);this.roughness=s?new Ke(o,new An(s,"g"),Ke.MUL):o;const a=t.findNode(e.metalness,n.metalness),u=t.resolve(e.metalnessMap);this.metalness=u?new Ke(a,new An(u,"b"),Ke.MUL):a,e.normalMap?(this.normal=new Rn(t.resolve(e.normalMap)),this.normal.scale=t.findNode(e.normalScale,n.normalScale)):this.normal=void 0,this.environment=t.resolve(e.envMap)}return super.build(t)}toJSON(t){let e=this.getJSONNode(t);return e||(e=this.createJSONNode(t),console.warn(".toJSON not implemented in",this)),e}}Wn.prototype.nodeType="MeshStandard";Te.addShortcuts(class extends cn{constructor(){const t=new Bn;super(t,t),this.type="BasicNodeMaterial"}}.prototype,"fragment",["color","alpha","mask","position"]);Te.addShortcuts(class extends cn{constructor(){const t=new Jn;super(t,t),this.type="SpriteNodeMaterial"}}.prototype,"fragment",["color","alpha","mask","position","spherical"]);Te.addShortcuts(class extends cn{constructor(){const t=new Gn;super(t,t),this.type="PhongNodeMaterial"}}.prototype,"fragment",["color","alpha","specular","shininess","normal","emissive","ambient","light","shadow","ao","environment","environmentAlpha","mask","position"]);Te.addShortcuts(class extends cn{constructor(){const t=new Hn;super(t,t),this.type="StandardNodeMaterial"}}.prototype,"fragment",["color","alpha","roughness","metalness","reflectivity","clearcoat","clearcoatRoughness","clearcoatNormal","normal","emissive","ambient","light","shadow","ao","environment","mask","position","sheenTint"]);Te.addShortcuts(class extends cn{constructor(){const t=new Wn;super(t,t),this.type="MeshStandardNodeMaterial"}}.prototype,"properties",["color","roughness","metalness","map","normalMap","normalScale","metalnessMap","roughnessMap","envMap"]);function qn(t){return qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qn(t)}function Xn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kn(t,e){return Kn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Kn(t,e)}function $n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Zn(t);if(e){var i=Zn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Qn(this,n)}}function Qn(t,e){if(e&&("object"===qn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Zn(t){return Zn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Zn(t)}var tr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kn(t,e)}(o,t);var e,n,r,i=$n(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.hue,r=void 0===n?0:n,s=e.saturation,a=void 0===s?1:s,u=e.vibrance,c=void 0===u?0:u,l=e.brightness,h=void 0===l?0:l,f=e.contrast,d=void 0===f?1:f;Xn(this,o),t=i.call(this),r=new Ue(r),a=new Ue(a),c=new Ue(c),h=new Ue(h),d=new Ue(d);var p=new ln,v=new Un(p,r,Un.HUE),m=new Un(v,a,Un.SATURATION),g=new Un(m,c,Un.VIBRANCE),y=new Un(g,h,Un.BRIGHTNESS),b=new Un(y,d,Un.CONTRAST);return t.input=b,t._hue=r,t._saturation=a,t._vibrance=c,t._brightness=h,t._contrast=d,t}return e=o,(n=[{key:"hue",get:function(){return this._hue.value},set:function(t){this._hue.value=t}},{key:"saturation",get:function(){return this._saturation.value},set:function(t){this._saturation.value=t}},{key:"vibrance",get:function(){return this._vibrance.value},set:function(t){this._vibrance.value=t}},{key:"brightness",get:function(){return this._brightness.value},set:function(t){this._brightness.value=t}},{key:"contrast",get:function(){return this._contrast.value},set:function(t){this._contrast.value=t}}])&&Yn(e.prototype,n),r&&Yn(e,r),o}(hn);function er(t){return er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},er(t)}function nr(t,e){return nr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},nr(t,e)}function rr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=or(t);if(e){var i=or(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ir(this,n)}}function ir(t,e){if(e&&("object"===er(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function or(t){return or=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},or(t)}var sr="\n\n\tuniform sampler2D tDiffuse;\n\tvarying vec2 vUv;\n\n\t".concat("\n    //keda/glsl/bayerMatrixDither.js\n\n    vec3 bayerMatrixDither( vec3 color ) {\n\n        const float BAYER_MATRIX[ 64 ] = float[ 64 ](\n            0.0,  32.0,  8.0, 40.0,  2.0, 34.0, 10.0, 42.0,\n            48.0, 16.0, 56.0, 24.0, 50.0, 18.0, 58.0, 26.0,\n            12.0, 44.0,  4.0, 36.0, 14.0, 46.0,  6.0, 38.0,\n            60.0, 28.0, 52.0, 20.0, 62.0, 30.0, 54.0, 22.0,\n            3.0,  35.0, 11.0, 43.0,  1.0, 33.0,  9.0, 41.0,\n            51.0, 19.0, 59.0, 27.0, 49.0, 17.0, 57.0, 25.0,\n            15.0, 47.0,  7.0, 39.0, 13.0, 45.0,  5.0, 37.0,\n            63.0, 31.0, 55.0, 23.0, 61.0, 29.0, 53.0, 21.0\n        );\n\n        float dithering = ( BAYER_MATRIX[  \n            int( mod( gl_FragCoord.x - 0.5, 8.0 ) ) + \n            int( mod( gl_FragCoord.y - 0.5, 8.0 ) * 8.0 )\n        ] / 255.0 ) / 32.0 - ( 1.0 / 128.0 );\n\n        return color + dithering;\n\n    }\n\n    //\n","\n\n\tvoid main() {\n\n\t\tfloat falloff = 0.1;\n\t\tfloat amount = 1.2;\n\n\t\tvec2 uv = vUv;\n\t\tvec4 color = texture2D( tDiffuse, uv );\n\n\t\tfloat dist = distance(vUv.y, 0.5);\n\n\t\tif ( vUv.y > 0.5 ) {\n\t\t\tamount *= 0.6;\n\t\t}\n\n\t\tcolor.rgb *= smoothstep( 0.8, falloff * 0.799, dist * (amount + falloff) );\n\t\t\n\t\t// Bayer Matrix Dithering\n\t\tcolor.xyz = bayerMatrixDither( color.xyz );\n\n\t\tgl_FragColor = color;\n\n\t}\n\n"),ar=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nr(t,e)}(n,t);var e=rr(n);function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.call(this,new J.ShaderMaterial({uniforms:{tDiffuse:{value:null}},vertexShader:"\n\n    varying vec2 vUv;\n\n    void main() {\n\n        vUv = uv;\n\n        gl_Position = vec4( position, 1.0 );\n\n    }\n\n",fragmentShader:sr}))}return n}(ge);function ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var lr=new J.Vector2(1,0),hr=new J.Vector2(0,1),fr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"init",value:function(t,e,n){this.renderer=t,this.scene=e,this.camera=n,Object.assign(this,Pt.bloom),this.enabled=!0,this.initRenderer(),this.initComposer()}},{key:"initComposer",value:function(){var t=this.screenScene,e=this.screenCamera,n=this.renderer,r={render:new Se(t,e),gradient:new ar,adjustments:new tr(Pt.adjustments)},i=new xe(n);Object.values(r).forEach((function(t){return i.addPass(t)})),Object.assign(this,{post:r,composer:i})}},{key:"initRenderer",value:function(){var t=Rt.screenTriangle,e=Rt.resolution;this.screenScene=new J.Scene,this.screenCamera=new J.OrthographicCamera(-1,1,1,-1,0,1),this.screen=new J.Mesh(t),this.screen.frustumCulled=!1,this.screenScene.add(this.screen),this.renderTargetA=new J.WebGLRenderTarget(1,1,{format:J.RGBFormat,depthBuffer:!1}),this.renderTargetB=this.renderTargetA.clone(),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5,this.renderTargetBright=this.renderTargetA.clone();for(var n=0,r=this.nMips;n<r;n++)this.renderTargetsHorizontal.push(this.renderTargetA.clone()),this.renderTargetsVertical.push(this.renderTargetA.clone());this.renderTargetA.depthBuffer=!0,this.fxaaMaterial=new It,this.fxaaMaterial.uniforms.uResolution=e,this.luminosityMaterial=new Jt,this.luminosityMaterial.uniforms.uLuminosityThreshold.value=this.luminosityThreshold,this.blurMaterials=[];for(var i=[3,5,7,9,11],o=0,s=this.nMips;o<s;o++)this.blurMaterials.push(new ie(i[o])),this.blurMaterials[o].uniforms.uResolution.value=new J.Vector2;for(var a,u,c,l=[1,.8,.6,.4,.2],h=0,f=this.nMips;h<f;h++){var d=l[h];l[h]=this.bloomStrength*(a=d,u=1.2-d,c=this.bloomRadius,a*(1-c)+u*c)}this.bloomCompositeMaterial=new $t(this.nMips),this.bloomCompositeMaterial.uniforms.tBlur1.value=this.renderTargetsVertical[0].texture,this.bloomCompositeMaterial.uniforms.tBlur2.value=this.renderTargetsVertical[1].texture,this.bloomCompositeMaterial.uniforms.tBlur3.value=this.renderTargetsVertical[2].texture,this.bloomCompositeMaterial.uniforms.tBlur4.value=this.renderTargetsVertical[3].texture,this.bloomCompositeMaterial.uniforms.tBlur5.value=this.renderTargetsVertical[4].texture,this.bloomCompositeMaterial.uniforms.uBloomFactors.value=l,this.compositeMaterial=new he}}],(n=null)&&ur(e.prototype,n),r&&ur(e,r),t}();cr(fr,"resize",(function(t,e,n){fr.renderer.setPixelRatio(n),fr.renderer.setSize(t,e),fr.composer.setSize(t,e),t=Math.round(t*n),e=Math.round(e*n),fr.renderTargetA.setSize(t,e),fr.renderTargetB.setSize(t,e),t=J.MathUtils.floorPowerOfTwo(t)/2,e=J.MathUtils.floorPowerOfTwo(e)/2,fr.renderTargetBright.setSize(t,e);for(var r=0,i=fr.nMips;r<i;r++)fr.renderTargetsHorizontal[r].setSize(t,e),fr.renderTargetsVertical[r].setSize(t,e),fr.blurMaterials[r].uniforms.uResolution.value.set(t,e),t/=2,e/=2})),cr(fr,"update",(function(){var t=fr.renderer,e=fr.scene,n=fr.camera;if(!fr.enabled)return t.setRenderTarget(null),void t.render(e,n);var r=fr.screenScene,i=fr.screenCamera,o=fr.renderTargetA,s=fr.renderTargetB,a=fr.renderTargetBright,u=fr.renderTargetsHorizontal,c=fr.renderTargetsVertical;t.setRenderTarget(o),t.render(e,n),fr.fxaaMaterial.uniforms.tMap.value=o.texture,fr.screen.material=fr.fxaaMaterial,t.setRenderTarget(s),t.render(r,i),fr.luminosityMaterial.uniforms.tMap.value=s.texture,fr.screen.material=fr.luminosityMaterial,t.setRenderTarget(a),t.render(r,i);for(var l=a,h=0,f=fr.nMips;h<f;h++)fr.screen.material=fr.blurMaterials[h],fr.blurMaterials[h].uniforms.tMap.value=l.texture,fr.blurMaterials[h].uniforms.uDirection.value=lr,t.setRenderTarget(u[h]),t.render(r,i),fr.blurMaterials[h].uniforms.tMap.value=fr.renderTargetsHorizontal[h].texture,fr.blurMaterials[h].uniforms.uDirection.value=hr,t.setRenderTarget(c[h]),t.render(r,i),l=c[h];fr.screen.material=fr.bloomCompositeMaterial,t.setRenderTarget(u[0]),t.render(r,i),fr.compositeMaterial.uniforms.tScene.value=s.texture,fr.compositeMaterial.uniforms.tBloom.value=u[0].texture,fr.screen.material=fr.compositeMaterial,t.setRenderTarget(null),t.render(r,i),fr.composer.render()}));n(823),n(8472);const dr="\nprecision highp float;\n\nuniform sampler2D tMap;\nuniform float uBluriness;\nuniform vec2 uDirection;\nuniform vec2 uResolution;\n\nin vec2 vUv;\n\nout vec4 FragColor;\n\n".concat("\nvec4 blur13(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.411764705882353) * direction;\n  vec2 off2 = vec2(3.2941176470588234) * direction;\n  vec2 off3 = vec2(5.176470588235294) * direction;\n  color += texture(image, uv) * 0.1964825501511404;\n  color += texture(image, uv + (off1 / resolution)) * 0.2969069646728344;\n  color += texture(image, uv - (off1 / resolution)) * 0.2969069646728344;\n  color += texture(image, uv + (off2 / resolution)) * 0.09447039785044732;\n  color += texture(image, uv - (off2 / resolution)) * 0.09447039785044732;\n  color += texture(image, uv + (off3 / resolution)) * 0.010381362401148057;\n  color += texture(image, uv - (off3 / resolution)) * 0.010381362401148057;\n  return color;\n}\n","\n\nvoid main() {\n    FragColor = blur13(tMap, vUv, uResolution, smoothstep(0.5 + uBluriness * 0.5, 0.0, vUv.y) * uDirection);\n}\n");function pr(t){return pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pr(t)}function vr(t,e){return vr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},vr(t,e)}function mr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yr(t);if(e){var i=yr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return gr(this,n)}}function gr(t,e){if(e&&("object"===pr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function yr(t){return yr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},yr(t)}var br=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vr(t,e)}(n,t);var e=mr(n);function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.call(this,{glslVersion:J.GLSL3,uniforms:{tMap:new J.Uniform(null),uBluriness:new J.Uniform(1),uDirection:new J.Uniform(new J.Vector2(1,0)),uResolution:new J.Uniform(new J.Vector2)},vertexShader:"\nin vec2 uv;\nin vec3 position;\n\nout vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n\n    gl_Position = vec4(position, 1.0);\n}\n",fragmentShader:dr,blending:J.NoBlending,depthWrite:!1,depthTest:!1})}return n}(J.RawShaderMaterial);function xr(t){return xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xr(t)}function wr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Or(t,e){return Or=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Or(t,e)}function Tr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_r(t);if(e){var i=_r(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Nr(this,n)}}function Nr(t,e){if(e&&("object"===xr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _r(t){return _r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_r(t)}var Pr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Or(t,e)}(o,t);var e,n,r,i=Tr(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,r=void 0===n?512:n,s=e.height,a=void 0===s?512:s,u=e.clipBias,c=void 0===u?0:u,l=e.blurIterations,h=void 0===l?8:l,f=e.blurFactor,d=void 0===f?1:f;return wr(this,o),(t=i.call(this)).clipBias=c,t.blurIterations=h,t.reflectorPlane=new J.Plane,t.normal=new J.Vector3,t.reflectorWorldPosition=new J.Vector3,t.cameraWorldPosition=new J.Vector3,t.rotationMatrix=new J.Matrix4,t.lookAtPosition=new J.Vector3(0,0,-1),t.clipPlane=new J.Vector4,t.view=new J.Vector3,t.target=new J.Vector3,t.q=new J.Vector4,t.textureMatrix=new J.Matrix4,t.virtualCamera=new J.PerspectiveCamera,t.textureMatrixUniform=new J.Uniform(t.textureMatrix),t.renderTarget=new J.WebGLRenderTarget(r,a,{format:J.RGBFormat,depthBuffer:!1}),t.renderTargetRead=t.renderTarget.clone(),t.renderTargetWrite=t.renderTarget.clone(),t.renderTarget.depthBuffer=!0,t.renderTargetUniform=t.blurIterations>0?new J.Uniform(t.renderTargetRead.texture):new J.Uniform(t.renderTarget.texture),t.blurMaterial=new br,t.blurMaterial.uniforms.uBluriness.value=d,t.blurMaterial.uniforms.uResolution.value.set(r,a),t.screenScene=new J.Scene,t.screenCamera=new J.OrthographicCamera(-1,1,1,-1,0,1),t.screenGeometry=_t(),t.screen=new J.Mesh(t.screenGeometry,t.blurMaterial),t.screen.frustumCulled=!1,t.screenScene.add(t.screen),t}return e=o,(n=[{key:"setSize",value:function(t,e){this.renderTarget.setSize(t,e),this.renderTargetRead.setSize(t,e),this.renderTargetWrite.setSize(t,e),this.blurMaterial.uniforms.uResolution.value.set(t,e)}},{key:"update",value:function(t,e,n){if(this.reflectorWorldPosition.setFromMatrixPosition(this.matrixWorld),this.cameraWorldPosition.setFromMatrixPosition(n.matrixWorld),this.rotationMatrix.extractRotation(this.matrixWorld),this.normal.set(0,0,1),this.normal.applyMatrix4(this.rotationMatrix),this.view.subVectors(this.reflectorWorldPosition,this.cameraWorldPosition),!(this.view.dot(this.normal)>0)){this.view.reflect(this.normal).negate(),this.view.add(this.reflectorWorldPosition),this.rotationMatrix.extractRotation(n.matrixWorld),this.lookAtPosition.set(0,0,-1),this.lookAtPosition.applyMatrix4(this.rotationMatrix),this.lookAtPosition.add(this.cameraWorldPosition),this.target.subVectors(this.reflectorWorldPosition,this.lookAtPosition),this.target.reflect(this.normal).negate(),this.target.add(this.reflectorWorldPosition),this.virtualCamera.position.copy(this.view),this.virtualCamera.up.set(0,1,0),this.virtualCamera.up.applyMatrix4(this.rotationMatrix),this.virtualCamera.up.reflect(this.normal),this.virtualCamera.lookAt(this.target),this.virtualCamera.far=n.far,this.virtualCamera.updateMatrixWorld(),this.virtualCamera.projectionMatrix.copy(n.projectionMatrix),this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.virtualCamera.projectionMatrix),this.textureMatrix.multiply(this.virtualCamera.matrixWorldInverse),this.textureMatrix.multiply(this.matrixWorld),this.reflectorPlane.setFromNormalAndCoplanarPoint(this.normal,this.reflectorWorldPosition),this.reflectorPlane.applyMatrix4(this.virtualCamera.matrixWorldInverse),this.clipPlane.set(this.reflectorPlane.normal.x,this.reflectorPlane.normal.y,this.reflectorPlane.normal.z,this.reflectorPlane.constant);var r=this.virtualCamera.projectionMatrix;this.q.x=(Math.sign(this.clipPlane.x)+r.elements[8])/r.elements[0],this.q.y=(Math.sign(this.clipPlane.y)+r.elements[9])/r.elements[5],this.q.z=-1,this.q.w=(1+r.elements[10])/r.elements[14],this.clipPlane.multiplyScalar(2/this.clipPlane.dot(this.q)),r.elements[2]=this.clipPlane.x,r.elements[6]=this.clipPlane.y,r.elements[10]=this.clipPlane.z+1-this.clipBias,r.elements[14]=this.clipPlane.w;var i=t.getRenderTarget(),o=t.xr.enabled,s=t.shadowMap.autoUpdate;t.xr.enabled=!1,t.shadowMap.autoUpdate=!1,t.setRenderTarget(this.renderTarget),t.state.buffers.depth.setMask(!0),!1===t.autoClear&&t.clear(),t.render(e,this.virtualCamera);for(var a=this.blurIterations,u=0;u<a;u++){this.blurMaterial.uniforms.tMap.value=0===u?this.renderTarget.texture:this.renderTargetRead.texture;var c=.5*(a-u-1);this.blurMaterial.uniforms.uDirection.value.set(u%2==0?c:0,u%2==0?0:c),t.setRenderTarget(this.renderTargetWrite),!1===t.autoClear&&t.clear(),t.render(this.screenScene,this.screenCamera);var l=this.renderTargetRead;this.renderTargetRead=this.renderTargetWrite,this.renderTargetWrite=l,this.renderTargetUniform.value=this.renderTargetRead.texture}t.xr.enabled=o,t.shadowMap.autoUpdate=s,t.setRenderTarget(i)}}},{key:"destroy",value:function(){for(var t in this.renderTargetWrite.dispose(),this.renderTargetRead.dispose(),this.renderTarget.dispose(),this.blurMaterial.dispose(),this.screenGeometry.dispose(),this)this[t]=null;return null}}])&&Sr(e.prototype,n),r&&Sr(e,r),o}(J.Group);const Er="\nin vec3 position;\nin vec2 uv;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nuniform mat3 uMapTransform;\nuniform mat4 uMatrix;\n\nout vec2 vUv;\nout vec4 vCoord;\n\nvoid main() {\n    vUv = (uMapTransform * vec3(uv, 1.0)).xy;\n    vCoord = uMatrix * vec4(position, 1.0);\n\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",Lr="\nprecision highp float;\n\nuniform sampler2D tMap;\nuniform sampler2D tReflect;\nuniform vec3 uColor;\n\n#ifdef USE_FOG\n    uniform vec3 uFogColor;\n    uniform float uFogNear;\n    uniform float uFogFar;\n#endif\n\nin vec2 vUv;\nin vec4 vCoord;\n\nout vec4 FragColor;\n\n".concat("\nfloat blendOverlay(float x, float y) {\n    return (x < 0.5) ? (2.0 * x * y) : (1.0 - 2.0 * (1.0 - x) * (1.0 - y));\n}\n\nvec4 blendOverlay(vec4 x, vec4 y, float opacity) {\n    vec4 z = vec4(blendOverlay(x.r, y.r), blendOverlay(x.g, y.g), blendOverlay(x.b, y.b), blendOverlay(x.a, y.a));\n    return z * opacity + x * (1.0 - opacity);\n}\n","\n").concat(Gt,"\n\nvoid main() {\n    vec4 base = texture(tMap, vUv);\n    vec4 blend = textureProj(tReflect, vCoord);\n\n    FragColor = base * blend;\n\n    base = FragColor;\n    blend = vec4(uColor, 1.0);\n\n    FragColor = blendOverlay(base, blend, 1.0);\n\n    #ifdef USE_FOG\n        float fogDepth = gl_FragCoord.z / gl_FragCoord.w;\n        float fogFactor = smoothstep(uFogNear, uFogFar, fogDepth);\n\n        FragColor.rgb = mix(FragColor.rgb, uFogColor, fogFactor);\n    #endif\n\n    #ifdef DITHERING\n        FragColor.rgb = dither(FragColor.rgb);\n    #endif\n}\n");function Rr(t){return Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rr(t)}function Mr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cr(t,e){return Cr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Cr(t,e)}function Ar(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=zr(t);if(e){var i=zr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return kr(this,n)}}function kr(t,e){if(e&&("object"===Rr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function zr(t){return zr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},zr(t)}var jr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cr(t,e)}(n,t);var e=Ar(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.color,i=void 0===r?new J.Color(8355711):r,o=t.map,s=void 0===o?null:o,a=t.fog,u=void 0===a?null:a,c=t.dithering,l=void 0!==c&&c;Mr(this,n);var h={glslVersion:J.GLSL3,defines:{},uniforms:{tMap:new J.Uniform(null),tReflect:new J.Uniform(null),uMapTransform:new J.Uniform(new J.Matrix3),uMatrix:new J.Uniform(new J.Matrix4),uColor:new J.Uniform(i instanceof J.Color?i:new J.Color(i))},vertexShader:Er,fragmentShader:Lr};return s&&(s.updateMatrix(),h.uniforms=Object.assign(h.uniforms,{tMap:new J.Uniform(s),uMapTransform:new J.Uniform(s.matrix)})),u&&(h.defines=Object.assign(h.defines,{USE_FOG:""}),h.uniforms=Object.assign(h.uniforms,{uFogColor:new J.Uniform(u.color),uFogNear:new J.Uniform(u.near),uFogFar:new J.Uniform(u.far)})),l&&(h.defines=Object.assign(h.defines,{DITHERING:""})),e.call(this,h)}return n}(J.RawShaderMaterial);function Ir(t){return Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ir(t)}function Dr(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,i)}function Fr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vr(t,e){return Vr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Vr(t,e)}function Ur(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jr(t);if(e){var i=Jr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Br(this,n)}}function Br(t,e){if(e&&("object"===Ir(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Jr(t){return Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Jr(t)}var Gr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vr(t,e)}(a,t);var e,n,r,i,o,s=Ur(a);function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this)).initReflector(),t}return e=a,n=[{key:"initReflector",value:function(){this.reflector=new Pr}},{key:"initMesh",value:(i=regeneratorRuntime.mark((function t(){var e,n,r,i,o,s,a,u=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Rt.scene,n=Rt.loadTexture,r=new J.PlaneGeometry(110,110),t.next=4,n("textures/polished_concrete_basecolor.jpg");case 4:(i=t.sent).wrapS=J.RepeatWrapping,i.wrapT=J.RepeatWrapping,i.repeat.set(16,16),o=e.fog,(s=new jr({map:i,fog:o,dithering:!0})).uniforms.tReflect=this.reflector.renderTargetUniform,s.uniforms.uMatrix=this.reflector.textureMatrixUniform,(a=new J.Mesh(r,s)).position.y=-1.75,a.rotation.x=-Math.PI/2,a.add(this.reflector),a.onBeforeRender=function(t,e,n){u.visible=!1,u.reflector.update(t,e,n),u.visible=!0},this.add(a);case 18:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function s(t){Dr(o,n,r,s,a,"next",t)}function a(t){Dr(o,n,r,s,a,"throw",t)}s(void 0)}))},function(){return o.apply(this,arguments)})},{key:"resize",value:function(t,e){t=J.MathUtils.floorPowerOfTwo(t)/2,this.reflector.setSize(t,1024)}}],n&&Fr(e.prototype,n),r&&Fr(e,r),a}(J.Group);n(8351),n(7470);function Hr(t){return Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hr(t)}function Wr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yr(t,e){return Yr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Yr(t,e)}function Kr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Qr(t);if(e){var i=Qr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $r(this,n)}}function $r(t,e){if(e&&("object"===Hr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Qr(t){return Qr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Qr(t)}var Zr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yr(t,e)}(o,t);var e,n,r,i=Kr(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=Pt.sphere,n=e.passes,r=e.smoothness,s=e.speed,a=e.value1,u=e.value2,c=e.rotationSpeed,l=new J.SphereGeometry(1,320,320),h=new J.ShaderMaterial({vertexShader:"#define PI acos(-1.0)\n\nuniform int uPasses;\nuniform float uSmoothness;\nuniform float uSpeed;\nuniform float uTime;\nvarying vec4 vPosition;\nvarying float vDistance;\n\n// Classic Perlin 3D Noise, by Stefan Gustavson\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\nvec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\n\nfloat cnoise(vec3 P){\n  vec3 Pi0 = floor(P); // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n  return 2.2 * n_xyz;\n}\n// \n\nvoid main() {\n\n    vec3 pos = position;\n\n    float speed = 0.01 * uSpeed;\n    float loopLength = 10.0 * speed;\n\n    float factor1 = uSmoothness;\n    float factor2 = uSmoothness * 0.8;\n    float factor = mix(factor1, factor2, sin( uTime ));\n\n    // Lerp-based noise loop\n    float transitionStart = loopLength * 0.5;\n    float time = mod(uTime * speed, loopLength);\n\n    float v1 = cnoise(pos + time);\n    float v2 = cnoise(pos + time - loopLength);\n\n\tfor ( int i = 0; i < uPasses; i ++ ) {\n\t\tv1 = cnoise( vec3(v1) );\n\t\tv2 = cnoise( vec3(v2) );\n\t}\n\n    float transitionProgress = (time-transitionStart)/(loopLength-transitionStart);\n    float progress = clamp(transitionProgress, 0.0, 1.0);\n\n    float noise = mix(v1, v2, progress) / factor;\n\n    pos += noise;\n\n    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(pos, 1.0);\n\n    vPosition = modelMatrix * vec4(pos, 1.0);\n    vDistance = distance(pos, vec3(0.0));\n\n}",fragmentShader:"uniform float uValue1;\nuniform float uValue2;\nvarying vec4 vPosition;\nvarying float vDistance;\n\nfloat map(float s, float a1, float a2, float b1, float b2) {\n\n    return b1 + (s-a1)*(b2-b1)/(a2-a1);\n\n}\n\nvoid main() {\n\n\tvec4 baseColor = vec4( 0.95, 0.98, 1.0, 1.0 );\n\tvec4 color1 = baseColor * uValue1;\n\tvec4 color2 = baseColor * uValue2;\n\n    float distanceMap = map(vDistance, 1.0 , 1.1, 0.0, 1.0);\n\n    vec4 color = mix( color1, color2, distanceMap );\n\n    gl_FragColor = vec4( color );\n\n}",uniforms:{uPasses:{value:n},uSmoothness:{value:r},uSpeed:{value:s},uTime:{value:0},uValue1:{value:a},uValue2:{value:u}}});return(t=i.call(this,l,h)).rotationSpeed=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wr(Object(n),!0).forEach((function(e){qr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},c),t}return e=o,(n=[{key:"update",value:function(t){var e=this.rotation,n=this.rotationSpeed,r=.01;e.x=t*n.x*r,e.y=t*n.y*r,e.z=t*n.z*r,this.time=t}},{key:"invert",value:function(){var t=this.value1,e=this.value2,n=t;t=e,e=n}},{key:"passes",get:function(){return this.material.uniforms.uPasses.value},set:function(t){this.material.uniforms.uPasses.value=t}},{key:"smoothness",get:function(){return this.material.uniforms.uSmoothness.value},set:function(t){this.material.uniforms.uSmoothness.value=t}},{key:"speed",get:function(){return this.material.uniforms.uSpeed.value},set:function(t){this.material.uniforms.uSpeed.value=t}},{key:"time",get:function(){return this.material.uniforms.uTime.value},set:function(t){this.material.uniforms.uTime.value=t}},{key:"value1",get:function(){return this.material.uniforms.uValue1.value},set:function(t){this.material.uniforms.uValue1.value=t}},{key:"value2",get:function(){return this.material.uniforms.uValue2.value},set:function(t){this.material.uniforms.uValue2.value=t}}])&&Xr(e.prototype,n),r&&Xr(e,r),o}(J.Mesh);function ti(t){return ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ti(t)}function ei(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ni(t,e){return ni=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ni(t,e)}function ri(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=si(t);if(e){var i=si(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ii(this,n)}}function ii(t,e){if(e&&("object"===ti(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return oi(t)}function oi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function si(t){return si=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},si(t)}function ai(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ui=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ni(t,e)}(o,t);var e,n,r,i=ri(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),ai(oi(t=i.call(this)),"resize",(function(e,n){t.floor.resize(e,n)})),ai(oi(t),"ready",(function(){return Promise.all([t.floor.initMesh()])})),t.visible=!1,t.initViews(),t}return e=o,(n=[{key:"initViews",value:function(){this.floor=new Gr,this.add(this.floor),this.floor.position.y=.4,this.sphere=new Zr,this.add(this.sphere)}}])&&ei(e.prototype,n),r&&ei(e,r),o}(J.Group);function ci(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function li(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var hi=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"init",value:function(t){this.view=t}}],(n=null)&&ci(e.prototype,n),r&&ci(e,r),t}();function fi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function di(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}li(hi,"resize",(function(t,e){hi.view.resize(t,e)})),li(hi,"update",(function(){})),li(hi,"animateIn",(function(){hi.view.visible=!0})),li(hi,"ready",(function(){return hi.view.ready()}));var pi=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"init",value:function(t){this.camera=t,this.mouse=new J.Vector2,this.lookAt=new J.Vector3(0,0,0),this.origin=new J.Vector3,this.target=new J.Vector3,this.targetXY=new J.Vector2(5,1),this.origin.copy(this.camera.position),this.lerpSpeed=.02,this.enabled=!1,this.addListeners()}},{key:"addListeners",value:function(){z.element.addEventListener("pointerdown",this.onPointerDown),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp)}}],(n=null)&&fi(e.prototype,n),r&&fi(e,r),t}();di(pi,"onPointerDown",(function(t){pi.onPointerMove(t)})),di(pi,"onPointerMove",(function(t){var e=t.clientX,n=t.clientY;pi.enabled&&(pi.mouse.x=e/z.width*2-1,pi.mouse.y=1-n/z.height*2)})),di(pi,"onPointerUp",(function(t){pi.onPointerMove(t)})),di(pi,"resize",(function(t,e){pi.camera.aspect=t/e,pi.camera.updateProjectionMatrix(),pi.camera.position.z=t<e?14:10,pi.origin.z=pi.camera.position.z})),di(pi,"update",(function(){pi.enabled&&(pi.target.x=pi.origin.x+pi.targetXY.x*pi.mouse.x,pi.target.y=pi.origin.y+pi.targetXY.y*pi.mouse.y,pi.target.z=pi.origin.z,pi.camera.position.lerp(pi.target,pi.lerpSpeed),pi.camera.lookAt(pi.lookAt))})),di(pi,"animateIn",(function(){pi.enabled=!0}));n(3276);function vi(t){var e,n=this,r=(e=4022871197,function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.random=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1)}function mi(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function gi(t){return mi(0,t)}const yi={random:{int:mi,uint:gi,item:function(t){return t[gi(t.length-1)]},boolean:function(){return Math.random()<.5}}},bi=[["black","white","red","green","blue","pink","purple","orange","silver","golden","iron","stone","velvet","opal","ivory","coral","broken","pearl","silk","fire","ice","thunder","falling","rising","diamond","turquoise","ruby","emerald","onyx","lapis","jade","amber"],["shield","sword","spear","arrow","knight","king","queen","phoenix","box","garden","flower","apple","echo","gambit","fist","dragon","sun","moon","star","cloud","rain","wind","dawn","storm","eagle","tiger","lion","puma","wolf","panther","dove","fox"]],xi=[["loud","adorab","glad","zealous","grumpi","happi","polite","expert","awkward","warm","sincere","shy","quiet","lazi","mad","bold"].map((t=>`${t}ly`)),["beam","giggl","paint","smil","danc","laugh","sing","sneez","clapp","whistl","hopp","cheer","fly","greet","wav","juggl"].map((t=>`${t}ing`)),["smart","creative","bubbly","fun","cute","tiny","giant","laidback","upbeat","kind","cool","brave","dumb","tipsy","popular","generous"],["puppy","kitten","monkey","pumpkin","robot","nun","ninja","giraffe","baby","penguin","panda","koala","bear","wizard","pirate","knight"]],wi="abcdefghijklmnopqrstuvwxyz".split(""),Si="aeiou".split(""),Oi=wi.filter((t=>!Si.includes(t))),Ti={alphabet:wi,vowels:Si,consonnants:Oi},Ni={CODENAME:"codename",DESCRIPTION:"description",GIBBERISH:"gibberish",SERIAL:"serial"};const _i={NONE:"",DASH:"-",DOT:".",TILDE:"~",UNDERSCORE:"_"};let Pi="";function Ei(t){return yi.random.item(t)}function Li(){const{verbose:t,separator:e}=ki;return(t?[...bi.map(Ei),yi.random.uint(999)]:bi.map(Ei)).join(e)}function Ri(){const{verbose:t,separator:e}=ki;return(t?xi:[xi[1],xi[3]]).map(Ei).join(e)}function Mi(){const{verbose:t}=ki,{vowels:e,consonnants:n}=Ti,r=t?8:4;return Array.from({length:r},((t,r)=>{const i=r%2?e:n;return yi.random.item(i)})).join("")}function Ci(){const{verbose:t}=ki,e=t?8:4,n=Ti.alphabet.filter((t=>!"ilo".includes(t)));return Array.from({length:e},(()=>ki.bool()?yi.random.item(n).toUpperCase():yi.random.int(1,9))).join("")}function Ai(){const{mode:t}=ki,e={codename:Li,description:Ri,gibberish:Mi,serial:Ci}[t]||Li;return ki.seed=e(),ki.seed}const ki={modes:Ni,mode:Ni.CODENAME,separators:_i,separator:_i.NONE,verbose:!1,prng:new vi(Pi),codename:Li,description:Ri,gibberish:Mi,serial:Ci,autoseed:Ai,reset:function(){ki.prng=new vi(ki.seed)},random:function(t=0,e=1,n=!1){const{prng:r}=ki,i=r.random();return isNaN(t)||isNaN(e)?i:n?Math.floor(i*(e-t+1)+t):i*(e-t)+t},int:function(t,e){return ki.random(t,e,!0)},uint:function(t){return ki.int(0,t)},item:function(t){return t[ki.uint(t.length-1)]},bool:function(){return ki.random()<.5},char:function(t){return t.charAt(ki.uint(t.length-1))},get seed(){return Pi},set seed(t){Pi=t,this.reset()}};Ai();const zi=ki;function ji(t,e=""){return Object.keys(t).reduce(((n,r)=>{const i=e.length?`${e}.`:"";return"object"==typeof t[r]&&null!==t[r]&&Object.keys(t[r]).length?Object.assign(n,ji(t[r],i+r)):n[i+r]=t[r],n}),{})}let Ii;const Di="string",Fi="number",Vi="boolean;";function Ui(t){const{types:e}=Ii;return e.includes(typeof t)}function Bi(t,e,n,r){const i=function(t,e,n=[],r=[]){typeof n===Di&&(n=n.split(",")),typeof r===Di&&(r=r.split(","));const i=Object.keys(t);let o=n.length?i.filter((t=>n.includes(t))):i.filter((t=>!r.includes(t)));return e&&(o=o.filter((t=>t!==e))),o.sort()}(t,e,n,r),o=ji(Object.keys(t).filter((t=>i.includes(t))).reduce(((e,n)=>Object.assign(e,{[n]:t[n]})),{}));return Object.keys(o).filter((t=>Ui(o[t]))).reduce(((t,e)=>Object.assign(t,{[e]:o[e]})),{})}function Ji(){const{autohash:t}=Ii;!window.location.hash&&t&&(window.location.hash=t)}function Gi(t,e,n){if(void 0!==n[t])return typeof n[t]===Vi?Boolean(e):typeof n[t]===Fi?Number(e):e}Ii={name:"winlo",separator:"~",autohash:"/",overwrite:!0,types:[Di,Fi,Vi],toFixedDigits:4,clear:function(){window.location.search="",Ji()},save:function(t,e=!0,{hash:n,include:r,exclude:i}={}){const{name:o,overwrite:s,separator:a}=Ii,u=s?void 0:window.location.search,c=new URLSearchParams(u),l=t[n];l&&Ui(l)?window.location.hash=l:(n=!1,Ji());const h=Bi(t,n,r,i),f=Object.entries(h);if(!f.length)return;let d;if(f.forEach((([t,e])=>h[t]=function(t){const{toFixedDigits:e}=Ii;return typeof t===Fi&&!Number.isInteger(t)&&e&&(t=t.toFixed(e)),t}(e))),e){const t=Object.keys(h).sort().map((t=>h[t]));d=!0===e?o:e;let n=t.join(a);c.set(d,n)}else{new URLSearchParams(h).forEach(((t,e)=>{e=s?e:`${o}.${e}`,c.set(e,t)}))}return window.location.search=c},load:function(t,e=!0,{hash:n,include:r,exclude:i}={}){const{name:o,separator:s}=Ii,a=new URLSearchParams(window.location.search);if(n&&void 0!==t[n]){let e=window.location.hash;e&&(e=e.substring(1),t[n]=Gi(n,e,t))}let u=ji(t);if(e){const c=function(t){return Object.keys(t).sort()}(Bi(t,n,r,i));if(!c.length)return;const l=!0===e?o:e,h=a.get(l);if(!h)return;let f=h.split(s);if(f.length!==c.length)return;c.forEach((t=>u[t]=Gi(t,f.shift(),u)))}else a.forEach(((t,e)=>{const n=Gi(e,t,u);void 0!==Gi&&(u[e]=n)}));u=function(t){return Object.keys(t).reduce(((e,n)=>(n.split(".").reduce(((e,r,i,o)=>e[r]||(e[r]=isNaN(Number(o[i+1]))?o.length-1===i?t[n]:{}:[])),e),e)),{})}(u);for(let e in u)t[e]=u[e];return a}};const Hi=Ii;var Wi=new dat.gui.GUI;function qi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);s=!0);}catch(t){a=!0,i=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Xi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xi(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Yi(t){return Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yi(t)}Wi.init=function(){var t=100,e="save (to url)",n=to.sphere,r=Wi.addFolder("Plasma Remix");r.add(n,"passes",1,4).step(1),r.add(n,"smoothness",3,30).step(1),r.add(n,"speed",1,t).step(1),r.open();var i=Wi.addFolder("Rotation");i.add(n.rotationSpeed,"x",-100,t).step(1),i.add(n.rotationSpeed,"y",-100,t).step(1),i.add(n.rotationSpeed,"z",-100,t).step(1),i.open();var o=Wi.addFolder("Color");o.add(n,"value1",0,1).step(.01).listen(),o.add(n,"value2",0,1).step(.01).listen(),o.add(n,"invert"),o.open();var s=Wi.addFolder("Post-processing");s.add(fr.post.adjustments,"hue",0,2*Math.PI).step(.01),s.add(fr.post.adjustments,"saturation",0,3).step(.01),s.open();var a,u,c,l=Wi.addFolder("Settings");l.add(to,"reset"),l.add(to,"random"),l.add((a={},u=e,c=to.save,u in a?Object.defineProperty(a,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[u]=c,a),e),l.open();var h=640*(window.devicePixelRatio>2?2:1);window.innerWidth<h&&Wi.close()};var Ki={flatten:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(e).reduce((function(r,i){var o=n.length?"".concat(n,"."):"";return"object"===Yi(e[i])&&null!==e[i]&&Object.keys(e[i]).length?Object.assign(r,t(e[i],o+i)):r[o+i]=e[i],r}),{})},unflatten:function(t){return Object.keys(t).reduce((function(e,n){return n.split(".").reduce((function(e,r,i,o){return e[r]||(e[r]=isNaN(Number(o[i+1]))?o.length-1===i?t[n]:{}:[])}),e),e}),{})},copy:function(t){return JSON.parse(JSON.stringify(t))},diff:function(t,e){var n={};return Object.entries(t).forEach((function(t){var r=qi(t,2),i=r[0],o=r[1];o!==e[i]&&(n[i]=o)})),!!Object.keys(n).length&&n}};function $i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);s=!0);}catch(t){a=!0,i=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Qi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qi(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Zi=30,to={sphere:null,defaults:Ki.copy(Pt),current:Ki.copy(Pt),base:Ki.copy(Pt),init:function(){to.load(),window.addEventListener("hashchange",to.applyHash)},randomize:{adjustments:{hue:{min:0,max:2*Math.PI},saturation:{min:0,max:3}},sphere:{passes:{min:2,max:4,round:!0},speed:{min:1,max:Zi,round:!0},smoothness:{min:5,max:10,round:!0},value1:{min:0,max:1},value2:{min:0,max:1}},rotationSpeed:{x:{min:-30,max:Zi,round:!0},y:{min:-30,max:Zi,round:!0},z:{min:-30,max:Zi,round:!0}}},reset:function(){window.location.hash="",Hi.clear();var t=to.defaults,e=to.update,n=to.save;to.current=Ki.copy(t),to.base=Ki.copy(t),e(),n()},random:function(t){var e=to.current,n=to.randomize,r=function(t,e,n){var r=n.min,i=n.max,o=n.round;t[e]=zi.random(r,i,o)};t?zi.seed=t:zi.autoseed(),e.seed=zi.seed,Object.entries(n.adjustments).forEach((function(t){var n=$i(t,2),i=n[0],o=n[1];zi.random()>.5?r(e.adjustments,i,o):e.adjustments[i]=0})),Object.entries(n.sphere).forEach((function(t){var n=$i(t,2),i=n[0],o=n[1];return r(e.sphere,i,o)})),Object.entries(n.rotationSpeed).forEach((function(t){var n=$i(t,2),i=n[0],o=n[1];zi.random()>.66?r(e.sphere.rotationSpeed,i,o):e.sphere.rotationSpeed[i]=0})),to.base=Ki.copy(to.current),to.update(),t||(t=zi.seed,Hi.save({seed:t},!1,{hash:"seed"}),Hi.clear())},update:function(){var t=to.current,e=to.sphere;Object.entries(t.adjustments).forEach((function(t){var e=$i(t,2),n=e[0],r=e[1];fr.post.adjustments[n]=r})),Object.entries(t.sphere).forEach((function(t){var n=$i(t,2),r=n[0],i=n[1];"rotationSpeed"!==r&&(e[r]=i)})),Object.entries(t.sphere.rotationSpeed).forEach((function(t){var n=$i(t,2),r=n[0],i=n[1];e.rotationSpeed[r]=i})),Wi.updateDisplay()},applyHash:function(){var t=window.location.hash;t.length&&t!=="#".concat(Hi.autohash)&&(t=t.substring(1),to.random(t))},load:function(){var t=to.current,e=to.update;to.applyHash(),Hi.load(t,!1,{hash:"seed"}),e()},save:function(){var t=to.current,e=to.base,n=to.sphere;Object.keys(t.adjustments).forEach((function(e){t.adjustments[e]=fr.post.adjustments[e]})),Object.keys(t.sphere).forEach((function(e){"rotationSpeed"!==e&&(t.sphere[e]=n[e])})),Object.keys(t.sphere.rotationSpeed).forEach((function(e){t.sphere.rotationSpeed[e]=n.rotationSpeed[e]}));var r=Ki.flatten(t),i=Ki.flatten(e),o=Ki.diff(r,i)||{};o.seed=t.seed,Hi.save(o,!1,{hash:"seed"})}};function eo(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,i)}function no(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ro(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var io=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r,i,o,s;return n=t,r=null,i=[{key:"init",value:(o=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.initWorld(),this.initViews(),this.initControllers(),this.addListeners(),this.onResize(),t.next=7,Promise.all([Rt.textureLoader.ready(),hi.ready()]);case 7:pi.animateIn(),hi.animateIn(),to.sphere=this.view.sphere,Wi.init(),to.init();case 12:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function s(t){eo(i,n,r,s,a,"next",t)}function a(t){eo(i,n,r,s,a,"throw",t)}s(void 0)}))},function(){return s.apply(this,arguments)})},{key:"initWorld",value:function(){Rt.init(),z.add(Rt.element)}},{key:"initViews",value:function(){this.view=new ui,Rt.scene.add(this.view)}},{key:"initControllers",value:function(){var t=Rt.renderer,e=Rt.scene,n=Rt.camera;pi.init(n),hi.init(this.view),fr.init(t,e,n)}},{key:"addListeners",value:function(){z.events.on(e.RESIZE,this.onResize),O.add(this.onUpdate)}}],r&&no(n.prototype,r),i&&no(n,i),t}();ro(io,"onResize",(function(){var t=z.width,e=z.height,n=z.dpr;Rt.resize(t,e,n),pi.resize(t,e),hi.resize(t,e),fr.resize(t,e,n)})),ro(io,"onUpdate",(function(t,e,n){Rt.update(t,e,n),pi.update(),hi.update(),fr.update(t,e,n),io.view.sphere.update(t)})),io.init()})()})();